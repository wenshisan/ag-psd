(()=>{var e={956:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readAbr=void 0;var n=r(30),i=r(854),a=["off","fade","pen pressure","pen tilt","stylus wheel","initial direction","direction","initial rotation","rotation"],o={_:"brush",MixB:"mixer brush",SmTl:"smudge brush"};function s(e){return{control:a[e.bVTy],steps:e.fStp,jitter:(0,n.parsePercent)(e.jitter),minimum:(0,n.parsePercent)(e["Mnm "])}}function l(e){var t={size:(0,n.parseUnitsToNumber)(e.Dmtr,"Pixels"),angle:(0,n.parseAngle)(e.Angl),roundness:(0,n.parsePercent)(e.Rndn),spacingOn:e.Intr,spacing:(0,n.parsePercent)(e.Spcn),flipX:e.flipX,flipY:e.flipY};return e["Nm  "]&&(t.name=e["Nm  "]),e.Hrdn&&(t.hardness=(0,n.parsePercent)(e.Hrdn)),e.sampledData&&(t.sampledData=e.sampledData),t}t.readAbr=function(e,t){var r,a,c,d;void 0===t&&(t={});var u=(0,i.createReader)(e.buffer,e.byteOffset,e.byteLength),f=(0,i.readInt16)(u),p=[],h=[],g=[];if(1===f||2===f)throw new Error("Unsupported ABR version (".concat(f,")"));if(6!==f&&7!==f&&9!==f&&10!==f)throw new Error("Unsupported ABR version (".concat(f,")"));var m=(0,i.readInt16)(u);if(1!==m&&2!==m)throw new Error("Unsupported ABR minor version");for(;u.offset<u.view.byteLength;){(0,i.checkSignature)(u,"8BIM");var v=(0,i.readSignature)(u),y=(0,i.readUint32)(u),w=u.offset+y;switch(v){case"samp":for(;u.offset<w;){for(var b=(0,i.readUint32)(u);3&b;)b++;var S=u.offset+b,I=(0,i.readPascalString)(u,1);(0,i.skipBytes)(u,1===m?10:264);var k=(0,i.readInt32)(u),F=(0,i.readInt32)(u),D=(0,i.readInt32)(u)-k,C=(0,i.readInt32)(u)-F;if(C<=0||D<=0)throw new Error("Invalid bounds");var P=(0,i.readInt16)(u),U=(0,i.readUint8)(u),M=new Uint8Array(C*D);if(8===P)if(0===U)M.set((0,i.readBytes)(u,M.byteLength));else{if(1!==U)throw new Error("Invalid compression");(0,i.readDataRLE)(u,{width:C,height:D,data:M},C,D,1,[0],!1)}else{if(16!==P)throw new Error("Invalid depth");if(0!==U)throw 1===U?new Error("not implemented (16bit RLE)"):new Error("Invalid compression");for(var A=0;A<M.byteLength;A++)M[A]=(0,i.readUint16)(u)>>8}p.push({id:I,bounds:{x:F,y:k,w:C,h:D},alpha:M}),u.offset=S}break;case"desc":for(var x=0,E=(R=(0,n.readVersionAndDescriptor)(u,!0)).Brsh;x<E.length;x++){var L=E[x],O={name:L["Nm  "],shape:l(L.Brsh),spacing:(0,n.parsePercent)(L.Spcn),wetEdges:L.Wtdg,noise:L.Nose,useBrushSize:L.useBrushSize};null!=L.interpretation&&(O.interpretation=L.interpretation),null!=L.protectTexture&&(O.protectTexture=L.protectTexture),L.useTipDynamics&&(O.shapeDynamics={tiltScale:(0,n.parsePercent)(L.tiltScale),sizeDynamics:s(L.szVr),angleDynamics:s(L.angleDynamics),roundnessDynamics:s(L.roundnessDynamics),flipX:L.flipX,flipY:L.flipY,brushProjection:L.brushProjection,minimumDiameter:(0,n.parsePercent)(L.minimumDiameter),minimumRoundness:(0,n.parsePercent)(L.minimumRoundness)}),L.useScatter&&(O.scatter={count:L["Cnt "],bothAxes:L.bothAxes,countDynamics:s(L.countDynamics),scatterDynamics:s(L.scatterDynamics)}),L.useTexture&&L.Txtr&&(O.texture={id:L.Txtr.Idnt,name:L.Txtr["Nm  "],blendMode:n.BlnM.decode(L.textureBlendMode),depth:(0,n.parsePercent)(L.textureDepth),depthMinimum:(0,n.parsePercent)(L.minimumDepth),depthDynamics:s(L.textureDepthDynamics),scale:(0,n.parsePercent)(L.textureScale),invert:L.InvT,brightness:L.textureBrightness,contrast:L.textureContrast});var B=L.dualBrush;B&&B.useDualBrush&&(O.dualBrush={flip:B.Flip,shape:l(B.Brsh),blendMode:n.BlnM.decode(B.BlnM),useScatter:B.useScatter,spacing:(0,n.parsePercent)(B.Spcn),count:B["Cnt "],bothAxes:B.bothAxes,countDynamics:s(B.countDynamics),scatterDynamics:s(B.scatterDynamics)}),L.useColorDynamics&&(O.colorDynamics={foregroundBackground:s(L.clVr),hue:(0,n.parsePercent)(L["H   "]),saturation:(0,n.parsePercent)(L.Strt),brightness:(0,n.parsePercent)(L.Brgh),purity:(0,n.parsePercent)(L.purity),perTip:L.colorDynamicsPerTip}),L.usePaintDynamics&&(O.transfer={flowDynamics:s(L.prVr),opacityDynamics:s(L.opVr),wetnessDynamics:s(L.wtVr),mixDynamics:s(L.mxVr)}),L.useBrushPose&&(O.brushPose={overrideAngle:L.overridePoseAngle,overrideTiltX:L.overridePoseTiltX,overrideTiltY:L.overridePoseTiltY,overridePressure:L.overridePosePressure,pressure:(0,n.parsePercent)(L.brushPosePressure),tiltX:L.brushPoseTiltX,tiltY:L.brushPoseTiltY,angle:L.brushPoseAngle});var T=L.toolOptions;T&&(O.toolOptions={type:o[T._classID]||"brush",brushPreset:T.brushPreset,flow:null!==(r=T.flow)&&void 0!==r?r:100,smooth:null!==(a=T.Smoo)&&void 0!==a?a:0,mode:n.BlnM.decode(T["Md  "]||"BlnM.Nrml"),opacity:null!==(c=T.Opct)&&void 0!==c?c:100,smoothing:!!T.smoothing,smoothingValue:T.smoothingValue||0,smoothingRadiusMode:!!T.smoothingRadiusMode,smoothingCatchup:!!T.smoothingCatchup,smoothingCatchupAtEnd:!!T.smoothingCatchupAtEnd,smoothingZoomCompensation:!!T.smoothingZoomCompensation,pressureSmoothing:!!T.pressureSmoothing,usePressureOverridesSize:!!T.usePressureOverridesSize,usePressureOverridesOpacity:!!T.usePressureOverridesOpacity,useLegacy:!!T.useLegacy},T.prVr&&(O.toolOptions.flowDynamics=s(T.prVr)),T.opVr&&(O.toolOptions.opacityDynamics=s(T.opVr)),T.szVr&&(O.toolOptions.sizeDynamics=s(T.szVr)),"wetness"in T&&(O.toolOptions.wetness=T.wetness),"dryness"in T&&(O.toolOptions.dryness=T.dryness),"mix"in T&&(O.toolOptions.mix=T.mix),"autoFill"in T&&(O.toolOptions.autoFill=T.autoFill),"autoClean"in T&&(O.toolOptions.autoClean=T.autoClean),"loadSolidColorOnly"in T&&(O.toolOptions.loadSolidColorOnly=T.loadSolidColorOnly),"sampleAllLayers"in T&&(O.toolOptions.sampleAllLayers=T.sampleAllLayers),"SmdF"in T&&(O.toolOptions.smudgeFingerPainting=T.SmdF),"SmdS"in T&&(O.toolOptions.smudgeSampleAllLayers=T.SmdS),"Prs "in T&&(O.toolOptions.strength=T["Prs "]),"SmdF"in T&&(O.toolOptions.smudgeFingerPainting=T.SmdF),"SmdS"in T&&(O.toolOptions.smudgeSampleAllLayers=T.SmdS)),h.push(O)}break;case"patt":u.offset<w&&(g.push((0,i.readPattern)(u)),u.offset=w);break;case"phry":var R=(0,n.readVersionAndDescriptor)(u);t.logMissingFeatures&&(null===(d=R.hierarchy)||void 0===d?void 0:d.length)&&console.log("unhandled phry section",R);break;default:throw new Error("Invalid brush type: ".concat(v))}for(;y%4;)u.offset++,y++}return{samples:p,patterns:g,brushes:h}}},692:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasMultiEffects=t.readVectorMask=t.booleanOperations=t.readBezierKnot=t.infoHandlersMap=t.infoHandlers=void 0;var i=r(238),a=r(34),o=r(534),s=r(854),l=r(206),c=r(30),d=r(515),u=r(302),f="abcdefghijklmnopqrstuvwxyz";function p(e,r,n,i){var a={key:e,has:r,read:n,write:i};t.infoHandlers.push(a),t.infoHandlersMap[a.key]=a}function h(e,r){t.infoHandlersMap[e]=t.infoHandlersMap[r]}function g(e){return function(t){return void 0!==t[e]}}function m(e){if((0,s.readUint32)(e))throw new Error("Resource size above 4 GB limit at ".concat(e.offset.toString(16)));return(0,s.readUint32)(e)}function v(e,t){(0,l.writeUint32)(e,0),(0,l.writeUint32)(e,t)}function y(e,t,r){var n=(0,s.readFixedPointPath32)(e)*r,i=(0,s.readFixedPointPath32)(e)*t,a=(0,s.readFixedPointPath32)(e)*r,o=(0,s.readFixedPointPath32)(e)*t,l=(0,s.readFixedPointPath32)(e)*r;return[i,n,o,a,(0,s.readFixedPointPath32)(e)*t,l]}function w(e,t,r,n){(0,l.writeFixedPointPath32)(e,t[1]/n),(0,l.writeFixedPointPath32)(e,t[0]/r),(0,l.writeFixedPointPath32)(e,t[3]/n),(0,l.writeFixedPointPath32)(e,t[2]/r),(0,l.writeFixedPointPath32)(e,t[5]/n),(0,l.writeFixedPointPath32)(e,t[4]/r)}function b(e,r,n,i,a){for(var o=e.offset+a,l=r.paths,c=void 0;o-e.offset>=26;){var d=(0,s.readUint16)(e);switch(d){case 0:case 3:(0,s.readUint16)(e);var u=(0,s.readInt16)(e),f=(0,s.readUint16)(e);(0,s.skipBytes)(e,18),c={open:3===d,operation:-1===u?"combine":t.booleanOperations[u],knots:[],fillRule:2===f?"non-zero":"even-odd"},l.push(c);break;case 1:case 2:case 4:case 5:c.knots.push({linked:1===d||4===d,points:y(e,n,i)});break;case 6:(0,s.skipBytes)(e,24);break;case 7:var p=(0,s.readFixedPointPath32)(e),h=(0,s.readFixedPointPath32)(e),g=(0,s.readFixedPointPath32)(e),m=(0,s.readFixedPointPath32)(e),v=(0,s.readFixedPointPath32)(e);(0,s.skipBytes)(e,4),r.clipboard={top:p,left:h,bottom:g,right:m,resolution:v};break;case 8:r.fillStartsWithAllPixels=!!(0,s.readUint16)(e),(0,s.skipBytes)(e,22);break;default:throw new Error("Invalid vmsk section")}}return l}t.infoHandlers=[],t.infoHandlersMap={},p("TySh",g("text"),(function(e,t,r){if(1!==(0,s.readInt16)(e))throw new Error("Invalid TySh version");for(var i=[],a=0;a<6;a++)i.push((0,s.readFloat64)(e));if(50!==(0,s.readInt16)(e))throw new Error("Invalid TySh text version");var o=(0,c.readVersionAndDescriptor)(e);if(1!==(0,s.readInt16)(e))throw new Error("Invalid TySh warp version");var l=(0,c.readVersionAndDescriptor)(e);if(t.text={transform:i,left:(0,s.readFloat32)(e),top:(0,s.readFloat32)(e),right:(0,s.readFloat32)(e),bottom:(0,s.readFloat32)(e),text:o["Txt "].replace(/\r/g,"\n"),index:o.TextIndex||0,gridding:c.textGridding.decode(o.textGridding),antiAlias:c.Annt.decode(o.AntA),orientation:c.Ornt.decode(o.Ornt),warp:{style:c.warpStyle.decode(l.warpStyle),value:l.warpValue||0,perspective:l.warpPerspective||0,perspectiveOther:l.warpPerspectiveOther||0,rotate:c.Ornt.decode(l.warpRotate)}},o.bounds&&(t.text.bounds=(0,c.descBoundsToBounds)(o.bounds)),o.boundingBox&&(t.text.boundingBox=(0,c.descBoundsToBounds)(o.boundingBox)),o.EngineData){var f=(0,d.parseEngineData)(o.EngineData),p=(0,u.decodeEngineData)(f);t.text=n(n({},t.text),p)}(0,s.skipBytes)(e,r())}),(function(e,t){var r=t.text,i=r.warp||{},a=r.transform||[1,0,0,1,0,0],o=n(n(n({"Txt ":(r.text||"").replace(/\r?\n/g,"\r"),textGridding:c.textGridding.encode(r.gridding),Ornt:c.Ornt.encode(r.orientation),AntA:c.Annt.encode(r.antiAlias)},r.bounds?{bounds:(0,c.boundsToDescBounds)(r.bounds)}:{}),r.boundingBox?{boundingBox:(0,c.boundsToDescBounds)(r.boundingBox)}:{}),{TextIndex:r.index||0,EngineData:(0,d.serializeEngineData)((0,u.encodeEngineData)(r))});(0,l.writeInt16)(e,1);for(var s=0;s<6;s++)(0,l.writeFloat64)(e,a[s]);(0,l.writeInt16)(e,50),(0,c.writeVersionAndDescriptor)(e,"","TxLr",o,"text"),(0,l.writeInt16)(e,1),(0,c.writeVersionAndDescriptor)(e,"","warp",F(i)),(0,l.writeFloat32)(e,r.left),(0,l.writeFloat32)(e,r.top),(0,l.writeFloat32)(e,r.right),(0,l.writeFloat32)(e,r.bottom)})),p("SoCo",(function(e){return void 0!==e.vectorFill&&void 0===e.vectorStroke&&"color"===e.vectorFill.type}),(function(e,t){var r=(0,c.readVersionAndDescriptor)(e);t.vectorFill=(0,c.parseVectorContent)(r)}),(function(e,t){var r=(0,c.serializeVectorContent)(t.vectorFill).descriptor;(0,c.writeVersionAndDescriptor)(e,"","null",r)})),p("GdFl",(function(e){return void 0!==e.vectorFill&&void 0===e.vectorStroke&&("solid"===e.vectorFill.type||"noise"===e.vectorFill.type)}),(function(e,t,r){var n=(0,c.readVersionAndDescriptor)(e);t.vectorFill=(0,c.parseVectorContent)(n),(0,s.skipBytes)(e,r())}),(function(e,t){var r=(0,c.serializeVectorContent)(t.vectorFill).descriptor;(0,c.writeVersionAndDescriptor)(e,"","null",r)})),p("PtFl",(function(e){return void 0!==e.vectorFill&&void 0===e.vectorStroke&&"pattern"===e.vectorFill.type}),(function(e,t){var r=(0,c.readVersionAndDescriptor)(e);t.vectorFill=(0,c.parseVectorContent)(r)}),(function(e,t){var r=(0,c.serializeVectorContent)(t.vectorFill).descriptor;(0,c.writeVersionAndDescriptor)(e,"","null",r)})),p("vscg",(function(e){return void 0!==e.vectorFill&&void 0!==e.vectorStroke}),(function(e,t,r){(0,s.readSignature)(e);var n=(0,c.readVersionAndDescriptor)(e);t.vectorFill=(0,c.parseVectorContent)(n),(0,s.skipBytes)(e,r())}),(function(e,t){var r=(0,c.serializeVectorContent)(t.vectorFill),n=r.descriptor,i=r.key;(0,l.writeSignature)(e,i),(0,c.writeVersionAndDescriptor)(e,"","null",n)})),t.readBezierKnot=y,t.booleanOperations=["exclude","combine","subtract","intersect"],t.readVectorMask=b,p("vmsk",g("vectorMask"),(function(e,t,r,n){var i=n.width,a=n.height;if(3!==(0,s.readUint32)(e))throw new Error("Invalid vmsk version");t.vectorMask={paths:[]};var o=t.vectorMask,l=(0,s.readUint32)(e);o.invert=0!=(1&l),o.notLink=0!=(2&l),o.disable=0!=(4&l),b(e,o,i,a,r()),(0,s.skipBytes)(e,r())}),(function(e,r,n){var i=n.width,a=n.height,o=r.vectorMask,s=(o.invert?1:0)|(o.notLink?2:0)|(o.disable?4:0);(0,l.writeUint32)(e,3),(0,l.writeUint32)(e,s),(0,l.writeUint16)(e,6),(0,l.writeZeros)(e,24);var c=o.clipboard;c&&((0,l.writeUint16)(e,7),(0,l.writeFixedPointPath32)(e,c.top),(0,l.writeFixedPointPath32)(e,c.left),(0,l.writeFixedPointPath32)(e,c.bottom),(0,l.writeFixedPointPath32)(e,c.right),(0,l.writeFixedPointPath32)(e,c.resolution),(0,l.writeZeros)(e,4)),void 0!==o.fillStartsWithAllPixels&&((0,l.writeUint16)(e,8),(0,l.writeUint16)(e,o.fillStartsWithAllPixels?1:0),(0,l.writeZeros)(e,22));for(var d=0,u=o.paths;d<u.length;d++){var f=u[d];(0,l.writeUint16)(e,f.open?3:0),(0,l.writeUint16)(e,f.knots.length),(0,l.writeUint16)(e,Math.abs(t.booleanOperations.indexOf(f.operation))),(0,l.writeUint16)(e,"non-zero"===f.fillRule?2:1),(0,l.writeZeros)(e,18);for(var p=f.open?4:1,h=f.open?5:2,g=0,m=f.knots;g<m.length;g++){var v=m[g],y=v.linked,b=v.points;(0,l.writeUint16)(e,y?p:h),w(e,b,i,a)}}})),h("vsms","vmsk"),p("vogk",g("vectorOrigination"),(function(e,t,r){if(1!==(0,s.readInt32)(e))throw new Error("Invalid vogk version");var n=(0,c.readVersionAndDescriptor)(e);t.vectorOrigination={keyDescriptorList:[]};for(var i=0,a=n.keyDescriptorList;i<a.length;i++){var o=a[i],l={};null!=o.keyShapeInvalidated&&(l.keyShapeInvalidated=o.keyShapeInvalidated),null!=o.keyOriginType&&(l.keyOriginType=o.keyOriginType),null!=o.keyOriginResolution&&(l.keyOriginResolution=o.keyOriginResolution),o.keyOriginShapeBBox&&(l.keyOriginShapeBoundingBox={top:(0,c.parseUnits)(o.keyOriginShapeBBox["Top "]),left:(0,c.parseUnits)(o.keyOriginShapeBBox.Left),bottom:(0,c.parseUnits)(o.keyOriginShapeBBox.Btom),right:(0,c.parseUnits)(o.keyOriginShapeBBox.Rght)});var d=o.keyOriginRRectRadii;d&&(l.keyOriginRRectRadii={topRight:(0,c.parseUnits)(d.topRight),topLeft:(0,c.parseUnits)(d.topLeft),bottomLeft:(0,c.parseUnits)(d.bottomLeft),bottomRight:(0,c.parseUnits)(d.bottomRight)});var u=o.keyOriginBoxCorners;u&&(l.keyOriginBoxCorners=[{x:u.rectangleCornerA.Hrzn,y:u.rectangleCornerA.Vrtc},{x:u.rectangleCornerB.Hrzn,y:u.rectangleCornerB.Vrtc},{x:u.rectangleCornerC.Hrzn,y:u.rectangleCornerC.Vrtc},{x:u.rectangleCornerD.Hrzn,y:u.rectangleCornerD.Vrtc}]);var f=o.Trnf;f&&(l.transform=[f.xx,f.xy,f.xy,f.yy,f.tx,f.ty]),t.vectorOrigination.keyDescriptorList.push(l)}(0,s.skipBytes)(e,r())}),(function(e,t){for(var r=t.vectorOrigination,n={keyDescriptorList:[]},i=0;i<r.keyDescriptorList.length;i++){var a=r.keyDescriptorList[i];if(a.keyShapeInvalidated)n.keyDescriptorList.push({keyShapeInvalidated:!0,keyOriginIndex:i});else{n.keyDescriptorList.push({});var o=n.keyDescriptorList[n.keyDescriptorList.length-1];null!=a.keyOriginType&&(o.keyOriginType=a.keyOriginType),null!=a.keyOriginResolution&&(o.keyOriginResolution=a.keyOriginResolution);var s=a.keyOriginRRectRadii;s&&(o.keyOriginRRectRadii={unitValueQuadVersion:1,topRight:(0,c.unitsValue)(s.topRight,"topRight"),topLeft:(0,c.unitsValue)(s.topLeft,"topLeft"),bottomLeft:(0,c.unitsValue)(s.bottomLeft,"bottomLeft"),bottomRight:(0,c.unitsValue)(s.bottomRight,"bottomRight")});var d=a.keyOriginShapeBoundingBox;d&&(o.keyOriginShapeBBox={unitValueQuadVersion:1,"Top ":(0,c.unitsValue)(d.top,"top"),Left:(0,c.unitsValue)(d.left,"left"),Btom:(0,c.unitsValue)(d.bottom,"bottom"),Rght:(0,c.unitsValue)(d.right,"right")});var u=a.keyOriginBoxCorners;u&&4===u.length&&(o.keyOriginBoxCorners={rectangleCornerA:{Hrzn:u[0].x,Vrtc:u[0].y},rectangleCornerB:{Hrzn:u[1].x,Vrtc:u[1].y},rectangleCornerC:{Hrzn:u[2].x,Vrtc:u[2].y},rectangleCornerD:{Hrzn:u[3].x,Vrtc:u[3].y}});var f=a.transform;f&&6===f.length&&(o.Trnf={xx:f[0],xy:f[1],yx:f[2],yy:f[3],tx:f[4],ty:f[5]}),o.keyOriginIndex=i}}(0,l.writeInt32)(e,1),(0,c.writeVersionAndDescriptor)(e,"","null",n)})),p("lmfx",(function(e){return void 0!==e.effects&&$(e.effects)}),(function(e,t,r,n,i){if(0!==(0,s.readUint32)(e))throw new Error("Invalid lmfx version");var a=(0,c.readVersionAndDescriptor)(e);t.effects=(0,c.parseEffects)(a,!!i.logMissingFeatures),(0,s.skipBytes)(e,r())}),(function(e,t,r,n){var i=(0,c.serializeEffects)(t.effects,!!n.logMissingFeatures,!0);(0,l.writeUint32)(e,0),(0,c.writeVersionAndDescriptor)(e,"","null",i)})),p("lrFX",g("effects"),(function(e,t,r){t.effects||(t.effects=(0,a.readEffects)(e)),(0,s.skipBytes)(e,r())}),(function(e,t){(0,a.writeEffects)(e,t.effects)})),p("luni",g("name"),(function(e,t,r){t.name=(0,s.readUnicodeString)(e),(0,s.skipBytes)(e,r())}),(function(e,t){(0,l.writeUnicodeString)(e,t.name)})),p("lnsr",g("nameSource"),(function(e,t){return t.nameSource=(0,s.readSignature)(e)}),(function(e,t){return(0,l.writeSignature)(e,t.nameSource)})),p("lyid",g("id"),(function(e,t){return t.id=(0,s.readUint32)(e)}),(function(e,t,r,n){for(var i=t.id;n.layerIds.has(i);)i+=100;(0,l.writeUint32)(e,i),n.layerIds.add(i),n.layerToId.set(t,i)})),p("lsct",g("sectionDivider"),(function(e,t,r){t.sectionDivider={type:(0,s.readUint32)(e)},r()&&((0,s.checkSignature)(e,"8BIM"),t.sectionDivider.key=(0,s.readSignature)(e)),r()&&(t.sectionDivider.subType=(0,s.readUint32)(e))}),(function(e,t){(0,l.writeUint32)(e,t.sectionDivider.type),t.sectionDivider.key&&((0,l.writeSignature)(e,"8BIM"),(0,l.writeSignature)(e,t.sectionDivider.key),void 0!==t.sectionDivider.subType&&(0,l.writeUint32)(e,t.sectionDivider.subType))})),h("lsdk","lsct"),p("clbl",g("blendClippendElements"),(function(e,t){t.blendClippendElements=!!(0,s.readUint8)(e),(0,s.skipBytes)(e,3)}),(function(e,t){(0,l.writeUint8)(e,t.blendClippendElements?1:0),(0,l.writeZeros)(e,3)})),p("infx",g("blendInteriorElements"),(function(e,t){t.blendInteriorElements=!!(0,s.readUint8)(e),(0,s.skipBytes)(e,3)}),(function(e,t){(0,l.writeUint8)(e,t.blendInteriorElements?1:0),(0,l.writeZeros)(e,3)})),p("knko",g("knockout"),(function(e,t){t.knockout=!!(0,s.readUint8)(e),(0,s.skipBytes)(e,3)}),(function(e,t){(0,l.writeUint8)(e,t.knockout?1:0),(0,l.writeZeros)(e,3)})),p("lmgm",g("layerMaskAsGlobalMask"),(function(e,t){t.layerMaskAsGlobalMask=!!(0,s.readUint8)(e),(0,s.skipBytes)(e,3)}),(function(e,t){(0,l.writeUint8)(e,t.layerMaskAsGlobalMask?1:0),(0,l.writeZeros)(e,3)})),p("lspf",g("protected"),(function(e,t){var r=(0,s.readUint32)(e);t.protected={transparency:0!=(1&r),composite:0!=(2&r),position:0!=(4&r)},8&r&&(t.protected.artboards=!0)}),(function(e,t){var r=(t.protected.transparency?1:0)|(t.protected.composite?2:0)|(t.protected.position?4:0)|(t.protected.artboards?8:0);(0,l.writeUint32)(e,r)})),p("lclr",g("layerColor"),(function(e,t){var r=(0,s.readUint16)(e);(0,s.skipBytes)(e,6),t.layerColor=o.layerColors[r]}),(function(e,t){var r=o.layerColors.indexOf(t.layerColor);(0,l.writeUint16)(e,-1===r?0:r),(0,l.writeZeros)(e,6)})),p("shmd",(function(e){return void 0!==e.timestamp||void 0!==e.animationFrames||void 0!==e.animationFrameFlags||void 0!==e.timeline}),(function(e,t,r,n,i){for(var a=(0,s.readUint32)(e),o=function(r){(0,s.checkSignature)(e,"8BIM");var n=(0,s.readSignature)(e);(0,s.readUint8)(e),(0,s.skipBytes)(e,3),(0,s.readSection)(e,1,(function(r){if("cust"===n)void 0!==(a=(0,c.readVersionAndDescriptor)(e)).layerTime&&(t.timestamp=a.layerTime);else if("mlst"===n){var a=(0,c.readVersionAndDescriptor)(e);t.animationFrames=[];for(var o=0;o<a.LaSt.length;o++){var l=a.LaSt[o],d={frames:l.FrLs};void 0!==l.enab&&(d.enable=l.enab),l.Ofst&&(d.offset=(0,c.horzVrtcToXY)(l.Ofst)),l.FXRf&&(d.referencePoint=(0,c.horzVrtcToXY)(l.FXRf)),l.Lefx&&(d.effects=(0,c.parseEffects)(l.Lefx,!!i.logMissingFeatures)),l.blendOptions&&l.blendOptions.Opct&&(d.opacity=(0,c.parsePercent)(l.blendOptions.Opct)),t.animationFrames.push(d)}}else if("mdyn"===n){(0,s.readUint16)(e);var u=(0,s.readUint8)(e),f=(0,s.readUint8)(e);t.animationFrameFlags={propagateFrameOne:!u,unifyLayerPosition:0!=(1&f),unifyLayerStyle:0!=(2&f),unifyLayerVisibility:0!=(4&f)}}else if("tmln"===n){var p=(a=(0,c.readVersionAndDescriptor)(e)).timeScope,h={start:(0,c.frac)(p.Strt),duration:(0,c.frac)(p.duration),inTime:(0,c.frac)(p.inTime),outTime:(0,c.frac)(p.outTime),autoScope:a.autoScope,audioLevel:a.audioLevel};a.trackList&&(h.tracks=(0,c.parseTrackList)(a.trackList,!!i.logMissingFeatures)),t.timeline=h}else i.logDevFeatures&&console.log('Unhandled "shmd" section key',n);(0,s.skipBytes)(e,r())}))},l=0;l<a;l++)o();(0,s.skipBytes)(e,r())}),(function(e,t,r,n){var i=t.animationFrames,a=t.animationFrameFlags,o=t.timestamp,s=t.timeline,d=0;i&&d++,a&&d++,s&&d++,void 0!==o&&d++,(0,l.writeUint32)(e,d),i&&((0,l.writeSignature)(e,"8BIM"),(0,l.writeSignature)(e,"mlst"),(0,l.writeUint8)(e,0),(0,l.writeZeros)(e,3),(0,l.writeSection)(e,2,(function(){for(var r,n={LaID:null!==(r=t.id)&&void 0!==r?r:0,LaSt:[]},a=0;a<i.length;a++){var o=i[a],s={};void 0!==o.enable&&(s.enab=o.enable),s.FrLs=o.frames,o.offset&&(s.Ofst=(0,c.xyToHorzVrtc)(o.offset)),o.referencePoint&&(s.FXRf=(0,c.xyToHorzVrtc)(o.referencePoint)),o.effects&&(s.Lefx=(0,c.serializeEffects)(o.effects,!1,!1)),void 0!==o.opacity&&(s.blendOptions={Opct:(0,c.unitsPercent)(o.opacity)}),n.LaSt.push(s)}(0,c.writeVersionAndDescriptor)(e,"","null",n)}),!0)),a&&((0,l.writeSignature)(e,"8BIM"),(0,l.writeSignature)(e,"mdyn"),(0,l.writeUint8)(e,0),(0,l.writeZeros)(e,3),(0,l.writeSection)(e,2,(function(){(0,l.writeUint16)(e,0),(0,l.writeUint8)(e,a.propagateFrameOne?0:15),(0,l.writeUint8)(e,(a.unifyLayerPosition?1:0)|(a.unifyLayerStyle?2:0)|(a.unifyLayerVisibility?4:0))}))),s&&((0,l.writeSignature)(e,"8BIM"),(0,l.writeSignature)(e,"tmln"),(0,l.writeUint8)(e,0),(0,l.writeZeros)(e,3),(0,l.writeSection)(e,2,(function(){var r={Vrsn:1,timeScope:{Vrsn:1,Strt:s.start,duration:s.duration,inTime:s.inTime,outTime:s.outTime},autoScope:s.autoScope,audioLevel:s.audioLevel};s.tracks&&(r.trackList=(0,c.serializeTrackList)(s.tracks));var i=n.layerToId.get(t)||t.id||0;if(!i)throw new Error("You need to provide layer.id value whan writing document with animations");r.LyrI=i,(0,c.writeVersionAndDescriptor)(e,"","null",r,"anim")}),!0)),void 0!==o&&((0,l.writeSignature)(e,"8BIM"),(0,l.writeSignature)(e,"cust"),(0,l.writeUint8)(e,0),(0,l.writeZeros)(e,3),(0,l.writeSection)(e,2,(function(){var t={layerTime:o};(0,c.writeVersionAndDescriptor)(e,"","metadata",t)}),!0))})),p("vstk",g("vectorStroke"),(function(e,t,r){var n=(0,c.readVersionAndDescriptor)(e);t.vectorStroke={strokeEnabled:n.strokeEnabled,fillEnabled:n.fillEnabled,lineWidth:(0,c.parseUnits)(n.strokeStyleLineWidth),lineDashOffset:(0,c.parseUnits)(n.strokeStyleLineDashOffset),miterLimit:n.strokeStyleMiterLimit,lineCapType:c.strokeStyleLineCapType.decode(n.strokeStyleLineCapType),lineJoinType:c.strokeStyleLineJoinType.decode(n.strokeStyleLineJoinType),lineAlignment:c.strokeStyleLineAlignment.decode(n.strokeStyleLineAlignment),scaleLock:n.strokeStyleScaleLock,strokeAdjust:n.strokeStyleStrokeAdjust,lineDashSet:n.strokeStyleLineDashSet.map(c.parseUnits),blendMode:c.BlnM.decode(n.strokeStyleBlendMode),opacity:(0,c.parsePercent)(n.strokeStyleOpacity),content:(0,c.parseVectorContent)(n.strokeStyleContent),resolution:n.strokeStyleResolution},(0,s.skipBytes)(e,r())}),(function(e,t){var r,n,i,a=t.vectorStroke,o={strokeStyleVersion:2,strokeEnabled:!!a.strokeEnabled,fillEnabled:!!a.fillEnabled,strokeStyleLineWidth:a.lineWidth||{value:3,units:"Points"},strokeStyleLineDashOffset:a.lineDashOffset||{value:0,units:"Points"},strokeStyleMiterLimit:null!==(r=a.miterLimit)&&void 0!==r?r:100,strokeStyleLineCapType:c.strokeStyleLineCapType.encode(a.lineCapType),strokeStyleLineJoinType:c.strokeStyleLineJoinType.encode(a.lineJoinType),strokeStyleLineAlignment:c.strokeStyleLineAlignment.encode(a.lineAlignment),strokeStyleScaleLock:!!a.scaleLock,strokeStyleStrokeAdjust:!!a.strokeAdjust,strokeStyleLineDashSet:a.lineDashSet||[],strokeStyleBlendMode:c.BlnM.encode(a.blendMode),strokeStyleOpacity:(0,c.unitsPercent)(null!==(n=a.opacity)&&void 0!==n?n:1),strokeStyleContent:(0,c.serializeVectorContent)(a.content||{type:"color",color:{r:0,g:0,b:0}}).descriptor,strokeStyleResolution:null!==(i=a.resolution)&&void 0!==i?i:72};(0,c.writeVersionAndDescriptor)(e,"","strokeStyle",o)})),p("artb",g("artboard"),(function(e,t,r){var n=(0,c.readVersionAndDescriptor)(e),i=n.artboardRect;t.artboard={rect:{top:i["Top "],left:i.Left,bottom:i.Btom,right:i.Rght},guideIndices:n.guideIndeces,presetName:n.artboardPresetName,color:(0,c.parseColor)(n["Clr "]),backgroundType:n.artboardBackgroundType},(0,s.skipBytes)(e,r())}),(function(e,t){var r,n=t.artboard,i=n.rect,a={artboardRect:{"Top ":i.top,Left:i.left,Btom:i.bottom,Rght:i.right},guideIndeces:n.guideIndices||[],artboardPresetName:n.presetName||"","Clr ":(0,c.serializeColor)(n.color),artboardBackgroundType:null!==(r=n.backgroundType)&&void 0!==r?r:1};(0,c.writeVersionAndDescriptor)(e,"","artboard",a)})),p("sn2P",g("usingAlignedRendering"),(function(e,t){return t.usingAlignedRendering=!!(0,s.readUint32)(e)}),(function(e,t){return(0,l.writeUint32)(e,t.usingAlignedRendering?1:0)}));var S=["unknown","vector","raster","image stack"];function I(e){var t,r,i,a,o,s,l=n(n({style:c.warpStyle.decode(e.warpStyle)},e.warpValues?{values:e.warpValues}:{value:e.warpValue||0}),{perspective:e.warpPerspective||0,perspectiveOther:e.warpPerspectiveOther||0,rotate:c.Ornt.decode(e.warpRotate),bounds:e.bounds&&{top:(0,c.parseUnitsOrNumber)(e.bounds["Top "]),left:(0,c.parseUnitsOrNumber)(e.bounds.Left),bottom:(0,c.parseUnitsOrNumber)(e.bounds.Btom),right:(0,c.parseUnitsOrNumber)(e.bounds.Rght)},uOrder:e.uOrder,vOrder:e.vOrder});null==e.deformNumRows&&null==e.deformNumCols||(l.deformNumRows=e.deformNumRows,l.deformNumCols=e.deformNumCols);var d=e.customEnvelopeWarp;if(d){l.customEnvelopeWarp={meshPoints:[]};for(var u=(null===(t=d.meshPoints.find((function(e){return"Hrzn"===e.type})))||void 0===t?void 0:t.values)||[],f=(null===(r=d.meshPoints.find((function(e){return"Vrtc"===e.type})))||void 0===r?void 0:r.values)||[],p=0;p<u.length;p++)l.customEnvelopeWarp.meshPoints.push({x:u[p],y:f[p]});(d.quiltSliceX||d.quiltSliceY)&&(l.customEnvelopeWarp.quiltSliceX=(null===(a=null===(i=d.quiltSliceX)||void 0===i?void 0:i[0])||void 0===a?void 0:a.values)||[],l.customEnvelopeWarp.quiltSliceY=(null===(s=null===(o=d.quiltSliceY)||void 0===o?void 0:o[0])||void 0===s?void 0:s.values)||[])}return l}function k(e){var t,r;return null!=e.deformNumCols||null!=e.deformNumRows||(null===(t=e.customEnvelopeWarp)||void 0===t?void 0:t.quiltSliceX)||(null===(r=e.customEnvelopeWarp)||void 0===r?void 0:r.quiltSliceY)}function F(e){var t=e.bounds,r=n(n({warpStyle:c.warpStyle.encode(e.style)},e.values?{warpValues:e.values}:{warpValue:e.value||0}),{warpPerspective:e.perspective||0,warpPerspectiveOther:e.perspectiveOther||0,warpRotate:c.Ornt.encode(e.rotate),bounds:{"Top ":(0,c.unitsValue)(t&&t.top||{units:"Pixels",value:0},"bounds.top"),Left:(0,c.unitsValue)(t&&t.left||{units:"Pixels",value:0},"bounds.left"),Btom:(0,c.unitsValue)(t&&t.bottom||{units:"Pixels",value:0},"bounds.bottom"),Rght:(0,c.unitsValue)(t&&t.right||{units:"Pixels",value:0},"bounds.right")},uOrder:e.uOrder||0,vOrder:e.vOrder||0}),i=k(e);i&&((o=r).deformNumRows=e.deformNumRows||0,o.deformNumCols=e.deformNumCols||0);var a=e.customEnvelopeWarp;if(a){var o,s=a.meshPoints||[];i?(o=r).customEnvelopeWarp={_name:"",_classID:"customEnvelopeWarp",quiltSliceX:[{type:"quiltSliceX",values:a.quiltSliceX||[]}],quiltSliceY:[{type:"quiltSliceY",values:a.quiltSliceY||[]}],meshPoints:[{type:"Hrzn",values:s.map((function(e){return e.x}))},{type:"Vrtc",values:s.map((function(e){return e.y}))}]}:r.customEnvelopeWarp={_name:"",_classID:"customEnvelopeWarp",meshPoints:[{type:"Hrzn",values:s.map((function(e){return e.x}))},{type:"Vrtc",values:s.map((function(e){return e.y}))}]}}return r}function D(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function C(e){for(var t=[],r=0;r<e.length;r+=2)t.push({x:e[r],y:e[r+1]});return t}function P(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].x,e[r].y);return t}function U(e){return C(function(e){return new Float32Array(e.buffer.slice(e.byteOffset),0,e.byteLength/4)}(e))}function M(e){return{x:(0,c.parseUnits)(e.Hrzn),y:(0,c.parseUnits)(e.Vrtc)}}function A(e){return{_name:"",_classID:"Pnt ",Hrzn:(0,c.unitsValue)(e.x,"x"),Vrtc:(0,c.unitsValue)(e.y,"y")}}function x(e){var t={name:e["Nm  "],opacity:(0,c.parsePercent)(e.blendOptions.Opct),blendMode:c.BlnM.decode(e.blendOptions["Md  "]),enabled:e.enab,hasOptions:e.hasoptions,foregroundColor:(0,c.parseColor)(e.FrgC),backgroundColor:(0,c.parseColor)(e.BckC)};switch(e.filterID){case 1098281575:return n(n({},t),{type:"average"});case 1114403360:return n(n({},t),{type:"blur"});case 1114403405:return n(n({},t),{type:"blur more"});case 697:return n(n({},t),{type:"box blur",filter:{radius:(0,c.parseUnits)(e.Fltr["Rds "])}});case 1198747202:return n(n({},t),{type:"gaussian blur",filter:{radius:(0,c.parseUnits)(e.Fltr["Rds "])}});case 1299476034:return n(n({},t),{type:"motion blur",filter:{angle:e.Fltr.Angl,distance:(0,c.parseUnits)(e.Fltr.Dstn)}});case 1382313026:return n(n({},t),{type:"radial blur",filter:{amount:e.Fltr.Amnt,method:c.BlrM.decode(e.Fltr.BlrM),quality:c.BlrQ.decode(e.Fltr.BlrQ)}});case 702:return n(n({},t),{type:"shape blur",filter:{radius:(0,c.parseUnits)(e.Fltr["Rds "]),customShape:{name:e.Fltr.customShape["Nm  "],id:e.Fltr.customShape.Idnt}}});case 1399681602:return n(n({},t),{type:"smart blur",filter:{radius:e.Fltr["Rds "],threshold:e.Fltr.Thsh,quality:c.SmBQ.decode(e.Fltr.SmBQ),mode:c.SmBM.decode(e.Fltr.SmBM)}});case 701:return n(n({},t),{type:"surface blur",filter:{radius:(0,c.parseUnits)(e.Fltr["Rds "]),threshold:e.Fltr.Thsh}});case 1148416108:return n(n({},t),{type:"displace",filter:{horizontalScale:e.Fltr.HrzS,verticalScale:e.Fltr.VrtS,displacementMap:c.DspM.decode(e.Fltr.DspM),undefinedAreas:c.UndA.decode(e.Fltr.UndA),displacementFile:{signature:e.Fltr.DspF.sig,path:e.Fltr.DspF.path}}});case 1349411688:return n(n({},t),{type:"pinch",filter:{amount:e.Fltr.Amnt}});case 1349284384:return n(n({},t),{type:"polar coordinates",filter:{conversion:c.Cnvr.decode(e.Fltr.Cnvr)}});case 1383099493:return n(n({},t),{type:"ripple",filter:{amount:e.Fltr.Amnt,size:c.RplS.decode(e.Fltr.RplS)}});case 1399353888:return n(n({},t),{type:"shear",filter:{shearPoints:e.Fltr.ShrP.map((function(e){return{x:e.Hrzn,y:e.Vrtc}})),shearStart:e.Fltr.ShrS,shearEnd:e.Fltr.ShrE,undefinedAreas:c.UndA.decode(e.Fltr.UndA)}});case 1399875698:return n(n({},t),{type:"spherize",filter:{amount:e.Fltr.Amnt,mode:c.SphM.decode(e.Fltr.SphM)}});case 1417114220:return n(n({},t),{type:"twirl",filter:{angle:e.Fltr.Angl}});case 1466005093:return n(n({},t),{type:"wave",filter:{numberOfGenerators:e.Fltr.NmbG,type:c.Wvtp.decode(e.Fltr.Wvtp),wavelength:{min:e.Fltr.WLMn,max:e.Fltr.WLMx},amplitude:{min:e.Fltr.AmMn,max:e.Fltr.AmMx},scale:{x:e.Fltr.SclH,y:e.Fltr.SclV},randomSeed:e.Fltr.RndS,undefinedAreas:c.UndA.decode(e.Fltr.UndA)}});case 1516722791:return n(n({},t),{type:"zigzag",filter:{amount:e.Fltr.Amnt,ridges:e.Fltr.NmbR,style:c.ZZTy.decode(e.Fltr.ZZTy)}});case 1097092723:return n(n({},t),{type:"add noise",filter:{amount:(0,c.parsePercent)(e.Fltr.Nose),distribution:c.Dstr.decode(e.Fltr.Dstr),monochromatic:e.Fltr.Mnch,randomSeed:e.Fltr.FlRs}});case 1148416099:return n(n({},t),{type:"despeckle"});case 1148417107:return n(n({},t),{type:"dust and scratches",filter:{radius:e.Fltr["Rds "],threshold:e.Fltr.Thsh}});case 1298427424:return n(n({},t),{type:"median",filter:{radius:(0,c.parseUnits)(e.Fltr["Rds "])}});case 633:return n(n({},t),{type:"reduce noise",filter:{preset:e.Fltr.preset,removeJpegArtifact:e.Fltr.removeJPEGArtifact,reduceColorNoise:(0,c.parsePercent)(e.Fltr.ClNs),sharpenDetails:(0,c.parsePercent)(e.Fltr.Shrp),channelDenoise:e.Fltr.channelDenoise.map((function(e){return n({channels:e.Chnl.map((function(e){return c.Chnl.decode(e)})),amount:e.Amnt},e.EdgF?{preserveDetails:e.EdgF}:{})}))}});case 1131180616:return n(n({},t),{type:"color halftone",filter:{radius:e.Fltr["Rds "],angle1:e.Fltr.Ang1,angle2:e.Fltr.Ang2,angle3:e.Fltr.Ang3,angle4:e.Fltr.Ang4}});case 1131574132:return n(n({},t),{type:"crystallize",filter:{cellSize:e.Fltr.ClSz,randomSeed:e.Fltr.FlRs}});case 1180922912:return n(n({},t),{type:"facet"});case 1181902701:return n(n({},t),{type:"fragment"});case 1299870830:return n(n({},t),{type:"mezzotint",filter:{type:c.MztT.decode(e.Fltr.MztT),randomSeed:e.Fltr.FlRs}});case 1299407648:return n(n({},t),{type:"mosaic",filter:{cellSize:(0,c.parseUnits)(e.Fltr.ClSz)}});case 1349416044:return n(n({},t),{type:"pointillize",filter:{cellSize:e.Fltr.ClSz,randomSeed:e.Fltr.FlRs}});case 1131177075:return n(n({},t),{type:"clouds",filter:{randomSeed:e.Fltr.FlRs}});case 1147564611:return n(n({},t),{type:"difference clouds",filter:{randomSeed:e.Fltr.FlRs}});case 1180856947:return n(n({},t),{type:"fibers",filter:{variance:e.Fltr.Vrnc,strength:e.Fltr.Strg,randomSeed:e.Fltr.RndS}});case 1282306886:return n(n({},t),{type:"lens flare",filter:{brightness:e.Fltr.Brgh,position:{x:e.Fltr.FlrC.Hrzn,y:e.Fltr.FlrC.Vrtc},lensType:c.Lns.decode(e.Fltr["Lns "])}});case 1399353968:return n(n({},t),{type:"sharpen"});case 1399353925:return n(n({},t),{type:"sharpen edges"});case 1399353933:return n(n({},t),{type:"sharpen more"});case 698:return n(n({},t),{type:"smart sharpen",filter:{amount:(0,c.parsePercent)(e.Fltr.Amnt),radius:(0,c.parseUnits)(e.Fltr["Rds "]),threshold:e.Fltr.Thsh,angle:e.Fltr.Angl,moreAccurate:e.Fltr.moreAccurate,blur:c.blurType.decode(e.Fltr.blur),preset:e.Fltr.preset,shadow:{fadeAmount:(0,c.parsePercent)(e.Fltr.sdwM.Amnt),tonalWidth:(0,c.parsePercent)(e.Fltr.sdwM.Wdth),radius:e.Fltr.sdwM["Rds "]},highlight:{fadeAmount:(0,c.parsePercent)(e.Fltr.hglM.Amnt),tonalWidth:(0,c.parsePercent)(e.Fltr.hglM.Wdth),radius:e.Fltr.hglM["Rds "]}}});case 1433301837:return n(n({},t),{type:"unsharp mask",filter:{amount:(0,c.parsePercent)(e.Fltr.Amnt),radius:(0,c.parseUnits)(e.Fltr["Rds "]),threshold:e.Fltr.Thsh}});case 1147564832:return n(n({},t),{type:"diffuse",filter:{mode:c.DfsM.decode(e.Fltr["Md  "]),randomSeed:e.Fltr.FlRs}});case 1164796531:return n(n({},t),{type:"emboss",filter:{angle:e.Fltr.Angl,height:e.Fltr.Hght,amount:e.Fltr.Amnt}});case 1165522034:return n(n({},t),{type:"extrude",filter:{type:c.ExtT.decode(e.Fltr.ExtT),size:e.Fltr.ExtS,depth:e.Fltr.ExtD,depthMode:c.ExtR.decode(e.Fltr.ExtR),randomSeed:e.Fltr.FlRs,solidFrontFaces:e.Fltr.ExtF,maskIncompleteBlocks:e.Fltr.ExtM}});case 1181639749:return n(n({},t),{type:"find edges"});case 1399616122:return n(n({},t),{type:"solarize"});case 1416393504:return n(n({},t),{type:"tiles",filter:{numberOfTiles:e.Fltr.TlNm,maximumOffset:e.Fltr.TlOf,fillEmptyAreaWith:c.FlCl.decode(e.Fltr.FlCl),randomSeed:e.Fltr.FlRs}});case 1416782659:return n(n({},t),{type:"trace contour",filter:{level:e.Fltr["Lvl "],edge:c.CntE.decode(e.Fltr["Edg "])}});case 1466852384:return n(n({},t),{type:"wind",filter:{method:c.WndM.decode(e.Fltr.WndM),direction:c.Drct.decode(e.Fltr.Drct)}});case 1148089458:return n(n({},t),{type:"de-interlace",filter:{eliminate:c.IntE.decode(e.Fltr.IntE),newFieldsBy:c.IntC.decode(e.Fltr.IntC)}});case 1314149187:return n(n({},t),{type:"ntsc colors"});case 1131639917:return n(n({},t),{type:"custom",filter:{scale:e.Fltr["Scl "],offset:e.Fltr.Ofst,matrix:e.Fltr.Mtrx}});case 1214736464:return n(n({},t),{type:"high pass",filter:{radius:(0,c.parseUnits)(e.Fltr["Rds "])}});case 1299737888:return n(n({},t),{type:"maximum",filter:{radius:(0,c.parseUnits)(e.Fltr["Rds "])}});case 1299082528:return n(n({},t),{type:"minimum",filter:{radius:(0,c.parseUnits)(e.Fltr["Rds "])}});case 1332114292:return n(n({},t),{type:"offset",filter:{horizontal:e.Fltr.Hrzn,vertical:e.Fltr.Vrtc,undefinedAreas:c.FlMd.decode(e.Fltr["Fl  "])}});case 991:return n(n({},t),{type:"puppet",filter:{rigidType:e.Fltr.rigidType,bounds:[{x:e.Fltr.PuX0,y:e.Fltr.PuY0},{x:e.Fltr.PuX1,y:e.Fltr.PuY1},{x:e.Fltr.PuX2,y:e.Fltr.PuY2},{x:e.Fltr.PuX3,y:e.Fltr.PuY3}],puppetShapeList:e.Fltr.puppetShapeList.map((function(e){return{rigidType:e.rigidType,originalVertexArray:U(e.originalVertexArray),deformedVertexArray:U(e.deformedVertexArray),indexArray:Array.from((t=e.indexArray,new Uint32Array(t.buffer.slice(t.byteOffset),0,t.byteLength/4))),pinOffsets:C(e.pinOffsets),posFinalPins:C(e.posFinalPins),pinVertexIndices:e.pinVertexIndices,selectedPin:e.selectedPin,pinPosition:C(e.PinP),pinRotation:e.PnRt,pinOverlay:e.PnOv,pinDepth:e.PnDp,meshQuality:e.meshQuality,meshExpansion:e.meshExpansion,meshRigidity:e.meshRigidity,imageResolution:e.imageResolution,meshBoundaryPath:{pathComponents:e.meshBoundaryPath.pathComponents.map((function(e){return{shapeOperation:e.shapeOperation.split(".")[1],paths:e.SbpL.map((function(e){return{closed:e.Clsp,points:e["Pts "].map((function(e){return{anchor:M(e.Anch),forward:M(e["Fwd "]),backward:M(e["Bwd "]),smooth:e.Smoo}}))}}))}}))}};var t}))}});case 1348620396:for(var r=[],i=e.Fltr,a=0;a<26&&i["PN".concat(f[a],"a")];a++)for(var o=0;o<26&&i["PN".concat(f[a]).concat(f[o])];o++)r.push({name:i["PN".concat(f[a]).concat(f[o])],value:i["PF".concat(f[a]).concat(f[o])]});return n(n({},t),{type:"oil paint plugin",filter:{name:e.Fltr.KnNm,gpu:e.Fltr.GpuY,lighting:e.Fltr.LIWy,parameters:r}});case 1215521360:return n(n({},t),{type:"hsb/hsl",filter:{inputMode:c.ClrS.decode(e.Fltr.Inpt),rowOrder:c.ClrS.decode(e.Fltr.Otpt)}});case 1122:return n(n({},t),{type:"oil paint",filter:{lightingOn:e.Fltr.lightingOn,stylization:e.Fltr.stylization,cleanliness:e.Fltr.cleanliness,brushScale:e.Fltr.brushScale,microBrush:e.Fltr.microBrush,lightDirection:e.Fltr.LghD,specularity:e.Fltr.specularity}});case 1282492025:return n(n({},t),{type:"liquify",filter:{liquifyMesh:e.Fltr.LqMe}});default:throw new Error("Unknown filterID: ".concat(e.filterID))}}function E(e){return(0,c.unitsValue)(e.radius,"radius")}function L(e){if(e.warp)return e.warp;if(!e.width||!e.height)throw new Error("You must provide width and height of the linked image in placedLayer");var t=e.width,r=e.height,n=t/3,i=2*t/3,a=r/3,o=2*r/3;return{style:"custom",value:0,perspective:0,perspectiveOther:0,rotate:"horizontal",bounds:{top:{value:0,units:"Pixels"},left:{value:0,units:"Pixels"},bottom:{value:r,units:"Pixels"},right:{value:t,units:"Pixels"}},uOrder:4,vOrder:4,customEnvelopeWarp:{meshPoints:[{x:0,y:0},{x:n,y:0},{x:i,y:0},{x:t,y:0},{x:0,y:a},{x:n,y:a},{x:i,y:a},{x:t,y:a},{x:0,y:o},{x:n,y:o},{x:i,y:o},{x:t,y:o},{x:0,y:r},{x:n,y:r},{x:i,y:r},{x:t,y:r}]}}}function O(e){return{top:(0,s.readInt32)(e),left:(0,s.readInt32)(e),bottom:(0,s.readInt32)(e),right:(0,s.readInt32)(e)}}function B(e,t){(0,l.writeInt32)(e,t.top),(0,l.writeInt32)(e,t.left),(0,l.writeInt32)(e,t.bottom),(0,l.writeInt32)(e,t.right)}function T(e){return function(t){return!!t.adjustment&&t.adjustment.type===e}}function R(e){return{shadowInput:(0,s.readInt16)(e),highlightInput:(0,s.readInt16)(e),shadowOutput:(0,s.readInt16)(e),highlightOutput:(0,s.readInt16)(e),midtoneInput:(0,s.readInt16)(e)/100}}function V(e,t){(0,l.writeInt16)(e,t.shadowInput),(0,l.writeInt16)(e,t.highlightInput),(0,l.writeInt16)(e,t.shadowOutput),(0,l.writeInt16)(e,t.highlightOutput),(0,l.writeInt16)(e,Math.round(100*t.midtoneInput))}function _(e){for(var t=(0,s.readUint16)(e),r=[],n=0;n<t;n++){var i=(0,s.readInt16)(e),a=(0,s.readInt16)(e);r.push({input:a,output:i})}return r}function z(e,t){(0,l.writeUint16)(e,t.length);for(var r=0,n=t;r<n.length;r++){var i=n[r];(0,l.writeUint16)(e,i.output),(0,l.writeUint16)(e,i.input)}}function G(e){return{a:(0,s.readInt16)(e),b:(0,s.readInt16)(e),c:(0,s.readInt16)(e),d:(0,s.readInt16)(e),hue:(0,s.readInt16)(e),saturation:(0,s.readInt16)(e),lightness:(0,s.readInt16)(e)}}function N(e,t){var r=t||{};(0,l.writeInt16)(e,r.a||0),(0,l.writeInt16)(e,r.b||0),(0,l.writeInt16)(e,r.c||0),(0,l.writeInt16)(e,r.d||0),(0,l.writeInt16)(e,r.hue||0),(0,l.writeInt16)(e,r.saturation||0),(0,l.writeInt16)(e,r.lightness||0)}function j(e){return{cyanRed:(0,s.readInt16)(e),magentaGreen:(0,s.readInt16)(e),yellowBlue:(0,s.readInt16)(e)}}function W(e,t){(0,l.writeInt16)(e,t.cyanRed||0),(0,l.writeInt16)(e,t.magentaGreen||0),(0,l.writeInt16)(e,t.yellowBlue||0)}function H(e){var t=(0,s.readInt16)(e),r=(0,s.readInt16)(e),n=(0,s.readInt16)(e);return(0,s.skipBytes)(e,2),{red:t,green:r,blue:n,constant:(0,s.readInt16)(e)}}function X(e,t){var r=t||{};(0,l.writeInt16)(e,r.red),(0,l.writeInt16)(e,r.green),(0,l.writeInt16)(e,r.blue),(0,l.writeZeros)(e,2),(0,l.writeInt16)(e,r.constant)}p("PlLd",g("placedLayer"),(function(e,t,r){if("plcL"!==(0,s.readSignature)(e))throw new Error("Invalid PlLd signature");if(3!==(0,s.readInt32)(e))throw new Error("Invalid PlLd version");var n=(0,s.readPascalString)(e,1),i=(0,s.readInt32)(e),a=(0,s.readInt32)(e);(0,s.readInt32)(e);var o=(0,s.readInt32)(e);if(!S[o])throw new Error("Invalid PlLd type");for(var l=[],d=0;d<8;d++)l.push((0,s.readFloat64)(e));var u=(0,s.readInt32)(e);if(0!==u)throw new Error("Invalid Warp version ".concat(u));var f=(0,c.readVersionAndDescriptor)(e);t.placedLayer=t.placedLayer||{id:n,type:S[o],pageNumber:i,totalPages:a,transform:l,warp:I(f)},(0,s.skipBytes)(e,r())}),(function(e,t){var r=t.placedLayer;if((0,l.writeSignature)(e,"plcL"),(0,l.writeInt32)(e,3),!r.id||"string"!=typeof r.id||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(r.id))throw new Error("Placed layer ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");if((0,l.writePascalString)(e,r.id,1),(0,l.writeInt32)(e,1),(0,l.writeInt32)(e,1),(0,l.writeInt32)(e,16),-1===S.indexOf(r.type))throw new Error("Invalid placedLayer type");(0,l.writeInt32)(e,S.indexOf(r.type));for(var n=0;n<8;n++)(0,l.writeFloat64)(e,r.transform[n]);(0,l.writeInt32)(e,0);var i=L(r),a=k(i)?"quiltWarp":"warp";(0,c.writeVersionAndDescriptor)(e,"",a,F(i),a)})),p("SoLd",g("placedLayer"),(function(e,t,r){if("soLD"!==(0,s.readSignature)(e))throw new Error("Invalid SoLd type");var n=(0,s.readInt32)(e);if(4!==n&&5!==n)throw new Error("Invalid SoLd version");var i=(0,c.readVersionAndDescriptor)(e);t.placedLayer={id:i.Idnt,placed:i.placed,type:S[i.Type],pageNumber:i.PgNm,totalPages:i.totalPages,frameStep:(0,c.frac)(i.frameStep),duration:(0,c.frac)(i.duration),frameCount:i.frameCount,transform:i.Trnf,width:i["Sz  "].Wdth,height:i["Sz  "].Hght,resolution:(0,c.parseUnits)(i.Rslt),warp:I(i.quiltWarp||i.warp)},i.nonAffineTransform&&i.nonAffineTransform.some((function(e,t){return e!==i.Trnf[t]}))&&(t.placedLayer.nonAffineTransform=i.nonAffineTransform),i.Crop&&(t.placedLayer.crop=i.Crop),i.comp&&(t.placedLayer.comp=i.comp),i.compInfo&&(t.placedLayer.compInfo={compID:i.compInfo.compID,originalCompID:i.compInfo.originalCompID}),i.filterFX&&(t.placedLayer.filter=function(e){return{enabled:e.enab,validAtPosition:e.validAtPosition,maskEnabled:e.filterMaskEnable,maskLinked:e.filterMaskLinked,maskExtendWithWhite:e.filterMaskExtendWithWhite,list:e.filterFXList.map(x)}}(i.filterFX)),(0,s.skipBytes)(e,r())}),(function(e,t){var r,i;(0,l.writeSignature)(e,"soLD"),(0,l.writeInt32)(e,4);var a=t.placedLayer;if(!a.id||"string"!=typeof a.id||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(a.id))throw new Error("Placed layer ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");var o=n(n({Idnt:a.id,placed:null!==(r=a.placed)&&void 0!==r?r:a.id,PgNm:a.pageNumber||1,totalPages:a.totalPages||1},a.crop?{Crop:a.crop}:{}),{frameStep:a.frameStep||{numerator:0,denominator:600},duration:a.duration||{numerator:0,denominator:600},frameCount:a.frameCount||0,Annt:16,Type:S.indexOf(a.type),Trnf:a.transform,nonAffineTransform:null!==(i=a.nonAffineTransform)&&void 0!==i?i:a.transform,warp:F(L(a)),"Sz  ":{_name:"",_classID:"Pnt ",Wdth:a.width||0,Hght:a.height||0},Rslt:a.resolution?(0,c.unitsValue)(a.resolution,"resolution"):{units:"Density",value:72}});if(a.filter&&(o.filterFX={_name:"",_classID:"filterFXStyle",enab:a.filter.enabled,validAtPosition:a.filter.validAtPosition,filterMaskEnable:a.filter.maskEnabled,filterMaskLinked:a.filter.maskLinked,filterMaskExtendWithWhite:a.filter.maskExtendWithWhite,filterFXList:a.filter.list.map((function(e){return function(e){var t={_name:"",_classID:"filterFX","Nm  ":e.name,blendOptions:{_name:"",_classID:"blendOptions",Opct:(0,c.unitsPercentF)(e.opacity),"Md  ":c.BlnM.encode(e.blendMode)},enab:e.enabled,hasoptions:e.hasOptions,FrgC:(0,c.serializeColor)(e.foregroundColor),BckC:(0,c.serializeColor)(e.backgroundColor)};switch(e.type){case"average":return n(n({},t),{filterID:1098281575});case"blur":return n(n({},t),{filterID:1114403360});case"blur more":return n(n({},t),{filterID:1114403405});case"box blur":return n(n({},t),{Fltr:{_name:"Box Blur",_classID:"boxblur","Rds ":E(e.filter)},filterID:697});case"gaussian blur":return n(n({},t),{Fltr:{_name:"Gaussian Blur",_classID:"GsnB","Rds ":E(e.filter)},filterID:1198747202});case"motion blur":return n(n({},t),{Fltr:{_name:"Motion Blur",_classID:"MtnB",Angl:e.filter.angle,Dstn:(0,c.unitsValue)(e.filter.distance,"distance")},filterID:1299476034});case"radial blur":return n(n({},t),{Fltr:{_name:"Radial Blur",_classID:"RdlB",Amnt:e.filter.amount,BlrM:c.BlrM.encode(e.filter.method),BlrQ:c.BlrQ.encode(e.filter.quality)},filterID:1382313026});case"shape blur":return n(n({},t),{Fltr:{_name:"Shape Blur",_classID:"shapeBlur","Rds ":E(e.filter),customShape:{_name:"",_classID:"customShape","Nm  ":e.filter.customShape.name,Idnt:e.filter.customShape.id}},filterID:702});case"smart blur":return n(n({},t),{Fltr:{_name:"Smart Blur",_classID:"SmrB","Rds ":e.filter.radius,Thsh:e.filter.threshold,SmBQ:c.SmBQ.encode(e.filter.quality),SmBM:c.SmBM.encode(e.filter.mode)},filterID:1399681602});case"surface blur":return n(n({},t),{Fltr:{_name:"Surface Blur",_classID:"surfaceBlur","Rds ":E(e.filter),Thsh:e.filter.threshold},filterID:701});case"displace":return n(n({},t),{Fltr:{_name:"Displace",_classID:"Dspl",HrzS:e.filter.horizontalScale,VrtS:e.filter.verticalScale,DspM:c.DspM.encode(e.filter.displacementMap),UndA:c.UndA.encode(e.filter.undefinedAreas),DspF:{sig:e.filter.displacementFile.signature,path:e.filter.displacementFile.path}},filterID:1148416108});case"pinch":return n(n({},t),{Fltr:{_name:"Pinch",_classID:"Pnch",Amnt:e.filter.amount},filterID:1349411688});case"polar coordinates":return n(n({},t),{Fltr:{_name:"Polar Coordinates",_classID:"Plr ",Cnvr:c.Cnvr.encode(e.filter.conversion)},filterID:1349284384});case"ripple":return n(n({},t),{Fltr:{_name:"Ripple",_classID:"Rple",Amnt:e.filter.amount,RplS:c.RplS.encode(e.filter.size)},filterID:1383099493});case"shear":return n(n({},t),{Fltr:{_name:"Shear",_classID:"Shr ",ShrP:e.filter.shearPoints.map((function(e){return{_name:"",_classID:"Pnt ",Hrzn:e.x,Vrtc:e.y}})),UndA:c.UndA.encode(e.filter.undefinedAreas),ShrS:e.filter.shearStart,ShrE:e.filter.shearEnd},filterID:1399353888});case"spherize":return n(n({},t),{Fltr:{_name:"Spherize",_classID:"Sphr",Amnt:e.filter.amount,SphM:c.SphM.encode(e.filter.mode)},filterID:1399875698});case"twirl":return n(n({},t),{Fltr:{_name:"Twirl",_classID:"Twrl",Angl:e.filter.angle},filterID:1417114220});case"wave":return n(n({},t),{Fltr:{_name:"Wave",_classID:"Wave",Wvtp:c.Wvtp.encode(e.filter.type),NmbG:e.filter.numberOfGenerators,WLMn:e.filter.wavelength.min,WLMx:e.filter.wavelength.max,AmMn:e.filter.amplitude.min,AmMx:e.filter.amplitude.max,SclH:e.filter.scale.x,SclV:e.filter.scale.y,UndA:c.UndA.encode(e.filter.undefinedAreas),RndS:e.filter.randomSeed},filterID:1466005093});case"zigzag":return n(n({},t),{Fltr:{_name:"ZigZag",_classID:"ZgZg",Amnt:e.filter.amount,NmbR:e.filter.ridges,ZZTy:c.ZZTy.encode(e.filter.style)},filterID:1516722791});case"add noise":return n(n({},t),{Fltr:{_name:"Add Noise",_classID:"AdNs",Dstr:c.Dstr.encode(e.filter.distribution),Nose:(0,c.unitsPercentF)(e.filter.amount),Mnch:e.filter.monochromatic,FlRs:e.filter.randomSeed},filterID:1097092723});case"despeckle":return n(n({},t),{filterID:1148416099});case"dust and scratches":return n(n({},t),{Fltr:{_name:"Dust & Scratches",_classID:"DstS","Rds ":e.filter.radius,Thsh:e.filter.threshold},filterID:1148417107});case"median":return n(n({},t),{Fltr:{_name:"Median",_classID:"Mdn ","Rds ":E(e.filter)},filterID:1298427424});case"reduce noise":return n(n({},t),{Fltr:{_name:"Reduce Noise",_classID:"denoise",ClNs:(0,c.unitsPercentF)(e.filter.reduceColorNoise),Shrp:(0,c.unitsPercentF)(e.filter.sharpenDetails),removeJPEGArtifact:e.filter.removeJpegArtifact,channelDenoise:e.filter.channelDenoise.map((function(e){return n({_name:"",_classID:"channelDenoiseParams",Chnl:e.channels.map((function(e){return c.Chnl.encode(e)})),Amnt:e.amount},e.preserveDetails?{EdgF:e.preserveDetails}:{})})),preset:e.filter.preset},filterID:633});case"color halftone":return n(n({},t),{Fltr:{_name:"Color Halftone",_classID:"ClrH","Rds ":e.filter.radius,Ang1:e.filter.angle1,Ang2:e.filter.angle2,Ang3:e.filter.angle3,Ang4:e.filter.angle4},filterID:1131180616});case"crystallize":return n(n({},t),{Fltr:{_name:"Crystallize",_classID:"Crst",ClSz:e.filter.cellSize,FlRs:e.filter.randomSeed},filterID:1131574132});case"facet":return n(n({},t),{filterID:1180922912});case"fragment":return n(n({},t),{filterID:1181902701});case"mezzotint":return n(n({},t),{Fltr:{_name:"Mezzotint",_classID:"Mztn",MztT:c.MztT.encode(e.filter.type),FlRs:e.filter.randomSeed},filterID:1299870830});case"mosaic":return n(n({},t),{Fltr:{_name:"Mosaic",_classID:"Msc ",ClSz:(0,c.unitsValue)(e.filter.cellSize,"cellSize")},filterID:1299407648});case"pointillize":return n(n({},t),{Fltr:{_name:"Pointillize",_classID:"Pntl",ClSz:e.filter.cellSize,FlRs:e.filter.randomSeed},filterID:1349416044});case"clouds":return n(n({},t),{Fltr:{_name:"Clouds",_classID:"Clds",FlRs:e.filter.randomSeed},filterID:1131177075});case"difference clouds":return n(n({},t),{Fltr:{_name:"Difference Clouds",_classID:"DfrC",FlRs:e.filter.randomSeed},filterID:1147564611});case"fibers":return n(n({},t),{Fltr:{_name:"Fibers",_classID:"Fbrs",Vrnc:e.filter.variance,Strg:e.filter.strength,RndS:e.filter.randomSeed},filterID:1180856947});case"lens flare":return n(n({},t),{Fltr:{_name:"Lens Flare",_classID:"LnsF",Brgh:e.filter.brightness,FlrC:{_name:"",_classID:"Pnt ",Hrzn:e.filter.position.x,Vrtc:e.filter.position.y},"Lns ":c.Lns.encode(e.filter.lensType)},filterID:1282306886});case"sharpen":return n(n({},t),{filterID:1399353968});case"sharpen edges":return n(n({},t),{filterID:1399353925});case"sharpen more":return n(n({},t),{filterID:1399353933});case"smart sharpen":return n(n({},t),{Fltr:{_name:"Smart Sharpen",_classID:"smartSharpen",Amnt:(0,c.unitsPercentF)(e.filter.amount),"Rds ":E(e.filter),Thsh:e.filter.threshold,Angl:e.filter.angle,moreAccurate:e.filter.moreAccurate,blur:c.blurType.encode(e.filter.blur),preset:e.filter.preset,sdwM:{_name:"Parameters",_classID:"adaptCorrectTones",Amnt:(0,c.unitsPercentF)(e.filter.shadow.fadeAmount),Wdth:(0,c.unitsPercentF)(e.filter.shadow.tonalWidth),"Rds ":e.filter.shadow.radius},hglM:{_name:"Parameters",_classID:"adaptCorrectTones",Amnt:(0,c.unitsPercentF)(e.filter.highlight.fadeAmount),Wdth:(0,c.unitsPercentF)(e.filter.highlight.tonalWidth),"Rds ":e.filter.highlight.radius}},filterID:698});case"unsharp mask":return n(n({},t),{Fltr:{_name:"Unsharp Mask",_classID:"UnsM",Amnt:(0,c.unitsPercentF)(e.filter.amount),"Rds ":E(e.filter),Thsh:e.filter.threshold},filterID:1433301837});case"diffuse":return n(n({},t),{Fltr:{_name:"Diffuse",_classID:"Dfs ","Md  ":c.DfsM.encode(e.filter.mode),FlRs:e.filter.randomSeed},filterID:1147564832});case"emboss":return n(n({},t),{Fltr:{_name:"Emboss",_classID:"Embs",Angl:e.filter.angle,Hght:e.filter.height,Amnt:e.filter.amount},filterID:1164796531});case"extrude":return n(n({},t),{Fltr:{_name:"Extrude",_classID:"Extr",ExtS:e.filter.size,ExtD:e.filter.depth,ExtF:e.filter.solidFrontFaces,ExtM:e.filter.maskIncompleteBlocks,ExtT:c.ExtT.encode(e.filter.type),ExtR:c.ExtR.encode(e.filter.depthMode),FlRs:e.filter.randomSeed},filterID:1165522034});case"find edges":return n(n({},t),{filterID:1181639749});case"solarize":return n(n({},t),{filterID:1399616122});case"tiles":return n(n({},t),{Fltr:{_name:"Tiles",_classID:"Tls ",TlNm:e.filter.numberOfTiles,TlOf:e.filter.maximumOffset,FlCl:c.FlCl.encode(e.filter.fillEmptyAreaWith),FlRs:e.filter.randomSeed},filterID:1416393504});case"trace contour":return n(n({},t),{Fltr:{_name:"Trace Contour",_classID:"TrcC","Lvl ":e.filter.level,"Edg ":c.CntE.encode(e.filter.edge)},filterID:1416782659});case"wind":return n(n({},t),{Fltr:{_name:"Wind",_classID:"Wnd ",WndM:c.WndM.encode(e.filter.method),Drct:c.Drct.encode(e.filter.direction)},filterID:1466852384});case"de-interlace":return n(n({},t),{Fltr:{_name:"De-Interlace",_classID:"Dntr",IntE:c.IntE.encode(e.filter.eliminate),IntC:c.IntC.encode(e.filter.newFieldsBy)},filterID:1148089458});case"ntsc colors":return n(n({},t),{filterID:1314149187});case"custom":return n(n({},t),{Fltr:{_name:"Custom",_classID:"Cstm","Scl ":e.filter.scale,Ofst:e.filter.offset,Mtrx:e.filter.matrix},filterID:1131639917});case"high pass":return n(n({},t),{Fltr:{_name:"High Pass",_classID:"HghP","Rds ":E(e.filter)},filterID:1214736464});case"maximum":return n(n({},t),{Fltr:{_name:"Maximum",_classID:"Mxm ","Rds ":E(e.filter)},filterID:1299737888});case"minimum":return n(n({},t),{Fltr:{_name:"Minimum",_classID:"Mnm ","Rds ":E(e.filter)},filterID:1299082528});case"offset":return n(n({},t),{Fltr:{_name:"Offset",_classID:"Ofst",Hrzn:e.filter.horizontal,Vrtc:e.filter.vertical,"Fl  ":c.FlMd.encode(e.filter.undefinedAreas)},filterID:1332114292});case"puppet":return n(n({},t),{Fltr:{_name:"Rigid Transform",_classID:"rigidTransform",null:["Ordn.Trgt"],rigidType:e.filter.rigidType,puppetShapeList:e.filter.puppetShapeList.map((function(e){return{_name:"",_classID:"puppetShape",rigidType:e.rigidType,VrsM:1,VrsN:0,originalVertexArray:D(new Float32Array(P(e.originalVertexArray))),deformedVertexArray:D(new Float32Array(P(e.deformedVertexArray))),indexArray:D(new Uint32Array(e.indexArray)),pinOffsets:P(e.pinOffsets),posFinalPins:P(e.posFinalPins),pinVertexIndices:e.pinVertexIndices,PinP:P(e.pinPosition),PnRt:e.pinRotation,PnOv:e.pinOverlay,PnDp:e.pinDepth,meshQuality:e.meshQuality,meshExpansion:e.meshExpansion,meshRigidity:e.meshRigidity,imageResolution:e.imageResolution,meshBoundaryPath:{_name:"",_classID:"pathClass",pathComponents:e.meshBoundaryPath.pathComponents.map((function(e){return{_name:"",_classID:"PaCm",shapeOperation:"shapeOperation.".concat(e.shapeOperation),SbpL:e.paths.map((function(e){return{_name:"",_classID:"Sbpl",Clsp:e.closed,"Pts ":e.points.map((function(e){return{_name:"",_classID:"Pthp",Anch:A(e.anchor),"Fwd ":A(e.forward),"Bwd ":A(e.backward),Smoo:e.smooth}}))}}))}}))},selectedPin:e.selectedPin}})),PuX0:e.filter.bounds[0].x,PuX1:e.filter.bounds[1].x,PuX2:e.filter.bounds[2].x,PuX3:e.filter.bounds[3].x,PuY0:e.filter.bounds[0].y,PuY1:e.filter.bounds[1].y,PuY2:e.filter.bounds[2].y,PuY3:e.filter.bounds[3].y},filterID:991});case"oil paint plugin":for(var r={},i=0;i<e.filter.parameters.length;i++){var a=e.filter.parameters[i],o=a.name,s=a.value,l="".concat(f[Math.floor(i/26)]).concat(f[i%26]);r["PN".concat(l)]=o,r["PT".concat(l)]=0,r["PF".concat(l)]=s}return n(n({},t),{Fltr:n({_name:"Oil Paint Plugin",_classID:"PbPl",KnNm:e.filter.name,GpuY:e.filter.gpu,LIWy:e.filter.lighting,FPth:"1"},r),filterID:1348620396});case"oil paint":return n(n({},t),{Fltr:{_name:"Oil Paint",_classID:"oilPaint",lightingOn:e.filter.lightingOn,stylization:e.filter.stylization,cleanliness:e.filter.cleanliness,brushScale:e.filter.brushScale,microBrush:e.filter.microBrush,LghD:e.filter.lightDirection,specularity:e.filter.specularity},filterID:1122});case"liquify":return n(n({},t),{Fltr:{_name:"Liquify",_classID:"LqFy",LqMe:e.filter.liquifyMesh},filterID:1282492025});default:throw new Error("Unknow filter type: ".concat(e.type))}}(e)}))}),a.warp&&k(a.warp)){var s=F(a.warp);o.quiltWarp=s,o.warp={warpStyle:"warpStyle.warpNone",warpValue:s.warpValue,warpPerspective:s.warpPerspective,warpPerspectiveOther:s.warpPerspectiveOther,warpRotate:s.warpRotate,bounds:s.bounds,uOrder:s.uOrder,vOrder:s.vOrder}}else delete o.quiltWarp;a.comp&&(o.comp=a.comp),a.compInfo&&(o.compInfo=a.compInfo),(0,c.writeVersionAndDescriptor)(e,"","null",o,o.quiltWarp?"quiltWarp":"warp")})),h("SoLE","SoLd"),p("fxrp",g("referencePoint"),(function(e,t){t.referencePoint={x:(0,s.readFloat64)(e),y:(0,s.readFloat64)(e)}}),(function(e,t){(0,l.writeFloat64)(e,t.referencePoint.x),(0,l.writeFloat64)(e,t.referencePoint.y)})),o.MOCK_HANDLERS?p("Patt",(function(e){return void 0!==e._Patt}),(function(e,t,r){t._Patt=(0,s.readBytes)(e,r())}),(function(e,t){return!1})):p("Patt",(function(e){return!e}),(function(e,t,r){r()&&(0,s.skipBytes)(e,r())}),(function(e,t){})),p("Anno",(function(e){return void 0!==e.annotations}),(function(e,t,r){var n=(0,s.readUint16)(e),i=(0,s.readUint16)(e);if(2!==n||1!==i)throw new Error("Invalid Anno version");for(var a=(0,s.readUint32)(e),o=[],l=0;l<a;l++){(0,s.readUint32)(e);var c=(0,s.readSignature)(e),d=!!(0,s.readUint8)(e);(0,s.readUint8)(e),(0,s.readUint16)(e);var u=O(e),f=O(e),p=(0,s.readColor)(e),h=(0,s.readPascalString)(e,2),g=(0,s.readPascalString)(e,2),m=(0,s.readPascalString)(e,2);(0,s.readUint32)(e),(0,s.readSignature)(e);var v=(0,s.readUint32)(e),y=void 0;if("txtA"===c)v>=2&&65279===(0,s.readUint16)(e)?y=(0,s.readUnicodeStringWithLength)(e,(v-2)/2):(e.offset-=2,y=(0,s.readAsciiString)(e,v)),y=y.replace(/\r/g,"\n");else{if("sndA"!==c)throw new Error("Unknown annotation type");y=(0,s.readBytes)(e,v)}o.push({type:"txtA"===c?"text":"sound",open:d,iconLocation:u,popupLocation:f,color:p,author:h,name:g,date:m,data:y})}t.annotations=o,(0,s.skipBytes)(e,r())}),(function(e,t){var r=t.annotations;(0,l.writeUint16)(e,2),(0,l.writeUint16)(e,1),(0,l.writeUint32)(e,r.length);for(var n=0,i=r;n<i.length;n++){var a=i[n],o="sound"===a.type;if(o&&!(a.data instanceof Uint8Array))throw new Error("Sound annotation data should be Uint8Array");if(!o&&"string"!=typeof a.data)throw new Error("Text annotation data should be string");var s=e.offset;(0,l.writeUint32)(e,0),(0,l.writeSignature)(e,o?"sndA":"txtA"),(0,l.writeUint8)(e,a.open?1:0),(0,l.writeUint8)(e,28),(0,l.writeUint16)(e,1),B(e,a.iconLocation),B(e,a.popupLocation),(0,l.writeColor)(e,a.color),(0,l.writePascalString)(e,a.author||"",2),(0,l.writePascalString)(e,a.name||"",2),(0,l.writePascalString)(e,a.date||"",2);var c=e.offset;(0,l.writeUint32)(e,0),(0,l.writeSignature)(e,o?"sndM":"txtC"),(0,l.writeUint32)(e,0);var d=e.offset;if(o)(0,l.writeBytes)(e,a.data);else{(0,l.writeUint16)(e,65279);for(var u=a.data.replace(/\n/g,"\r"),f=0;f<u.length;f++)(0,l.writeUint16)(e,u.charCodeAt(f))}e.view.setUint32(s,e.offset-s,!1),e.view.setUint32(c,e.offset-c,!1),e.view.setUint32(d-4,e.offset-d,!1)}})),p("lnk2",(function(e){return!!e.linkedFiles&&e.linkedFiles.length>0}),(function(e,t,r,n,i){var a=t;for(a.linkedFiles=a.linkedFiles||[];r()>8;){var o=m(e),l=e.offset,d=(0,s.readSignature)(e),u=(0,s.readInt32)(e),f=(0,s.readPascalString)(e,1),p=(0,s.readUnicodeString)(e),h=(0,s.readSignature)(e).trim(),g=(0,s.readSignature)(e).trim(),v=m(e),y=(0,s.readUint8)(e)?(0,c.readVersionAndDescriptor)(e):void 0,w=("liFE"===d&&(0,c.readVersionAndDescriptor)(e),{id:f,name:p});if(h&&(w.type=h),g&&(w.creator=g),y&&(w.descriptor={compInfo:{compID:y.compInfo.compID,originalCompID:y.compInfo.originalCompID}}),"liFE"===d&&u>3){var b=(0,s.readInt32)(e),S=(0,s.readUint8)(e),I=(0,s.readUint8)(e),k=(0,s.readUint8)(e),F=(0,s.readUint8)(e),D=(0,s.readFloat64)(e),C=Math.floor(D),P=1e3*(D-C);w.time=new Date(b,S,I,k,F,C,P).toISOString()}var U="liFE"===d?m(e):0;for("liFA"===d&&(0,s.skipBytes)(e,8),"liFD"===d&&(w.data=(0,s.readBytes)(e,v)),u>=5&&(w.childDocumentID=(0,s.readUnicodeString)(e)),u>=6&&(w.assetModTime=(0,s.readFloat64)(e)),u>=7&&(w.assetLockedState=(0,s.readUint8)(e)),"liFE"===d&&2===u&&(w.data=(0,s.readBytes)(e,U)),i.skipLinkedFilesData&&(w.data=void 0),a.linkedFiles.push(w);o%4;)o++;e.offset=l+o}(0,s.skipBytes)(e,r())}),(function(e,t){for(var r=0,n=t.linkedFiles;r<n.length;r++){var i=n[r],a=2;null!=i.assetLockedState?a=7:null!=i.assetModTime?a=6:null!=i.childDocumentID&&(a=5),(0,l.writeUint32)(e,0),(0,l.writeUint32)(e,0);var o=e.offset;if((0,l.writeSignature)(e,i.data?"liFD":"liFA"),(0,l.writeInt32)(e,a),!i.id||"string"!=typeof i.id||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(i.id))throw new Error("Linked file ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");if((0,l.writePascalString)(e,i.id,1),(0,l.writeUnicodeStringWithPadding)(e,i.name||""),(0,l.writeSignature)(e,i.type?"".concat(i.type,"    ").substring(0,4):"    "),(0,l.writeSignature)(e,i.creator?"".concat(i.creator,"    ").substring(0,4):"\0\0\0\0"),v(e,i.data?i.data.byteLength:0),i.descriptor&&i.descriptor.compInfo){var s={compInfo:{compID:i.descriptor.compInfo.compID,originalCompID:i.descriptor.compInfo.originalCompID}};(0,l.writeUint8)(e,1),(0,c.writeVersionAndDescriptor)(e,"","null",s)}else(0,l.writeUint8)(e,0);i.data?(0,l.writeBytes)(e,i.data):v(e,0),a>=5&&(0,l.writeUnicodeStringWithPadding)(e,i.childDocumentID||""),a>=6&&(0,l.writeFloat64)(e,i.assetModTime||0),a>=7&&(0,l.writeUint8)(e,i.assetLockedState||0);var d=e.offset-o;for(e.view.setUint32(o-4,d,!1);d%4;)d++,(0,l.writeUint8)(e,0)}})),h("lnkD","lnk2"),h("lnk3","lnk2"),h("lnkE","lnk2"),p("pths",g("pathList"),(function(e,t){(0,c.readVersionAndDescriptor)(e),t.pathList=[]}),(function(e,t){(0,c.writeVersionAndDescriptor)(e,"","pathsDataClass",{pathList:[]})})),p("lyvr",g("version"),(function(e,t){return t.version=(0,s.readUint32)(e)}),(function(e,t){return(0,l.writeUint32)(e,t.version)})),p("brit",T("brightness/contrast"),(function(e,t,r){t.adjustment||(t.adjustment={type:"brightness/contrast",brightness:(0,s.readInt16)(e),contrast:(0,s.readInt16)(e),meanValue:(0,s.readInt16)(e),labColorOnly:!!(0,s.readUint8)(e),useLegacy:!0}),(0,s.skipBytes)(e,r())}),(function(e,t){var r,n=t.adjustment;(0,l.writeInt16)(e,n.brightness||0),(0,l.writeInt16)(e,n.contrast||0),(0,l.writeInt16)(e,null!==(r=n.meanValue)&&void 0!==r?r:127),(0,l.writeUint8)(e,n.labColorOnly?1:0),(0,l.writeZeros)(e,1)})),p("levl",T("levels"),(function(e,t,r){if(2!==(0,s.readUint16)(e))throw new Error("Invalid levl version");t.adjustment=n(n({},t.adjustment),{type:"levels",rgb:R(e),red:R(e),green:R(e),blue:R(e)}),(0,s.skipBytes)(e,r())}),(function(e,t){var r=t.adjustment,n={shadowInput:0,highlightInput:255,shadowOutput:0,highlightOutput:255,midtoneInput:1};(0,l.writeUint16)(e,2),V(e,r.rgb||n),V(e,r.red||n),V(e,r.blue||n),V(e,r.green||n);for(var i=0;i<59;i++)V(e,n)})),p("curv",T("curves"),(function(e,t,r){if((0,s.readUint8)(e),1!==(0,s.readUint16)(e))throw new Error("Invalid curv version");(0,s.readUint16)(e);var i=(0,s.readUint16)(e),a={type:"curves"};1&i&&(a.rgb=_(e)),2&i&&(a.red=_(e)),4&i&&(a.green=_(e)),8&i&&(a.blue=_(e)),t.adjustment=n(n({},t.adjustment),a),(0,s.skipBytes)(e,r())}),(function(e,t){var r=t.adjustment,n=r.rgb,i=r.red,a=r.green,o=r.blue,s=0,c=0;n&&n.length&&(s|=1,c++),i&&i.length&&(s|=2,c++),a&&a.length&&(s|=4,c++),o&&o.length&&(s|=8,c++),(0,l.writeUint8)(e,0),(0,l.writeUint16)(e,1),(0,l.writeUint16)(e,0),(0,l.writeUint16)(e,s),n&&n.length&&z(e,n),i&&i.length&&z(e,i),a&&a.length&&z(e,a),o&&o.length&&z(e,o),(0,l.writeSignature)(e,"Crv "),(0,l.writeUint16)(e,4),(0,l.writeUint16)(e,0),(0,l.writeUint16)(e,c),n&&n.length&&((0,l.writeUint16)(e,0),z(e,n)),i&&i.length&&((0,l.writeUint16)(e,1),z(e,i)),a&&a.length&&((0,l.writeUint16)(e,2),z(e,a)),o&&o.length&&((0,l.writeUint16)(e,3),z(e,o)),(0,l.writeZeros)(e,2)})),p("expA",T("exposure"),(function(e,t,r){if(1!==(0,s.readUint16)(e))throw new Error("Invalid expA version");t.adjustment=n(n({},t.adjustment),{type:"exposure",exposure:(0,s.readFloat32)(e),offset:(0,s.readFloat32)(e),gamma:(0,s.readFloat32)(e)}),(0,s.skipBytes)(e,r())}),(function(e,t){var r=t.adjustment;(0,l.writeUint16)(e,1),(0,l.writeFloat32)(e,r.exposure),(0,l.writeFloat32)(e,r.offset),(0,l.writeFloat32)(e,r.gamma),(0,l.writeZeros)(e,2)})),p("vibA",T("vibrance"),(function(e,t,r){var n=(0,c.readVersionAndDescriptor)(e);t.adjustment={type:"vibrance"},void 0!==n.vibrance&&(t.adjustment.vibrance=n.vibrance),void 0!==n.Strt&&(t.adjustment.saturation=n.Strt),(0,s.skipBytes)(e,r())}),(function(e,t){var r=t.adjustment,n={};void 0!==r.vibrance&&(n.vibrance=r.vibrance),void 0!==r.saturation&&(n.Strt=r.saturation),(0,c.writeVersionAndDescriptor)(e,"","null",n)})),p("hue2",T("hue/saturation"),(function(e,t,r){if(2!==(0,s.readUint16)(e))throw new Error("Invalid hue2 version");t.adjustment=n(n({},t.adjustment),{type:"hue/saturation",master:G(e),reds:G(e),yellows:G(e),greens:G(e),cyans:G(e),blues:G(e),magentas:G(e)}),(0,s.skipBytes)(e,r())}),(function(e,t){var r=t.adjustment;(0,l.writeUint16)(e,2),N(e,r.master),N(e,r.reds),N(e,r.yellows),N(e,r.greens),N(e,r.cyans),N(e,r.blues),N(e,r.magentas)})),p("blnc",T("color balance"),(function(e,t,r){t.adjustment={type:"color balance",shadows:j(e),midtones:j(e),highlights:j(e),preserveLuminosity:!!(0,s.readUint8)(e)},(0,s.skipBytes)(e,r())}),(function(e,t){var r=t.adjustment;W(e,r.shadows||{}),W(e,r.midtones||{}),W(e,r.highlights||{}),(0,l.writeUint8)(e,r.preserveLuminosity?1:0),(0,l.writeZeros)(e,1)})),p("blwh",T("black & white"),(function(e,t,r){var n=(0,c.readVersionAndDescriptor)(e);t.adjustment={type:"black & white",reds:n["Rd  "],yellows:n.Yllw,greens:n["Grn "],cyans:n["Cyn "],blues:n["Bl  "],magentas:n.Mgnt,useTint:!!n.useTint,presetKind:n.bwPresetKind,presetFileName:n.blackAndWhitePresetFileName},void 0!==n.tintColor&&(t.adjustment.tintColor=(0,c.parseColor)(n.tintColor)),(0,s.skipBytes)(e,r())}),(function(e,t){var r=t.adjustment,n={"Rd  ":r.reds||0,Yllw:r.yellows||0,"Grn ":r.greens||0,"Cyn ":r.cyans||0,"Bl  ":r.blues||0,Mgnt:r.magentas||0,useTint:!!r.useTint,tintColor:(0,c.serializeColor)(r.tintColor),bwPresetKind:r.presetKind||0,blackAndWhitePresetFileName:r.presetFileName||""};(0,c.writeVersionAndDescriptor)(e,"","null",n)})),p("phfl",T("photo filter"),(function(e,t,r){var n,i=(0,s.readUint16)(e);if(2!==i&&3!==i)throw new Error("Invalid phfl version");n=2===i?(0,s.readColor)(e):{l:(0,s.readInt32)(e)/100,a:(0,s.readInt32)(e)/100,b:(0,s.readInt32)(e)/100},t.adjustment={type:"photo filter",color:n,density:(0,s.readUint32)(e)/100,preserveLuminosity:!!(0,s.readUint8)(e)},(0,s.skipBytes)(e,r())}),(function(e,t){var r=t.adjustment;(0,l.writeUint16)(e,2),(0,l.writeColor)(e,r.color||{l:0,a:0,b:0}),(0,l.writeUint32)(e,100*(r.density||0)),(0,l.writeUint8)(e,r.preserveLuminosity?1:0),(0,l.writeZeros)(e,3)})),p("mixr",T("channel mixer"),(function(e,t,r){if(1!==(0,s.readUint16)(e))throw new Error("Invalid mixr version");var i=t.adjustment=n(n({},t.adjustment),{type:"channel mixer",monochrome:!!(0,s.readUint16)(e)});i.monochrome||(i.red=H(e),i.green=H(e),i.blue=H(e)),i.gray=H(e),(0,s.skipBytes)(e,r())}),(function(e,t){var r=t.adjustment;(0,l.writeUint16)(e,1),(0,l.writeUint16)(e,r.monochrome?1:0),r.monochrome?(X(e,r.gray),(0,l.writeZeros)(e,30)):(X(e,r.red),X(e,r.green),X(e,r.blue),X(e,r.gray))}));var Y=(0,o.createEnum)("colorLookupType","3DLUT",{"3dlut":"3DLUT",abstractProfile:"abstractProfile",deviceLinkProfile:"deviceLinkProfile"}),K=(0,o.createEnum)("LUTFormatType","look",{look:"LUTFormatLOOK",cube:"LUTFormatCUBE","3dl":"LUTFormat3DL"}),Z=(0,o.createEnum)("colorLookupOrder","rgb",{rgb:"rgbOrder",bgr:"bgrOrder"});p("clrL",T("color lookup"),(function(e,t,r){if(1!==(0,s.readUint16)(e))throw new Error("Invalid clrL version");var n=(0,c.readVersionAndDescriptor)(e);t.adjustment={type:"color lookup"};var i=t.adjustment;void 0!==n.lookupType&&(i.lookupType=Y.decode(n.lookupType)),void 0!==n["Nm  "]&&(i.name=n["Nm  "]),void 0!==n.Dthr&&(i.dither=n.Dthr),void 0!==n.profile&&(i.profile=n.profile),void 0!==n.LUTFormat&&(i.lutFormat=K.decode(n.LUTFormat)),void 0!==n.dataOrder&&(i.dataOrder=Z.decode(n.dataOrder)),void 0!==n.tableOrder&&(i.tableOrder=Z.decode(n.tableOrder)),void 0!==n.LUT3DFileData&&(i.lut3DFileData=n.LUT3DFileData),void 0!==n.LUT3DFileName&&(i.lut3DFileName=n.LUT3DFileName),(0,s.skipBytes)(e,r())}),(function(e,t){var r=t.adjustment,n={};void 0!==r.lookupType&&(n.lookupType=Y.encode(r.lookupType)),void 0!==r.name&&(n["Nm  "]=r.name),void 0!==r.dither&&(n.Dthr=r.dither),void 0!==r.profile&&(n.profile=r.profile),void 0!==r.lutFormat&&(n.LUTFormat=K.encode(r.lutFormat)),void 0!==r.dataOrder&&(n.dataOrder=Z.encode(r.dataOrder)),void 0!==r.tableOrder&&(n.tableOrder=Z.encode(r.tableOrder)),void 0!==r.lut3DFileData&&(n.LUT3DFileData=r.lut3DFileData),void 0!==r.lut3DFileName&&(n.LUT3DFileName=r.lut3DFileName),(0,l.writeUint16)(e,1),(0,c.writeVersionAndDescriptor)(e,"","null",n)})),p("nvrt",T("invert"),(function(e,t,r){t.adjustment={type:"invert"},(0,s.skipBytes)(e,r())}),(function(){})),p("post",T("posterize"),(function(e,t,r){t.adjustment={type:"posterize",levels:(0,s.readUint16)(e)},(0,s.skipBytes)(e,r())}),(function(e,t){var r,n=t.adjustment;(0,l.writeUint16)(e,null!==(r=n.levels)&&void 0!==r?r:4),(0,l.writeZeros)(e,2)})),p("thrs",T("threshold"),(function(e,t,r){t.adjustment={type:"threshold",level:(0,s.readUint16)(e)},(0,s.skipBytes)(e,r())}),(function(e,t){var r,n=t.adjustment;(0,l.writeUint16)(e,null!==(r=n.level)&&void 0!==r?r:128),(0,l.writeZeros)(e,2)}));var q=["","","","rgb","hsb","","lab"];function J(e){return{c:(0,s.readInt16)(e),m:(0,s.readInt16)(e),y:(0,s.readInt16)(e),k:(0,s.readInt16)(e)}}function Q(e,t){var r=t||{};(0,l.writeInt16)(e,r.c),(0,l.writeInt16)(e,r.m),(0,l.writeInt16)(e,r.y),(0,l.writeInt16)(e,r.k)}function $(e){return Object.keys(e).map((function(t){return e[t]})).some((function(e){return Array.isArray(e)&&e.length>1}))}p("grdm",T("gradient map"),(function(e,t,r){if(1!==(0,s.readUint16)(e))throw new Error("Invalid grdm version");var n={type:"gradient map",gradientType:"solid"};n.reverse=!!(0,s.readUint8)(e),n.dither=!!(0,s.readUint8)(e),n.name=(0,s.readUnicodeString)(e),n.colorStops=[],n.opacityStops=[];for(var i=(0,s.readUint16)(e),a=0;a<i;a++)n.colorStops.push({location:(0,s.readUint32)(e),midpoint:(0,s.readUint32)(e)/100,color:(0,s.readColor)(e)}),(0,s.skipBytes)(e,2);var o=(0,s.readUint16)(e);for(a=0;a<o;a++)n.opacityStops.push({location:(0,s.readUint32)(e),midpoint:(0,s.readUint32)(e)/100,opacity:(0,s.readUint16)(e)/255});if(2!==(0,s.readUint16)(e))throw new Error("Invalid grdm expansion count");var l=(0,s.readUint16)(e);if(n.smoothness=l/4096,32!==(0,s.readUint16)(e))throw new Error("Invalid grdm length");n.gradientType=(0,s.readUint16)(e)?"noise":"solid",n.randomSeed=(0,s.readUint32)(e),n.addTransparency=!!(0,s.readUint16)(e),n.restrictColors=!!(0,s.readUint16)(e),n.roughness=(0,s.readUint32)(e)/4096,n.colorModel=q[(0,s.readUint16)(e)]||"rgb",n.min=[(0,s.readUint16)(e)/32768,(0,s.readUint16)(e)/32768,(0,s.readUint16)(e)/32768,(0,s.readUint16)(e)/32768],n.max=[(0,s.readUint16)(e)/32768,(0,s.readUint16)(e)/32768,(0,s.readUint16)(e)/32768,(0,s.readUint16)(e)/32768],(0,s.skipBytes)(e,r());for(var c=0,d=n.colorStops;c<d.length;c++)d[c].location/=l;for(var u=0,f=n.opacityStops;u<f.length;u++)f[u].location/=l;t.adjustment=n}),(function(e,t){var r,n,i,a=t.adjustment;(0,l.writeUint16)(e,1),(0,l.writeUint8)(e,a.reverse?1:0),(0,l.writeUint8)(e,a.dither?1:0),(0,l.writeUnicodeStringWithPadding)(e,a.name||""),(0,l.writeUint16)(e,a.colorStops&&a.colorStops.length||0);for(var o=Math.round(4096*(null!==(r=a.smoothness)&&void 0!==r?r:1)),s=0,c=a.colorStops||[];s<c.length;s++){var d=c[s];(0,l.writeUint32)(e,Math.round(d.location*o)),(0,l.writeUint32)(e,Math.round(100*d.midpoint)),(0,l.writeColor)(e,d.color),(0,l.writeZeros)(e,2)}(0,l.writeUint16)(e,a.opacityStops&&a.opacityStops.length||0);for(var u=0,f=a.opacityStops||[];u<f.length;u++)d=f[u],(0,l.writeUint32)(e,Math.round(d.location*o)),(0,l.writeUint32)(e,Math.round(100*d.midpoint)),(0,l.writeUint16)(e,Math.round(255*d.opacity));(0,l.writeUint16)(e,2),(0,l.writeUint16)(e,o),(0,l.writeUint16)(e,32),(0,l.writeUint16)(e,"noise"===a.gradientType?1:0),(0,l.writeUint32)(e,a.randomSeed||0),(0,l.writeUint16)(e,a.addTransparency?1:0),(0,l.writeUint16)(e,a.restrictColors?1:0),(0,l.writeUint32)(e,Math.round(4096*(null!==(n=a.roughness)&&void 0!==n?n:1)));var p=q.indexOf(null!==(i=a.colorModel)&&void 0!==i?i:"rgb");(0,l.writeUint16)(e,-1===p?3:p);for(var h=0;h<4;h++)(0,l.writeUint16)(e,Math.round(32768*(a.min&&a.min[h]||0)));for(h=0;h<4;h++)(0,l.writeUint16)(e,Math.round(32768*(a.max&&a.max[h]||0)));(0,l.writeZeros)(e,4)})),p("selc",T("selective color"),(function(e,t){if(1!==(0,s.readUint16)(e))throw new Error("Invalid selc version");var r=(0,s.readUint16)(e)?"absolute":"relative";(0,s.skipBytes)(e,8),t.adjustment={type:"selective color",mode:r,reds:J(e),yellows:J(e),greens:J(e),cyans:J(e),blues:J(e),magentas:J(e),whites:J(e),neutrals:J(e),blacks:J(e)}}),(function(e,t){var r=t.adjustment;(0,l.writeUint16)(e,1),(0,l.writeUint16)(e,"absolute"===r.mode?1:0),(0,l.writeZeros)(e,8),Q(e,r.reds),Q(e,r.yellows),Q(e,r.greens),Q(e,r.cyans),Q(e,r.blues),Q(e,r.magentas),Q(e,r.whites),Q(e,r.neutrals),Q(e,r.blacks)})),p("CgEd",(function(e){var t=e.adjustment;return!!t&&("brightness/contrast"===t.type&&!t.useLegacy||("levels"===t.type||"curves"===t.type||"exposure"===t.type||"channel mixer"===t.type||"hue/saturation"===t.type)&&void 0!==t.presetFileName)}),(function(e,t,r){var i=(0,c.readVersionAndDescriptor)(e);if(1!==i.Vrsn)throw new Error("Invalid CgEd version");t.adjustment="presetFileName"in i?n(n({},t.adjustment),{presetKind:i.presetKind,presetFileName:i.presetFileName}):"curvesPresetFileName"in i?n(n({},t.adjustment),{presetKind:i.curvesPresetKind,presetFileName:i.curvesPresetFileName}):"mixerPresetFileName"in i?n(n({},t.adjustment),{presetKind:i.mixerPresetKind,presetFileName:i.mixerPresetFileName}):{type:"brightness/contrast",brightness:i.Brgh,contrast:i.Cntr,meanValue:i.means,useLegacy:!!i.useLegacy,labColorOnly:!!i["Lab "],auto:!!i.Auto},(0,s.skipBytes)(e,r())}),(function(e,t){var r,n,i,a,o=t.adjustment;if("levels"===o.type||"exposure"===o.type||"hue/saturation"===o.type){var s={Vrsn:1,presetKind:null!==(r=o.presetKind)&&void 0!==r?r:1,presetFileName:o.presetFileName||""};(0,c.writeVersionAndDescriptor)(e,"","null",s)}else if("curves"===o.type)s={Vrsn:1,curvesPresetKind:null!==(n=o.presetKind)&&void 0!==n?n:1,curvesPresetFileName:o.presetFileName||""},(0,c.writeVersionAndDescriptor)(e,"","null",s);else if("channel mixer"===o.type)s={Vrsn:1,mixerPresetKind:null!==(i=o.presetKind)&&void 0!==i?i:1,mixerPresetFileName:o.presetFileName||""},(0,c.writeVersionAndDescriptor)(e,"","null",s);else{if("brightness/contrast"!==o.type)throw new Error("Unhandled CgEd case");s={Vrsn:1,Brgh:o.brightness||0,Cntr:o.contrast||0,means:null!==(a=o.meanValue)&&void 0!==a?a:127,"Lab ":!!o.labColorOnly,useLegacy:!!o.useLegacy,Auto:!!o.auto},(0,c.writeVersionAndDescriptor)(e,"","null",s)}})),p("Txt2",g("engineData"),(function(e,t,r){var n=(0,s.readBytes)(e,r());t.engineData=(0,i.fromByteArray)(n)}),(function(e,t){var r=(0,i.toByteArray)(t.engineData);(0,l.writeBytes)(e,r)})),p("FEid",g("filterEffectsMasks"),(function(e,t,r){var n=(0,s.readInt32)(e);if(n<1||n>3)throw new Error("Invalid filterEffects version ".concat(n));if((0,s.readUint32)(e))throw new Error("filterEffects: 64 bit length is not supported");var i=(0,s.readUint32)(e),a=e.offset+i;for(t.filterEffectsMasks=[];e.offset<a;){var o=(0,s.readPascalString)(e,1),l=(0,s.readInt32)(e);if(1!==l)throw new Error("Invalid filterEffect version ".concat(l));if((0,s.readUint32)(e))throw new Error("filterEffect: 64 bit length is not supported");(0,s.readUint32)(e);for(var c=(0,s.readInt32)(e),d=(0,s.readInt32)(e),u=(0,s.readInt32)(e),f=(0,s.readInt32)(e),p=(0,s.readInt32)(e),h=(0,s.readInt32)(e),g=[],m=0;m<h+2;m++)if((0,s.readInt32)(e)){if((0,s.readUint32)(e))throw new Error("filterEffect: 64 bit length is not supported");var v=(0,s.readUint32)(e),y=(0,s.readUint16)(e),w=(0,s.readBytes)(e,v-2);g.push({compressionMode:y,data:w})}else g.push(void 0);t.filterEffectsMasks.push({id:o,top:c,left:d,bottom:u,right:f,depth:p,channels:g}),r()&&(0,s.readUint8)(e)&&(y=(0,s.readUint16)(e),w=(0,s.readBytes)(e,r()),t.filterEffectsMasks[t.filterEffectsMasks.length-1].extra={compressionMode:y,data:w})}}),(function(e,t){var r;(0,l.writeInt32)(e,3),(0,l.writeUint32)(e,0),(0,l.writeUint32)(e,0);for(var n=e.offset,i=0,a=t.filterEffectsMasks;i<a.length;i++){var o=a[i];(0,l.writePascalString)(e,o.id,1),(0,l.writeInt32)(e,1),(0,l.writeUint32)(e,0),(0,l.writeUint32)(e,0);var s=e.offset;(0,l.writeInt32)(e,o.top),(0,l.writeInt32)(e,o.left),(0,l.writeInt32)(e,o.bottom),(0,l.writeInt32)(e,o.right),(0,l.writeInt32)(e,o.depth);var c=Math.max(0,o.channels.length-2);(0,l.writeInt32)(e,c);for(var d=0;d<c+2;d++){var u=o.channels[d];(0,l.writeInt32)(e,u?1:0),u&&((0,l.writeUint32)(e,0),(0,l.writeUint32)(e,u.data.length+2),(0,l.writeUint16)(e,u.compressionMode),(0,l.writeBytes)(e,u.data))}e.view.setUint32(s-4,e.offset-s,!1)}var f=null===(r=t.filterEffectsMasks[t.filterEffectsMasks.length-1])||void 0===r?void 0:r.extra;f&&((0,l.writeUint8)(e,1),(0,l.writeUint16)(e,f.compressionMode),(0,l.writeBytes)(e,f.data)),e.view.setUint32(n-4,e.offset-n,!1)})),h("FXid","FEid"),p("FMsk",g("filterMask"),(function(e,t){t.filterMask={colorSpace:(0,s.readColor)(e),opacity:(0,s.readUint16)(e)/255}}),(function(e,t){var r;(0,l.writeColor)(e,t.filterMask.colorSpace),(0,l.writeUint16)(e,255*(0,o.clamp)(null!==(r=t.filterMask.opacity)&&void 0!==r?r:1,0,1))})),p("artd",(function(e){return void 0!==e.artboards}),(function(e,t,r){var n=(0,c.readVersionAndDescriptor)(e);t.artboards={count:n["Cnt "],autoExpandOffset:{horizontal:n.autoExpandOffset.Hrzn,vertical:n.autoExpandOffset.Vrtc},origin:{horizontal:n.origin.Hrzn,vertical:n.origin.Vrtc},autoExpandEnabled:n.autoExpandEnabled,autoNestEnabled:n.autoNestEnabled,autoPositionEnabled:n.autoPositionEnabled,shrinkwrapOnSaveEnabled:!!n.shrinkwrapOnSaveEnabled,docDefaultNewArtboardBackgroundColor:(0,c.parseColor)(n.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:n.docDefaultNewArtboardBackgroundType},(0,s.skipBytes)(e,r())}),(function(e,t){var r,n,i,a,o,s=t.artboards,l={"Cnt ":s.count,autoExpandOffset:s.autoExpandOffset?{Hrzn:s.autoExpandOffset.horizontal,Vrtc:s.autoExpandOffset.vertical}:{Hrzn:0,Vrtc:0},origin:s.origin?{Hrzn:s.origin.horizontal,Vrtc:s.origin.vertical}:{Hrzn:0,Vrtc:0},autoExpandEnabled:null===(r=s.autoExpandEnabled)||void 0===r||r,autoNestEnabled:null===(n=s.autoNestEnabled)||void 0===n||n,autoPositionEnabled:null===(i=s.autoPositionEnabled)||void 0===i||i,shrinkwrapOnSaveEnabled:null===(a=s.shrinkwrapOnSaveEnabled)||void 0===a||a,docDefaultNewArtboardBackgroundColor:(0,c.serializeColor)(s.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:null!==(o=s.docDefaultNewArtboardBackgroundType)&&void 0!==o?o:1};(0,c.writeVersionAndDescriptor)(e,"","null",l,"artd")})),t.hasMultiEffects=$,p("lfx2",(function(e){return void 0!==e.effects&&!$(e.effects)}),(function(e,t,r,n,i){if(0!==(0,s.readUint32)(e))throw new Error("Invalid lfx2 version");var a=(0,c.readVersionAndDescriptor)(e);t.effects=(0,c.parseEffects)(a,!!i.logMissingFeatures),(0,s.skipBytes)(e,r())}),(function(e,t,r,n){var i=(0,c.serializeEffects)(t.effects,!!n.logMissingFeatures,!0);(0,l.writeUint32)(e,0),(0,c.writeVersionAndDescriptor)(e,"","null",i)})),p("cinf",g("compositorUsed"),(function(e,t,r){var n=(0,c.readVersionAndDescriptor)(e);function i(e){return e.split(".")[1]}t.compositorUsed={description:n.description,reason:n.reason,engine:i(n.Engn)},n.enableCompCore&&(t.compositorUsed.enableCompCore=i(n.enableCompCore)),n.enableCompCoreGPU&&(t.compositorUsed.enableCompCoreGPU=i(n.enableCompCoreGPU)),n.compCoreSupport&&(t.compositorUsed.compCoreSupport=i(n.compCoreSupport)),n.compCoreGPUSupport&&(t.compositorUsed.compCoreGPUSupport=i(n.compCoreGPUSupport)),(0,s.skipBytes)(e,r())}),(function(e,t){var r=t.compositorUsed,n={Vrsn:{major:1,minor:0,fix:0},description:r.description,reason:r.reason,Engn:"Engn.".concat(r.engine)};r.enableCompCore&&(n.enableCompCore="enable.".concat(r.enableCompCore)),r.enableCompCoreGPU&&(n.enableCompCoreGPU="enable.".concat(r.enableCompCoreGPU)),r.compCoreSupport&&(n.compCoreSupport="reason.".concat(r.compCoreSupport)),r.compCoreGPUSupport&&(n.compCoreGPUSupport="reason.".concat(r.compCoreGPUSupport)),(0,c.writeVersionAndDescriptor)(e,"","null",n)})),p("extn",(function(e){return void 0!==e._extn}),(function(e,t){var r=(0,c.readVersionAndDescriptor)(e);o.MOCK_HANDLERS&&(t._extn=r)}),(function(e,t){o.MOCK_HANDLERS&&(0,c.writeVersionAndDescriptor)(e,"","null",t._extn)})),p("iOpa",g("fillOpacity"),(function(e,t){t.fillOpacity=(0,s.readUint8)(e)/255,(0,s.skipBytes)(e,3)}),(function(e,t){(0,l.writeUint8)(e,255*t.fillOpacity),(0,l.writeZeros)(e,3)})),p("brst",g("channelBlendingRestrictions"),(function(e,t,r){for(t.channelBlendingRestrictions=[];r()>4;)t.channelBlendingRestrictions.push((0,s.readInt32)(e))}),(function(e,t){for(var r=0,n=t.channelBlendingRestrictions;r<n.length;r++){var i=n[r];(0,l.writeInt32)(e,i)}})),p("tsly",g("transparencyShapesLayer"),(function(e,t){t.transparencyShapesLayer=!!(0,s.readUint8)(e),(0,s.skipBytes)(e,3)}),(function(e,t){(0,l.writeUint8)(e,t.transparencyShapesLayer?1:0),(0,l.writeZeros)(e,3)}))},212:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.readCsh=void 0;var i=r(692),a=r(854);t.readCsh=function(e){var t=(0,a.createReader)(e.buffer,e.byteOffset,e.byteLength),r={shapes:[]};if((0,a.checkSignature)(t,"cush"),2!==(0,a.readUint32)(t))throw new Error("Invalid version");for(var o=(0,a.readUint32)(t),s=0;s<o;s++){for(var l=(0,a.readUnicodeString)(t);t.offset%4;)t.offset++;if(1!==(0,a.readUint32)(t))throw new Error("Invalid shape version");var c=(0,a.readUint32)(t),d=t.offset+c,u=(0,a.readPascalString)(t,1),f=(0,a.readUint32)(t),p=(0,a.readUint32)(t),h=(0,a.readUint32)(t),g=(0,a.readUint32)(t)-p,m=h-f,v={paths:[]};(0,i.readVectorMask)(t,v,g,m,d-t.offset),r.shapes.push(n({name:l,id:u,width:g,height:m},v)),t.offset=d}return r}},30:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ESliceOrigin=t.ESliceVertAlign=t.ESliceHorzAlign=t.ESliceType=t.FrFl=t.FStl=t.ClrS=t.gradientInterpolationMethodType=t.stdTrackID=t.animInterpStyleEnum=t.GrdT=t.IGSr=t.BETE=t.BESs=t.bvlT=t.BESl=t.BlnM=t.warpStyle=t.Annt=t.Ornt=t.textGridding=t.frac=t.unitsValue=t.unitsPercentF=t.unitsPercent=t.unitsAngle=t.parseUnitsToNumber=t.parseUnitsOrNumber=t.parseUnits=t.parsePercentOrAngle=t.parsePercent=t.parseAngle=t.serializeColor=t.parseColor=t.serializeVectorContent=t.parseVectorContent=t.serializeTrackList=t.parseTrackList=t.parseEffects=t.serializeEffects=t.boundsToDescBounds=t.descBoundsToBounds=t.xyToHorzVrtc=t.horzVrtcToXY=t.writeVersionAndDescriptor=t.readVersionAndDescriptor=t.writeDescriptorStructure=t.readDescriptorStructure=t.readAsciiStringOrClassId=t.setLogErrors=void 0,t.prjM=t.FlMd=t.IntC=t.IntE=t.Drct=t.WndM=t.CntE=t.FlCl=t.ExtR=t.ExtT=t.DfsM=t.blurType=t.Lns=t.MztT=t.Chnl=t.Dstr=t.ZZTy=t.Wvtp=t.SphM=t.RplS=t.Cnvr=t.UndA=t.DspM=t.SmBQ=t.SmBM=t.BlrQ=t.BlrM=t.strokeStyleLineAlignment=t.strokeStyleLineJoinType=t.strokeStyleLineCapType=t.ESliceBGColorType=void 0;var i,a,o=r(534),s=r(854),l=r(206),c={"#Ang":"Angle","#Rsl":"Density","#Rlt":"Distance","#Nne":"None","#Prc":"Percent","#Pxl":"Pixels","#Mlm":"Millimeters","#Pnt":"Points",RrPi:"Picas",RrIn:"Inches",RrCm:"Centimeters"},d=(i=c,a={},Object.keys(i).forEach((function(e){return a[i[e]]=e})),a),u=!1;function f(e,t){return{name:e,classID:t}}t.setLogErrors=function(e){u=e};for(var p=f("","null"),h={strokeStyleContent:f("","solidColorLayer"),printProofSetup:f("Proof Setup","proofSetup"),patternFill:f("","patternFill"),Grad:f("Gradient","Grdn"),ebbl:f("","ebbl"),SoFi:f("","SoFi"),GrFl:f("","GrFl"),sdwC:f("","RGBC"),hglC:f("","RGBC"),"Clr ":f("","RGBC"),tintColor:f("","RGBC"),Ofst:f("","Pnt "),ChFX:f("","ChFX"),MpgS:f("","ShpC"),DrSh:f("","DrSh"),IrSh:f("","IrSh"),OrGl:f("","OrGl"),IrGl:f("","IrGl"),TrnS:f("","ShpC"),Ptrn:f("","Ptrn"),FrFX:f("","FrFX"),phase:f("","Pnt "),frameStep:p,duration:p,workInTime:p,workOutTime:p,audioClipGroupList:p,bounds:f("","Rctn"),customEnvelopeWarp:f("","customEnvelopeWarp"),warp:f("","warp"),"Sz  ":f("","Pnt "),origin:f("","Pnt "),autoExpandOffset:f("","Pnt "),keyOriginShapeBBox:f("","unitRect"),Vrsn:p,psVersion:p,docDefaultNewArtboardBackgroundColor:f("","RGBC"),artboardRect:f("","classFloatRect"),keyOriginRRectRadii:f("","radii"),keyOriginBoxCorners:p,rectangleCornerA:f("","Pnt "),rectangleCornerB:f("","Pnt "),rectangleCornerC:f("","Pnt "),rectangleCornerD:f("","Pnt "),compInfo:p,Trnf:f("Transform","Trnf"),quiltWarp:f("","quiltWarp"),generatorSettings:p,crema:p,FrIn:p,blendOptions:p,FXRf:p,Lefx:p,time:p,animKey:p,timeScope:p,inTime:p,outTime:p,sheetStyle:p,translation:p,Skew:p,boundingBox:f("","boundingBox"),"Lnk ":f("","ExternalFileLink"),frameReader:f("","FrameReader"),effectParams:f("","motionTrackEffectParams"),Impr:f("None","none"),Anch:f("","Pnt "),"Fwd ":f("","Pnt "),"Bwd ":f("","Pnt "),FlrC:f("","Pnt "),meshBoundaryPath:f("","pathClass"),filterFX:f("","filterFXStyle"),Fltr:f("","rigidTransform"),FrgC:f("","RGBC"),BckC:f("","RGBC"),sdwM:f("Parameters","adaptCorrectTones"),hglM:f("Parameters","adaptCorrectTones"),customShape:f("","customShape")},g={"Crv ":f("","CrPt"),Clrs:f("","Clrt"),Trns:f("","TrnS"),keyDescriptorList:p,solidFillMulti:f("","SoFi"),gradientFillMulti:f("","GrFl"),dropShadowMulti:f("","DrSh"),innerShadowMulti:f("","IrSh"),frameFXMulti:f("","FrFX"),FrIn:p,FSts:p,LaSt:p,sheetTimelineOptions:p,trackList:f("","animationTrack"),globalTrackList:f("","animationTrack"),keyList:p,audioClipGroupList:p,audioClipList:p,countObjectList:f("","countObject"),countGroupList:f("","countGroup"),slices:f("","slice"),"Pts ":f("","Pthp"),SbpL:f("","SbpL"),pathComponents:f("","PaCm"),filterFXList:f("","filterFX"),puppetShapeList:f("","puppetShape"),channelDenoise:f("","channelDenoiseParams"),ShrP:f("","Pnt ")},m={TEXT:["Txt ","printerName","Nm  ","Idnt","blackAndWhitePresetFileName","LUT3DFileName","presetFileName","curvesPresetFileName","mixerPresetFileName","placed","description","reason","artboardPresetName","json","clipID","relPath","fullPath","mediaDescriptor","Msge","altTag","url","cellText","preset","KnNm","FPth"],tdta:["EngineData","LUT3DFileData","indexArray","originalVertexArray","deformedVertexArray","LqMe"],long:["TextIndex","RndS","Mdpn","Smth","Lctn","strokeStyleVersion","LaID","Vrsn","Cnt ","Brgh","Cntr","means","vibrance","Strt","bwPresetKind","presetKind","comp","compID","originalCompID","curvesPresetKind","mixerPresetKind","uOrder","vOrder","PgNm","totalPages","Crop","numerator","denominator","frameCount","Annt","keyOriginType","unitValueQuadVersion","keyOriginIndex","major","minor","fix","docDefaultNewArtboardBackgroundType","artboardBackgroundType","numModifyingFX","deformNumRows","deformNumCols","FrID","FrDl","FsID","LCnt","AFrm","AFSt","numBefore","numAfter","Spcn","minOpacity","maxOpacity","BlnM","sheetID","gblA","globalAltitude","descVersion","frameReaderType","LyrI","zoomOrigin","fontSize","Rds ","sliceID","topOutset","leftOutset","bottomOutset","rightOutset","filterID","meshQuality","meshExpansion","meshRigidity","VrsM","VrsN","NmbG","WLMn","WLMx","AmMn","AmMx","SclH","SclV","Lvl ","TlNm","TlOf","FlRs","Thsh","ShrS","ShrE","FlRs","Vrnc","Strg","ExtS","ExtD","HrzS","VrtS","NmbR","EdgF","Ang1","Ang2","Ang3","Ang4"],enum:["textGridding","Ornt","warpStyle","warpRotate","Inte","Bltn","ClrS","BlrQ","bvlT","bvlS","bvlD","Md  ","glwS","GrdF","GlwT","RplS","BlrM","SmBM","strokeStyleLineCapType","strokeStyleLineJoinType","strokeStyleLineAlignment","strokeStyleBlendMode","PntT","Styl","lookupType","LUTFormat","dataOrder","tableOrder","enableCompCore","enableCompCoreGPU","compCoreSupport","compCoreGPUSupport","Engn","enableCompCoreThreads","gs99","FrDs","trackID","animInterpStyle","horzAlign","vertAlign","bgColorType","shapeOperation","UndA","Wvtp","Drct","WndM","Edg ","FlCl","IntE","IntC","Cnvr","Fl  ","Dstr","MztT","Lns ","ExtT","DspM","ExtR","ZZTy","SphM","SmBQ"],bool:["PstS","printSixteenBit","masterFXSwitch","enab","uglg","antialiasGloss","useShape","useTexture","uglg","antialiasGloss","useShape","Vsbl","useTexture","Algn","Rvrs","Dthr","Invr","VctC","ShTr","layerConceals","strokeEnabled","fillEnabled","strokeStyleScaleLock","strokeStyleStrokeAdjust","hardProof","MpBl","paperWhite","useLegacy","Auto","Lab ","useTint","keyShapeInvalidated","autoExpandEnabled","autoNestEnabled","autoPositionEnabled","shrinkwrapOnSaveEnabled","present","showInDialog","overprint","sheetDisclosed","lightsDisclosed","meshesDisclosed","materialsDisclosed","hasMotion","muted","Effc","selected","autoScope","fillCanvas","cellTextIsHTML","Smoo","Clsp","validAtPosition","rigidType","hasoptions","filterMaskEnable","filterMaskLinked","filterMaskExtendWithWhite","removeJPEGArtifact","Mnch","ExtF","ExtM","moreAccurate","GpuY","LIWy"],doub:["warpValue","warpPerspective","warpPerspectiveOther","Intr","Wdth","Hght","strokeStyleMiterLimit","strokeStyleResolution","layerTime","keyOriginResolution","xx","xy","yx","yy","tx","ty","FrGA","frameRate","audioLevel","rotation","X   ","Y   ","redFloat","greenFloat","blueFloat","imageResolution","PuX0","PuX1","PuX2","PuX3","PuY0","PuY1","PuY2","PuY3"],UntF:["sdwO","hglO","lagl","Lald","srgR","blur","Sftn","Opct","Dstn","Angl","Ckmt","Nose","Inpr","ShdN","strokeStyleLineWidth","strokeStyleLineDashOffset","strokeStyleOpacity","H   ","Top ","Left","Btom","Rght","Rslt","topRight","topLeft","bottomLeft","bottomRight","ClNs","Shrp"],VlLs:["Crv ","Clrs","Mnm ","Mxm ","Trns","pathList","strokeStyleLineDashSet","FrLs","slices","LaSt","Trnf","nonAffineTransform","keyDescriptorList","guideIndeces","gradientFillMulti","solidFillMulti","frameFXMulti","innerShadowMulti","dropShadowMulti","FrIn","FSts","FsFr","sheetTimelineOptions","audioClipList","trackList","globalTrackList","keyList","audioClipList","warpValues","selectedPin","Pts ","SbpL","pathComponents","pinOffsets","posFinalPins","pinVertexIndices","PinP","PnRt","PnOv","PnDp","filterFXList","puppetShapeList","ShrP","channelDenoise","Mtrx"],ObAr:["meshPoints","quiltSliceX","quiltSliceY"],"obj ":["null","Chnl"],"Pth ":["DspF"]},v=["Rd  ","Grn ","Bl  ","Yllw","Ylw ","Cyn ","Mgnt","Blck","Gry ","Lmnc","A   ","B   "],y={"Mnm ":"long","Mxm ":"long",FrLs:"long",strokeStyleLineDashSet:"UntF",Trnf:"doub",nonAffineTransform:"doub",keyDescriptorList:"Objc",gradientFillMulti:"Objc",solidFillMulti:"Objc",frameFXMulti:"Objc",innerShadowMulti:"Objc",dropShadowMulti:"Objc",LaSt:"Objc",FrIn:"Objc",FSts:"Objc",FsFr:"long",blendOptions:"Objc",sheetTimelineOptions:"Objc",keyList:"Objc",warpValues:"doub",selectedPin:"long","Pts ":"Objc",SbpL:"Objc",pathComponents:"Objc",pinOffsets:"doub",posFinalPins:"doub",pinVertexIndices:"long",PinP:"doub",PnRt:"long",PnOv:"bool",PnDp:"doub",filterFXList:"Objc",puppetShapeList:"Objc",ShrP:"Objc",channelDenoise:"Objc",Mtrx:"long"},w={},b=0,S=Object.keys(m);b<S.length;b++)for(var I=S[b],k=0,F=m[I];k<F.length;k++){var D=F[k];w[D]=I}for(var C=0,P=Object.keys(h);C<P.length;C++)D=P[C],w[D]||(w[D]="Objc");for(var U=0,M=Object.keys(g);U<M.length;U++)D=M[U],y[D]="Objc";function A(e,t,r,n){return"null"===e&&"slices"===r?"TEXT":"groupID"===e?"slices"===r?"long":"TEXT":"Sz  "===e?"Wdth"in t?"Objc":"units"in t?"UntF":"doub":"Type"===e?"string"==typeof t?"enum":"long":"AntA"===e?"string"==typeof t?"enum":"bool":"Hrzn"!==e&&"Vrtc"!==e||"keyType.Pstn"!==n.Type?"Hrzn"===e||"Vrtc"===e||"Top "===e||"Left"===e||"Btom"===e||"Rght"===e?"slices"===r?"long":"number"==typeof t?"doub":"UntF":"Vrsn"===e?"number"==typeof t?"long":"Objc":"Rd  "===e||"Grn "===e||"Bl  "===e?"artd"===r?"long":"doub":"Trnf"===e?Array.isArray(t)?"VlLs":"Objc":w[e]:"long"}function x(e){var t=(0,s.readInt32)(e);return(0,s.readAsciiString)(e,t||4)}function E(e,t){if(4===t.length&&"warp"!==t&&"time"!==t&&"hold"!==t)(0,l.writeInt32)(e,0),(0,l.writeSignature)(e,t);else{(0,l.writeInt32)(e,t.length);for(var r=0;r<t.length;r++)(0,l.writeUint8)(e,t.charCodeAt(r))}}function L(e,t){for(var r=V(e),n=t?{_name:r.name,_classID:r.classID}:{},i=(0,s.readUint32)(e),a=0;a<i;a++){var o=x(e),l=B(e,(0,s.readSignature)(e),t);n[o]=l}return n}function O(e,t,r,n,i){u&&!r&&console.log("Missing classId for: ",t,r,n),(0,l.writeUnicodeStringWithPadding)(e,t),E(e,r);var a=Object.keys(n),o=a.length;"_name"in n&&o--,"_classID"in n&&o--,(0,l.writeUint32)(e,o);for(var s=0,c=a;s<c.length;s++){var d=c[s];if("_name"!==d&&"_classID"!==d){var g=A(d,n[d],i,n),m=h[d];"bounds"===d&&"text"===i?m=f("","bounds"):"origin"===d?g="slices"===i?"enum":"Objc":"Cyn "!==d&&"Mgnt"!==d&&"Ylw "!==d&&"Blck"!==d||"CMYC"!==n._classID?/^PN[a-z][a-z]$/.test(d)?g="TEXT":/^PT[a-z][a-z]$/.test(d)?g="long":/^PF[a-z][a-z]$/.test(d)?g="doub":"ClSz"===d||"Rds "===d||"Amnt"===d?g="number"==typeof n[d]?"long":"UntF":"sdwM"!==d&&"hglM"!==d||"string"!=typeof n[d]?"blur"===d&&"string"==typeof n[d]?g="enum":"Angl"===d&&"number"==typeof n[d]?g="doub":"bounds"===d&&"slices"===i?(g="Objc",m=f("","Rct1")):"Scl "===d?"object"==typeof n[d]&&"Hrzn"in n[d]?(g="Objc",m=p):g="number"==typeof n[d]?"long":"UntF":"audioClipGroupList"===d&&1===a.length?g="VlLs":"Strt"!==d&&"Brgh"!==d||!("H   "in n)?"Wdth"===d&&"object"==typeof n[d]?g="UntF":"Ofst"===d&&"number"==typeof n[d]?g="long":"Strt"===d&&"object"==typeof n[d]?(g="Objc",m=p):-1!==v.indexOf(d)?g="RGBC"===r&&"artd"!==i?"doub":"long":"profile"===d?g="printOutput"===r?"TEXT":"tdta":"strokeStyleContent"===d?n[d]["Clr "]?m=f("","solidColorLayer"):n[d].Grad?m=f("","gradientLayer"):n[d].Ptrn?m=f("","patternLayer"):u&&console.log("Invalid strokeStyleContent value",n[d]):"bounds"===d&&"quiltWarp"===i&&(m=f("","classFloatRect")):g="doub":g="enum":g="doub",m&&"RGBC"===m.classID&&"H   "in n[d]&&(m={classID:"HSBC",name:""}),E(e,d),(0,l.writeSignature)(e,g||"long"),R(e,g||"long",n[d],d,m,i),u&&!g&&console.log("Missing descriptor field type for: '".concat(d,"' in"),n)}}}function B(e,t,r){switch(t){case"obj ":return function(e){for(var t=(0,s.readInt32)(e),r=[],n=0;n<t;n++){var i=(0,s.readSignature)(e);switch(i){case"prop":V(e);var a=x(e);r.push(a);break;case"Clss":r.push(V(e));break;case"Enmr":V(e);var o=x(e),l=x(e);r.push("".concat(o,".").concat(l));break;case"rele":V(e),r.push((0,s.readUint32)(e));break;case"Idnt":case"indx":r.push((0,s.readInt32)(e));break;case"name":V(e),r.push((0,s.readUnicodeString)(e));break;default:throw new Error("Invalid descriptor reference type: ".concat(i))}}return r}(e);case"Objc":case"GlbO":return L(e,r);case"VlLs":for(var n=(0,s.readInt32)(e),i=[],a=0;a<n;a++){var o=(0,s.readSignature)(e);i.push(B(e,o,r))}return i;case"doub":return(0,s.readFloat64)(e);case"UntF":var l=(0,s.readSignature)(e),d=(0,s.readFloat64)(e);if(!c[l])throw new Error("Invalid units: ".concat(l));return{units:c[l],value:d};case"UnFl":if(l=(0,s.readSignature)(e),d=(0,s.readFloat32)(e),!c[l])throw new Error("Invalid units: ".concat(l));return{units:c[l],value:d};case"TEXT":return(0,s.readUnicodeString)(e);case"enum":var u=x(e);return d=x(e),"".concat(u,".").concat(d);case"long":return(0,s.readInt32)(e);case"comp":return{low:(0,s.readUint32)(e),high:(0,s.readUint32)(e)};case"bool":return!!(0,s.readUint8)(e);case"type":case"GlbC":return V(e);case"alis":var f=(0,s.readInt32)(e);return(0,s.readAsciiString)(e,f);case"tdta":var p=(0,s.readInt32)(e);return(0,s.readBytes)(e,p);case"ObAr":(0,s.readInt32)(e),(0,s.readUnicodeString)(e),x(e);var h=(0,s.readInt32)(e);for(i=[],a=0;a<h;a++){var g=x(e);(0,s.readSignature)(e),(0,s.readSignature)(e);for(var m=(0,s.readInt32)(e),v=[],y=0;y<m;y++)v.push((0,s.readFloat64)(e));i.push({type:g,values:v})}return i;case"Pth ":(0,s.readInt32)(e);var w=(0,s.readSignature)(e);(0,s.readInt32LE)(e);var b=(0,s.readInt32LE)(e);return{sig:w,path:(0,s.readUnicodeStringWithLengthLE)(e,b)};default:throw new Error("Invalid TySh descriptor OSType: ".concat(t," at ").concat(e.offset.toString(16)))}}t.readAsciiStringOrClassId=x,t.readDescriptorStructure=L,t.writeDescriptorStructure=O;var T={meshPoints:"rationalPoint",quiltSliceX:"UntF",quiltSliceY:"UntF"};function R(e,t,r,n,i,a){switch(t){case"obj ":!function(e,t,r){(0,l.writeInt32)(e,r.length);for(var n=0;n<r.length;n++){var i=r[n],a="unknown";switch("string"==typeof i&&(a=/^[a-z]+\.[a-z]+$/i.test(i)?"Enmr":"name"),(0,l.writeSignature)(e,a),a){case"Enmr":var o=i.split("."),s=o[0],c=o[1];_(e,"\0",s),E(e,s),E(e,c);break;case"name":_(e,"\0","Lyr "),(0,l.writeUnicodeString)(e,i+"\0");break;default:throw new Error("Invalid descriptor reference type: ".concat(a))}}}(e,0,r);break;case"Objc":case"GlbO":if("object"!=typeof r)throw new Error("Invalid struct value: ".concat(JSON.stringify(r),", key: ").concat(n));if(!i)throw new Error("Missing ext type for: '".concat(n,"' (").concat(JSON.stringify(r),")"));O(e,r._name||i.name,r._classID||i.classID,r,a);break;case"VlLs":if(!Array.isArray(r))throw new Error("Invalid list value: ".concat(JSON.stringify(r),", key: ").concat(n));(0,l.writeInt32)(e,r.length);for(var o=0;o<r.length;o++){var s=y[n];(0,l.writeSignature)(e,s||"long"),R(e,s||"long",r[o],"".concat(n,"[]"),g[n],a),u&&!s&&console.log("Missing descriptor array type for: '".concat(n,"' in"),r)}break;case"doub":if("number"!=typeof r)throw new Error("Invalid number value: ".concat(JSON.stringify(r),", key: ").concat(n));(0,l.writeFloat64)(e,r);break;case"UntF":if(!d[r.units])throw new Error("Invalid units: ".concat(r.units," in ").concat(n));(0,l.writeSignature)(e,d[r.units]),(0,l.writeFloat64)(e,r.value);break;case"UnFl":if(!d[r.units])throw new Error("Invalid units: ".concat(r.units," in ").concat(n));(0,l.writeSignature)(e,d[r.units]),(0,l.writeFloat32)(e,r.value);break;case"TEXT":(0,l.writeUnicodeStringWithPadding)(e,r);break;case"enum":if("string"!=typeof r)throw new Error("Invalid enum value: ".concat(JSON.stringify(r),", key: ").concat(n));var c=r.split("."),f=c[0],p=c[1];E(e,f),E(e,p);break;case"long":if("number"!=typeof r)throw new Error("Invalid integer value: ".concat(JSON.stringify(r),", key: ").concat(n));(0,l.writeInt32)(e,r);break;case"bool":if("boolean"!=typeof r)throw new Error("Invalid boolean value: ".concat(JSON.stringify(r),", key: ").concat(n));(0,l.writeUint8)(e,r?1:0);break;case"tdta":(0,l.writeInt32)(e,r.byteLength),(0,l.writeBytes)(e,r);break;case"ObAr":(0,l.writeInt32)(e,16),(0,l.writeUnicodeStringWithPadding)(e,"");var h=T[n];if(!h)throw new Error("Not implemented ObArType for: ".concat(n));for(E(e,h),(0,l.writeInt32)(e,r.length),o=0;o<r.length;o++){E(e,r[o].type),(0,l.writeSignature)(e,"UnFl"),(0,l.writeSignature)(e,"#Pxl"),(0,l.writeInt32)(e,r[o].values.length);for(var m=0;m<r[o].values.length;m++)(0,l.writeFloat64)(e,r[o].values[m])}break;case"Pth ":var v=12+2*r.path.length;(0,l.writeInt32)(e,v),(0,l.writeSignature)(e,r.sig),(0,l.writeInt32LE)(e,v),(0,l.writeInt32LE)(e,r.path.length),(0,l.writeUnicodeStringWithoutLengthLE)(e,r.path);break;default:throw new Error("Not implemented descriptor OSType: ".concat(t))}}function V(e){return{name:(0,s.readUnicodeString)(e),classID:x(e)}}function _(e,t,r){(0,l.writeUnicodeString)(e,t),E(e,r)}function z(e){return{x:e.Hrzn,y:e.Vrtc}}function G(e){return{Hrzn:e.x,Vrtc:e.y}}function N(e){var r={enabled:!!e.enab,position:t.FStl.decode(e.Styl),fillType:t.FrFl.decode(e.PntT),blendMode:t.BlnM.decode(e["Md  "]),opacity:ae(e.Opct),size:se(e["Sz  "])};return void 0!==e.present&&(r.present=e.present),void 0!==e.showInDialog&&(r.showInDialog=e.showInDialog),void 0!==e.overprint&&(r.overprint=e.overprint),e["Clr "]&&(r.color=re(e["Clr "])),e.Grad&&(r.gradient=Q(e)),e.Ptrn&&(r.pattern=$(e)),r}function j(e){var r={};return r.enab=!!e.enabled,void 0!==e.present&&(r.present=!!e.present),void 0!==e.showInDialog&&(r.showInDialog=!!e.showInDialog),r.Styl=t.FStl.encode(e.position),r.PntT=t.FrFl.encode(e.fillType),r["Md  "]=t.BlnM.encode(e.blendMode),r.Opct=ce(e.opacity),r["Sz  "]=ue(e.size,"size"),e.color&&(r["Clr "]=ne(e.color)),e.gradient&&(r=n(n({},r),ee(e.gradient))),e.pattern&&(r=n(n({},r),te(e.pattern))),void 0!==e.overprint&&(r.overprint=!!e.overprint),r}function W(e,t,r){for(var n,i,a,o,s,l,c,d,u,f,p,h,g,m=r?{"Scl ":de(null!==(n=e.scale)&&void 0!==n?n:1),masterFXSwitch:!e.disabled}:{masterFXSwitch:!e.disabled,"Scl ":de(null!==(i=e.scale)&&void 0!==i?i:1)},v=0,y=["dropShadow","innerShadow","solidFill","gradientOverlay","stroke"];v<y.length;v++)if(e[S=y[v]]&&!Array.isArray(e[S]))throw new Error("".concat(S," should be an array"));if((null===(a=e.dropShadow)||void 0===a?void 0:a[0])&&!r&&(m.DrSh=Z(e.dropShadow[0],"dropShadow",t)),(null===(o=e.dropShadow)||void 0===o?void 0:o[0])&&r&&(m.dropShadowMulti=e.dropShadow.map((function(e){return Z(e,"dropShadow",t)}))),(null===(s=e.innerShadow)||void 0===s?void 0:s[0])&&!r&&(m.IrSh=Z(e.innerShadow[0],"innerShadow",t)),(null===(l=e.innerShadow)||void 0===l?void 0:l[0])&&r&&(m.innerShadowMulti=e.innerShadow.map((function(e){return Z(e,"innerShadow",t)}))),e.outerGlow&&(m.OrGl=Z(e.outerGlow,"outerGlow",t)),(null===(c=e.solidFill)||void 0===c?void 0:c[0])&&r&&(m.solidFillMulti=e.solidFill.map((function(e){return Z(e,"solidFill",t)}))),(null===(d=e.gradientOverlay)||void 0===d?void 0:d[0])&&r&&(m.gradientFillMulti=e.gradientOverlay.map((function(e){return Z(e,"gradientOverlay",t)}))),(null===(u=e.stroke)||void 0===u?void 0:u[0])&&r&&(m.frameFXMulti=e.stroke.map((function(e){return j(e)}))),e.innerGlow&&(m.IrGl=Z(e.innerGlow,"innerGlow",t)),e.bevel&&(m.ebbl=Z(e.bevel,"bevel",t)),(null===(f=e.solidFill)||void 0===f?void 0:f[0])&&!r&&(m.SoFi=Z(e.solidFill[0],"solidFill",t)),e.patternOverlay&&(m.patternFill=Z(e.patternOverlay,"patternOverlay",t)),(null===(p=e.gradientOverlay)||void 0===p?void 0:p[0])&&!r&&(m.GrFl=Z(e.gradientOverlay[0],"gradientOverlay",t)),e.satin&&(m.ChFX=Z(e.satin,"satin",t)),(null===(h=e.stroke)||void 0===h?void 0:h[0])&&!r&&(m.FrFX=j(null===(g=e.stroke)||void 0===g?void 0:g[0])),r){m.numModifyingFX=0;for(var w=0,b=Object.keys(e);w<b.length;w++){var S,I=e[S=b[w]];if(Array.isArray(I))for(var k=0,F=I;k<F.length;k++)F[k].enabled&&m.numModifyingFX++;else I.enabled&&m.numModifyingFX++}}return m}function H(e,t){var r={};return e.masterFXSwitch||(r.disabled=!0),e["Scl "]&&(r.scale=ae(e["Scl "])),e.DrSh&&(r.dropShadow=[K(e.DrSh,t)]),e.dropShadowMulti&&(r.dropShadow=e.dropShadowMulti.map((function(e){return K(e,t)}))),e.IrSh&&(r.innerShadow=[K(e.IrSh,t)]),e.innerShadowMulti&&(r.innerShadow=e.innerShadowMulti.map((function(e){return K(e,t)}))),e.OrGl&&(r.outerGlow=K(e.OrGl,t)),e.IrGl&&(r.innerGlow=K(e.IrGl,t)),e.ebbl&&(r.bevel=K(e.ebbl,t)),e.SoFi&&(r.solidFill=[K(e.SoFi,t)]),e.solidFillMulti&&(r.solidFill=e.solidFillMulti.map((function(e){return K(e,t)}))),e.patternFill&&(r.patternOverlay=K(e.patternFill,t)),e.GrFl&&(r.gradientOverlay=[K(e.GrFl,t)]),e.gradientFillMulti&&(r.gradientOverlay=e.gradientFillMulti.map((function(e){return K(e,t)}))),e.ChFX&&(r.satin=K(e.ChFX,t)),e.FrFX&&(r.stroke=[N(e.FrFX)]),e.frameFXMulti&&(r.stroke=e.frameFXMulti.map((function(e){return N(e)}))),r}function X(e,r){for(var n=[],i=0;i<e.length;i++){var a=e[i],o=a.time,s=o.denominator,l=o.numerator,c=a.selected,d=a.animKey,u={numerator:l,denominator:s},f=t.animInterpStyleEnum.decode(a.animInterpStyle);switch(d.Type){case"keyType.Opct":n.push({interpolation:f,time:u,selected:c,type:"opacity",value:ae(d.Opct)});break;case"keyType.Pstn":n.push({interpolation:f,time:u,selected:c,type:"position",x:d.Hrzn,y:d.Vrtc});break;case"keyType.Trnf":n.push({interpolation:f,time:u,selected:c,type:"transform",scale:z(d["Scl "]),skew:z(d.Skew),rotation:d.rotation,translation:z(d.translation)});break;case"keyType.sheetStyle":var p={interpolation:f,time:u,selected:c,type:"style"};d.sheetStyle.Lefx&&(p.style=H(d.sheetStyle.Lefx,r)),n.push(p);break;case"keyType.globalLighting":n.push({interpolation:f,time:u,selected:c,type:"globalLighting",globalAngle:d.gblA,globalAltitude:d.globalAltitude});break;default:throw new Error("Unsupported keyType value")}}return n}function Y(e){for(var r=[],n=0;n<e.length;n++){var i=e[n],a=i.time,o=i.selected,s=void 0!==o&&o,l=i.interpolation,c=t.animInterpStyleEnum.encode(l),d=void 0;switch(i.type){case"opacity":d={Type:"keyType.Opct",Opct:ce(i.value)};break;case"position":d={Type:"keyType.Pstn",Hrzn:i.x,Vrtc:i.y};break;case"transform":d={Type:"keyType.Trnf","Scl ":G(i.scale),Skew:G(i.skew),rotation:i.rotation,translation:G(i.translation)};break;case"style":d={Type:"keyType.sheetStyle",sheetStyle:{Vrsn:1,blendOptions:{}}},i.style&&(d.sheetStyle={Vrsn:1,Lefx:W(i.style,!1,!1),blendOptions:{}});break;case"globalLighting":d={Type:"keyType.globalLighting",gblA:i.globalAngle,globalAltitude:i.globalAltitude};break;default:throw new Error("Unsupported keyType value")}r.push({Vrsn:1,animInterpStyle:c,time:a,animKey:d,selected:s})}return r}function K(e,r){for(var n={},i=0,a=Object.keys(e);i<a.length;i++){var o=a[i],s=e[o];switch(o){case"enab":n.enabled=!!s;break;case"uglg":n.useGlobalLight=!!s;break;case"AntA":n.antialiased=!!s;break;case"Algn":n.align=!!s;break;case"Dthr":n.dither=!!s;break;case"Invr":n.invert=!!s;break;case"Rvrs":n.reverse=!!s;break;case"Clr ":n.color=re(s);break;case"hglC":n.highlightColor=re(s);break;case"sdwC":n.shadowColor=re(s);break;case"Styl":n.position=t.FStl.decode(s);break;case"Md  ":n.blendMode=t.BlnM.decode(s);break;case"hglM":n.highlightBlendMode=t.BlnM.decode(s);break;case"sdwM":n.shadowBlendMode=t.BlnM.decode(s);break;case"bvlS":n.style=t.BESl.decode(s);break;case"bvlD":n.direction=t.BESs.decode(s);break;case"bvlT":n.technique=t.bvlT.decode(s);break;case"GlwT":n.technique=t.BETE.decode(s);break;case"glwS":n.source=t.IGSr.decode(s);break;case"Type":n.type=t.GrdT.decode(s);break;case"gs99":n.interpolationMethod=t.gradientInterpolationMethodType.decode(s);break;case"Opct":n.opacity=ae(s);break;case"hglO":n.highlightOpacity=ae(s);break;case"sdwO":n.shadowOpacity=ae(s);break;case"lagl":case"Angl":n.angle=ie(s);break;case"Lald":n.altitude=ie(s);break;case"Sftn":n.soften=se(s);break;case"srgR":n.strength=ae(s);break;case"blur":n.size=se(s);break;case"Nose":n.noise=ae(s);break;case"Inpr":n.range=ae(s);break;case"Ckmt":n.choke=se(s);break;case"ShdN":n.jitter=ae(s);break;case"Dstn":n.distance=se(s);break;case"Scl ":n.scale=ae(s);break;case"Ptrn":n.pattern={name:s["Nm  "],id:s.Idnt};break;case"phase":n.phase={x:s.Hrzn,y:s.Vrtc};break;case"Ofst":n.offset={x:ae(s.Hrzn),y:ae(s.Vrtc)};break;case"MpgS":case"TrnS":n.contour={name:s["Nm  "],curve:s["Crv "].map((function(e){return{x:e.Hrzn,y:e.Vrtc}}))};break;case"Grad":n.gradient=q(s);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":n[o]=s;break;case"_name":case"_classID":break;default:r&&console.log("Invalid effect key: '".concat(o,"', value:"),s)}}return n}function Z(e,r,n){for(var i={},a=0,o=Object.keys(e);a<o.length;a++){var s=o[a],l=e[s];switch(s){case"enabled":i.enab=!!l;break;case"useGlobalLight":i.uglg=!!l;break;case"antialiased":i.AntA=!!l;break;case"align":i.Algn=!!l;break;case"dither":i.Dthr=!!l;break;case"invert":i.Invr=!!l;break;case"reverse":i.Rvrs=!!l;break;case"color":i["Clr "]=ne(l);break;case"highlightColor":i.hglC=ne(l);break;case"shadowColor":i.sdwC=ne(l);break;case"position":i.Styl=t.FStl.encode(l);break;case"blendMode":i["Md  "]=t.BlnM.encode(l);break;case"highlightBlendMode":i.hglM=t.BlnM.encode(l);break;case"shadowBlendMode":i.sdwM=t.BlnM.encode(l);break;case"style":i.bvlS=t.BESl.encode(l);break;case"direction":i.bvlD=t.BESs.encode(l);break;case"technique":"bevel"===r?i.bvlT=t.bvlT.encode(l):i.GlwT=t.BETE.encode(l);break;case"source":i.glwS=t.IGSr.encode(l);break;case"type":i.Type=t.GrdT.encode(l);break;case"interpolationMethod":i.gs99=t.gradientInterpolationMethodType.encode(l);break;case"opacity":i.Opct=ce(l);break;case"highlightOpacity":i.hglO=ce(l);break;case"shadowOpacity":i.sdwO=ce(l);break;case"angle":"gradientOverlay"===r||"patternFill"===r?i.Angl=le(l):i.lagl=le(l);break;case"altitude":i.Lald=le(l);break;case"soften":i.Sftn=ue(l,s);break;case"strength":i.srgR=ce(l);break;case"size":i.blur=ue(l,s);break;case"noise":i.Nose=ce(l);break;case"range":i.Inpr=ce(l);break;case"choke":i.Ckmt=ue(l,s);break;case"jitter":i.ShdN=ce(l);break;case"distance":i.Dstn=ue(l,s);break;case"scale":i["Scl "]=ce(l);break;case"pattern":i.Ptrn={"Nm  ":l.name,Idnt:l.id};break;case"phase":i.phase={Hrzn:l.x,Vrtc:l.y};break;case"offset":i.Ofst={Hrzn:ce(l.x),Vrtc:ce(l.y)};break;case"contour":i["satin"===r?"MpgS":"TrnS"]={"Nm  ":l.name,"Crv ":l.curve.map((function(e){return{Hrzn:e.x,Vrtc:e.y}}))};break;case"gradient":i.Grad=J(l);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":i[s]=l;break;default:n&&console.log("Invalid effect key: '".concat(s,"', value:"),l)}}return i}function q(e){if("GrdF.CstS"===e.GrdF){var r=e.Intr||4096;return{type:"solid",name:e["Nm  "],smoothness:e.Intr/4096,colorStops:e.Clrs.map((function(e){return{color:re(e["Clr "]),location:e.Lctn/r,midpoint:e.Mdpn/100}})),opacityStops:e.Trns.map((function(e){return{opacity:ae(e.Opct),location:e.Lctn/r,midpoint:e.Mdpn/100}}))}}return{type:"noise",name:e["Nm  "],roughness:e.Smth/4096,colorModel:t.ClrS.decode(e.ClrS),randomSeed:e.RndS,restrictColors:!!e.VctC,addTransparency:!!e.ShTr,min:e["Mnm "].map((function(e){return e/100})),max:e["Mxm "].map((function(e){return e/100}))}}function J(e){var r,n;if("solid"===e.type){var i=Math.round(4096*(null!==(r=e.smoothness)&&void 0!==r?r:1));return{"Nm  ":e.name||"",GrdF:"GrdF.CstS",Intr:i,Clrs:e.colorStops.map((function(e){var t;return{"Clr ":ne(e.color),Type:"Clry.UsrS",Lctn:Math.round(e.location*i),Mdpn:Math.round(100*(null!==(t=e.midpoint)&&void 0!==t?t:.5))}})),Trns:e.opacityStops.map((function(e){var t;return{Opct:ce(e.opacity),Lctn:Math.round(e.location*i),Mdpn:Math.round(100*(null!==(t=e.midpoint)&&void 0!==t?t:.5))}}))}}return{GrdF:"GrdF.ClNs","Nm  ":e.name||"",ShTr:!!e.addTransparency,VctC:!!e.restrictColors,ClrS:t.ClrS.encode(e.colorModel),RndS:e.randomSeed||0,Smth:Math.round(4096*(null!==(n=e.roughness)&&void 0!==n?n:1)),"Mnm ":(e.min||[0,0,0,0]).map((function(e){return 100*e})),"Mxm ":(e.max||[1,1,1,1]).map((function(e){return 100*e}))}}function Q(e){var r=q(e.Grad);return r.style=t.GrdT.decode(e.Type),void 0!==e.Dthr&&(r.dither=e.Dthr),void 0!==e.Rvrs&&(r.reverse=e.Rvrs),void 0!==e.Angl&&(r.angle=ie(e.Angl)),void 0!==e["Scl "]&&(r.scale=ae(e["Scl "])),void 0!==e.Algn&&(r.align=e.Algn),void 0!==e.Ofst&&(r.offset={x:ae(e.Ofst.Hrzn),y:ae(e.Ofst.Vrtc)}),r}function $(e){var t={name:e.Ptrn["Nm  "],id:e.Ptrn.Idnt};return void 0!==e.Lnkd&&(t.linked=e.Lnkd),void 0!==e.phase&&(t.phase={x:e.phase.Hrzn,y:e.phase.Vrtc}),t}function ee(e){var r={};return void 0!==e.dither&&(r.Dthr=e.dither),void 0!==e.reverse&&(r.Rvrs=e.reverse),void 0!==e.angle&&(r.Angl=le(e.angle)),r.Type=t.GrdT.encode(e.style),void 0!==e.align&&(r.Algn=e.align),void 0!==e.scale&&(r["Scl "]=ce(e.scale)),e.offset&&(r.Ofst={Hrzn:ce(e.offset.x),Vrtc:ce(e.offset.y)}),r.Grad=J(e),r}function te(e){var t={Ptrn:{"Nm  ":e.name||"",Idnt:e.id||""}};return void 0!==e.linked&&(t.Lnkd=!!e.linked),void 0!==e.phase&&(t.phase={Hrzn:e.phase.x,Vrtc:e.phase.y}),t}function re(e){if("H   "in e)return{h:oe(e["H   "]),s:e.Strt,b:e.Brgh};if("Rd  "in e)return{r:e["Rd  "],g:e["Grn "],b:e["Bl  "]};if("Cyn "in e)return{c:e["Cyn "],m:e.Mgnt,y:e["Ylw "],k:e.Blck};if("Gry "in e)return{k:e["Gry "]};if("Lmnc"in e)return{l:e.Lmnc,a:e["A   "],b:e["B   "]};if("redFloat"in e)return{fr:e.redFloat,fg:e.greenFloat,fb:e.blueFloat};throw new Error("Unsupported color descriptor")}function ne(e){if(e){if("r"in e)return{_name:"",_classID:"RGBC","Rd  ":e.r||0,"Grn ":e.g||0,"Bl  ":e.b||0};if("fr"in e)return{_name:"",_classID:"RGBC",redFloat:e.fr,greenFloat:e.fg,blueFloat:e.fb};if("h"in e)return{_name:"",_classID:"HSBC","H   ":le(360*e.h),Strt:e.s||0,Brgh:e.b||0};if("c"in e)return{_name:"",_classID:"CMYC","Cyn ":e.c||0,Mgnt:e.m||0,"Ylw ":e.y||0,Blck:e.k||0};if("l"in e)return{_name:"",_classID:"LABC",Lmnc:e.l||0,"A   ":e.a||0,"B   ":e.b||0};if("k"in e)return{_name:"",_classID:"GRYC","Gry ":e.k};throw new Error("Invalid color value")}return{_name:"",_classID:"RGBC","Rd  ":0,"Grn ":0,"Bl  ":0}}function ie(e){if(void 0===e)return 0;if("Angle"!==e.units)throw new Error("Invalid units: ".concat(e.units));return e.value}function ae(e){if(void 0===e)return 1;if("Percent"!==e.units)throw new Error("Invalid units: ".concat(e.units));return e.value/100}function oe(e){if(void 0===e)return 1;if("Percent"===e.units)return e.value/100;if("Angle"===e.units)return e.value/360;throw new Error("Invalid units: ".concat(e.units))}function se(e){var t=e.units,r=e.value;if("Pixels"!==t&&"Millimeters"!==t&&"Points"!==t&&"None"!==t&&"Picas"!==t&&"Inches"!==t&&"Centimeters"!==t&&"Density"!==t)throw new Error("Invalid units: ".concat(JSON.stringify({units:t,value:r})));return{value:r,units:t}}function le(e){return{units:"Angle",value:e||0}}function ce(e){return{units:"Percent",value:Math.round(100*(e||0))}}function de(e){return{units:"Percent",value:100*(e||0)}}function ue(e,t){if(null==e)return{units:"Pixels",value:0};if("object"!=typeof e)throw new Error("Invalid value: ".concat(JSON.stringify(e)," (key: ").concat(t,") (should have value and units)"));var r=e.units,n=e.value;if("number"!=typeof n)throw new Error("Invalid value in ".concat(JSON.stringify(e)," (key: ").concat(t,")"));if("Pixels"!==r&&"Millimeters"!==r&&"Points"!==r&&"None"!==r&&"Picas"!==r&&"Inches"!==r&&"Centimeters"!==r&&"Density"!==r)throw new Error("Invalid units in ".concat(JSON.stringify(e)," (key: ").concat(t,")"));return{units:r,value:n}}t.readVersionAndDescriptor=function(e,t){void 0===t&&(t=!1);var r=(0,s.readUint32)(e);if(16!==r)throw new Error("Invalid descriptor version: ".concat(r));return L(e,t)},t.writeVersionAndDescriptor=function(e,t,r,n,i){void 0===i&&(i=""),(0,l.writeUint32)(e,16),O(e,t,r,n,i)},t.horzVrtcToXY=z,t.xyToHorzVrtc=G,t.descBoundsToBounds=function(e){return{top:se(e["Top "]),left:se(e.Left),right:se(e.Rght),bottom:se(e.Btom)}},t.boundsToDescBounds=function(e){var t;return(t={Left:ue(e.left,"bounds.left")})["Top "]=ue(e.top,"bounds.top"),t.Rght=ue(e.right,"bounds.right"),t.Btom=ue(e.bottom,"bounds.bottom"),t},t.serializeEffects=W,t.parseEffects=H,t.parseTrackList=function(e,r){for(var n=[],i=0;i<e.length;i++){var a=e[i],o={type:t.stdTrackID.decode(a.trackID),enabled:a.enab,keys:X(a.keyList,r)};a.effectParams&&(o.effectParams={fillCanvas:a.effectParams.fillCanvas,zoomOrigin:a.effectParams.zoomOrigin,keys:X(a.effectParams.keyList,r)}),n.push(o)}return n},t.serializeTrackList=function(e){for(var r=[],i=0;i<e.length;i++){var a=e[i];r.push(n(n({trackID:t.stdTrackID.encode(a.type),Vrsn:1,enab:!!a.enabled,Effc:!!a.effectParams},a.effectParams?{effectParams:{keyList:Y(a.keys),fillCanvas:a.effectParams.fillCanvas,zoomOrigin:a.effectParams.zoomOrigin}}:{}),{keyList:Y(a.keys)}))}return r},t.parseVectorContent=function(e){if("Grad"in e)return Q(e);if("Ptrn"in e)return n({type:"pattern"},$(e));if("Clr "in e)return{type:"color",color:re(e["Clr "])};throw new Error("Invalid vector content")},t.serializeVectorContent=function(e){return"color"===e.type?{key:"SoCo",descriptor:{"Clr ":ne(e.color)}}:"pattern"===e.type?{key:"PtFl",descriptor:te(e)}:{key:"GdFl",descriptor:ee(e)}},t.parseColor=re,t.serializeColor=ne,t.parseAngle=ie,t.parsePercent=ae,t.parsePercentOrAngle=oe,t.parseUnits=se,t.parseUnitsOrNumber=function(e,t){return void 0===t&&(t="Pixels"),"number"==typeof e?{value:e,units:t}:se(e)},t.parseUnitsToNumber=function(e,t){var r=e.units,n=e.value;if(r!==t)throw new Error("Invalid units: ".concat(JSON.stringify({units:r,value:n})));return n},t.unitsAngle=le,t.unitsPercent=ce,t.unitsPercentF=de,t.unitsValue=ue,t.frac=function(e){return{numerator:e.numerator,denominator:e.denominator}},t.textGridding=(0,o.createEnum)("textGridding","none",{none:"None",round:"Rnd "}),t.Ornt=(0,o.createEnum)("Ornt","horizontal",{horizontal:"Hrzn",vertical:"Vrtc"}),t.Annt=(0,o.createEnum)("Annt","sharp",{none:"Anno",sharp:"antiAliasSharp",crisp:"AnCr",strong:"AnSt",smooth:"AnSm",platform:"antiAliasPlatformGray",platformLCD:"antiAliasPlatformLCD"}),t.warpStyle=(0,o.createEnum)("warpStyle","none",{none:"warpNone",arc:"warpArc",arcLower:"warpArcLower",arcUpper:"warpArcUpper",arch:"warpArch",bulge:"warpBulge",shellLower:"warpShellLower",shellUpper:"warpShellUpper",flag:"warpFlag",wave:"warpWave",fish:"warpFish",rise:"warpRise",fisheye:"warpFisheye",inflate:"warpInflate",squeeze:"warpSqueeze",twist:"warpTwist",cylinder:"warpCylinder",custom:"warpCustom"}),t.BlnM=(0,o.createEnum)("BlnM","normal",{normal:"Nrml",dissolve:"Dslv",darken:"Drkn",multiply:"Mltp","color burn":"CBrn","linear burn":"linearBurn","darker color":"darkerColor",lighten:"Lghn",screen:"Scrn","color dodge":"CDdg","linear dodge":"linearDodge","lighter color":"lighterColor",overlay:"Ovrl","soft light":"SftL","hard light":"HrdL","vivid light":"vividLight","linear light":"linearLight","pin light":"pinLight","hard mix":"hardMix",difference:"Dfrn",exclusion:"Xclu",subtract:"blendSubtraction",divide:"blendDivide",hue:"H   ",saturation:"Strt",color:"Clr ",luminosity:"Lmns","linear height":"linearHeight",height:"Hght",subtraction:"Sbtr"}),t.BESl=(0,o.createEnum)("BESl","inner bevel",{"inner bevel":"InrB","outer bevel":"OtrB",emboss:"Embs","pillow emboss":"PlEb","stroke emboss":"strokeEmboss"}),t.bvlT=(0,o.createEnum)("bvlT","smooth",{smooth:"SfBL","chisel hard":"PrBL","chisel soft":"Slmt"}),t.BESs=(0,o.createEnum)("BESs","up",{up:"In  ",down:"Out "}),t.BETE=(0,o.createEnum)("BETE","softer",{softer:"SfBL",precise:"PrBL"}),t.IGSr=(0,o.createEnum)("IGSr","edge",{edge:"SrcE",center:"SrcC"}),t.GrdT=(0,o.createEnum)("GrdT","linear",{linear:"Lnr ",radial:"Rdl ",angle:"Angl",reflected:"Rflc",diamond:"Dmnd"}),t.animInterpStyleEnum=(0,o.createEnum)("animInterpStyle","linear",{linear:"Lnr ",hold:"hold"}),t.stdTrackID=(0,o.createEnum)("stdTrackID","opacity",{opacity:"opacityTrack",style:"styleTrack",sheetTransform:"sheetTransformTrack",sheetPosition:"sheetPositionTrack",globalLighting:"globalLightingTrack"}),t.gradientInterpolationMethodType=(0,o.createEnum)("gradientInterpolationMethodType","perceptual",{perceptual:"Perc",linear:"Lnr",classic:"Gcls"}),t.ClrS=(0,o.createEnum)("ClrS","rgb",{rgb:"RGBC",hsb:"HSBl",lab:"LbCl",hsl:"HSLC"}),t.FStl=(0,o.createEnum)("FStl","outside",{outside:"OutF",center:"CtrF",inside:"InsF"}),t.FrFl=(0,o.createEnum)("FrFl","color",{color:"SClr",gradient:"GrFl",pattern:"Ptrn"}),t.ESliceType=(0,o.createEnum)("ESliceType","image",{image:"Img ",noImage:"noImage"}),t.ESliceHorzAlign=(0,o.createEnum)("ESliceHorzAlign","default",{default:"default"}),t.ESliceVertAlign=(0,o.createEnum)("ESliceVertAlign","default",{default:"default"}),t.ESliceOrigin=(0,o.createEnum)("ESliceOrigin","userGenerated",{userGenerated:"userGenerated",autoGenerated:"autoGenerated",layer:"layer"}),t.ESliceBGColorType=(0,o.createEnum)("ESliceBGColorType","none",{none:"None",matte:"matte",color:"Clr "}),t.strokeStyleLineCapType=(0,o.createEnum)("strokeStyleLineCapType","butt",{butt:"strokeStyleButtCap",round:"strokeStyleRoundCap",square:"strokeStyleSquareCap"}),t.strokeStyleLineJoinType=(0,o.createEnum)("strokeStyleLineJoinType","miter",{miter:"strokeStyleMiterJoin",round:"strokeStyleRoundJoin",bevel:"strokeStyleBevelJoin"}),t.strokeStyleLineAlignment=(0,o.createEnum)("strokeStyleLineAlignment","inside",{inside:"strokeStyleAlignInside",center:"strokeStyleAlignCenter",outside:"strokeStyleAlignOutside"}),t.BlrM=(0,o.createEnum)("BlrM","ispinmage",{spin:"Spn ",zoom:"Zm  "}),t.BlrQ=(0,o.createEnum)("BlrQ","good",{draft:"Drft",good:"Gd  ",best:"Bst "}),t.SmBM=(0,o.createEnum)("SmBM","normal",{normal:"SBMN","edge only":"SBME","overlay edge":"SBMO"}),t.SmBQ=(0,o.createEnum)("SmBQ","medium",{low:"SBQL",medium:"SBQM",high:"SBQH"}),t.DspM=(0,o.createEnum)("DspM","stretch to fit",{"stretch to fit":"StrF",tile:"Tile"}),t.UndA=(0,o.createEnum)("UndA","repeat edge pixels",{"wrap around":"WrpA","repeat edge pixels":"RptE"}),t.Cnvr=(0,o.createEnum)("Cnvr","rectangular to polar",{"rectangular to polar":"RctP","polar to rectangular":"PlrR"}),t.RplS=(0,o.createEnum)("RplS","medium",{small:"Sml ",medium:"Mdm ",large:"Lrg "}),t.SphM=(0,o.createEnum)("SphM","normal",{normal:"Nrml","horizontal only":"HrzO","vertical only":"VrtO"}),t.Wvtp=(0,o.createEnum)("Wvtp","sine",{sine:"WvSn",triangle:"WvTr",square:"WvSq"}),t.ZZTy=(0,o.createEnum)("ZZTy","pond ripples",{"around center":"ArnC","out from center":"OtFr","pond ripples":"PndR"}),t.Dstr=(0,o.createEnum)("Dstr","uniform",{uniform:"Unfr",gaussian:"Gsn "}),t.Chnl=(0,o.createEnum)("Chnl","composite",{red:"Rd  ",green:"Grn ",blue:"Bl  ",composite:"Cmps"}),t.MztT=(0,o.createEnum)("MztT","fine dots",{"fine dots":"FnDt","medium dots":"MdmD","grainy dots":"GrnD","coarse dots":"CrsD","short lines":"ShrL","medium lines":"MdmL","long lines":"LngL","short strokes":"ShSt","medium strokes":"MdmS","long strokes":"LngS"}),t.Lns=(0,o.createEnum)("Lns ","50-300mm zoom",{"50-300mm zoom":"Zm  ","32mm prime":"Nkn ","105mm prime":"Nkn1","movie prime":"PnVs"}),t.blurType=(0,o.createEnum)("blurType","gaussian blur",{"gaussian blur":"GsnB","lens blur":"lensBlur","motion blur":"MtnB"}),t.DfsM=(0,o.createEnum)("DfsM","normal",{normal:"Nrml","darken only":"DrkO","lighten only":"LghO",anisotropic:"anisotropic"}),t.ExtT=(0,o.createEnum)("ExtT","blocks",{blocks:"Blks",pyramids:"Pyrm"}),t.ExtR=(0,o.createEnum)("ExtR","random",{random:"Rndm","level-based":"LvlB"}),t.FlCl=(0,o.createEnum)("FlCl","background color",{"background color":"FlBc","foreground color":"FlFr","inverse image":"FlIn","unaltered image":"FlSm"}),t.CntE=(0,o.createEnum)("CntE","upper",{lower:"Lwr ",upper:"Upr "}),t.WndM=(0,o.createEnum)("WndM","wind",{wind:"Wnd ",blast:"Blst",stagger:"Stgr"}),t.Drct=(0,o.createEnum)("Drct","from the right",{left:"Left",right:"Rght"}),t.IntE=(0,o.createEnum)("IntE","odd lines",{"odd lines":"ElmO","even lines":"ElmE"}),t.IntC=(0,o.createEnum)("IntC","interpolation",{duplication:"CrtD",interpolation:"CrtI"}),t.FlMd=(0,o.createEnum)("FlMd","wrap around",{"set to transparent":"Bckg","repeat edge pixels":"Rpt ","wrap around":"Wrp "}),t.prjM=(0,o.createEnum)("prjM","fisheye",{fisheye:"fisP",perspective:"perP",auto:"auto","full spherical":"fusP"})},34:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writeEffects=t.readEffects=void 0;var n=r(534),i=r(854),a=r(206),o=[void 0,"outer bevel","inner bevel","emboss","pillow emboss","stroke emboss"];function s(e){return(0,i.checkSignature)(e,"8BIM"),n.toBlendMode[(0,i.readSignature)(e)]||"normal"}function l(e,t){(0,a.writeSignature)(e,"8BIM"),(0,a.writeSignature)(e,n.fromBlendMode[t]||"norm")}function c(e){return(0,i.readUint8)(e)/255}function d(e,t){(0,a.writeUint8)(e,0|Math.round(255*t))}function u(e,t){var r;(0,a.writeUint32)(e,51),(0,a.writeUint32)(e,2),(0,a.writeFixedPoint32)(e,t.size&&t.size.value||0),(0,a.writeFixedPoint32)(e,0),(0,a.writeFixedPoint32)(e,t.angle||0),(0,a.writeFixedPoint32)(e,t.distance&&t.distance.value||0),(0,a.writeColor)(e,t.color),l(e,t.blendMode),(0,a.writeUint8)(e,t.enabled?1:0),(0,a.writeUint8)(e,t.useGlobalLight?1:0),d(e,null!==(r=t.opacity)&&void 0!==r?r:1),(0,a.writeColor)(e,t.color)}t.readEffects=function(e){var t=(0,i.readUint16)(e);if(0!==t)throw new Error("Invalid effects layer version: ".concat(t));for(var r=(0,i.readUint16)(e),n={},a=0;a<r;a++){(0,i.checkSignature)(e,"8BIM");var l=(0,i.readSignature)(e);switch(l){case"cmnS":var d=(0,i.readUint32)(e),u=(0,i.readUint32)(e),f=!!(0,i.readUint8)(e);if((0,i.skipBytes)(e,2),7!==d||0!==u||!f)throw new Error("Invalid effects common state");break;case"dsdw":case"isdw":var p=(0,i.readUint32)(e),h=(0,i.readUint32)(e);if(41!==p&&51!==p)throw new Error("Invalid shadow size: ".concat(p));if(0!==h&&2!==h)throw new Error("Invalid shadow version: ".concat(h));d=(0,i.readFixedPoint32)(e),(0,i.readFixedPoint32)(e);var g=(0,i.readFixedPoint32)(e),m=(0,i.readFixedPoint32)(e),v=(0,i.readColor)(e),y=s(e),w=!!(0,i.readUint8)(e),b=!!(0,i.readUint8)(e),S=c(e);p>=51&&(0,i.readColor)(e);var I={size:{units:"Pixels",value:d},distance:{units:"Pixels",value:m},angle:g,color:v,blendMode:y,enabled:w,useGlobalLight:b,opacity:S};"dsdw"===l?n.dropShadow=[I]:n.innerShadow=[I];break;case"oglw":p=(0,i.readUint32)(e);var k=(0,i.readUint32)(e);if(32!==p&&42!==p)throw new Error("Invalid outer glow size: ".concat(p));if(0!==k&&2!==k)throw new Error("Invalid outer glow version: ".concat(k));d=(0,i.readFixedPoint32)(e),(0,i.readFixedPoint32)(e),v=(0,i.readColor)(e),y=s(e),w=!!(0,i.readUint8)(e),S=c(e),p>=42&&(0,i.readColor)(e),n.outerGlow={size:{units:"Pixels",value:d},color:v,blendMode:y,enabled:w,opacity:S};break;case"iglw":p=(0,i.readUint32)(e);var F=(0,i.readUint32)(e);if(32!==p&&43!==p)throw new Error("Invalid inner glow size: ".concat(p));if(0!==F&&2!==F)throw new Error("Invalid inner glow version: ".concat(F));d=(0,i.readFixedPoint32)(e),(0,i.readFixedPoint32)(e),v=(0,i.readColor)(e),y=s(e),w=!!(0,i.readUint8)(e),S=c(e),p>=43&&((0,i.readUint8)(e),(0,i.readColor)(e)),n.innerGlow={size:{units:"Pixels",value:d},color:v,blendMode:y,enabled:w,opacity:S};break;case"bevl":p=(0,i.readUint32)(e);var D=(0,i.readUint32)(e);if(58!==p&&78!==p)throw new Error("Invalid bevel size: ".concat(p));if(0!==D&&2!==D)throw new Error("Invalid bevel version: ".concat(D));g=(0,i.readFixedPoint32)(e);var C=(0,i.readFixedPoint32)(e),P=(d=(0,i.readFixedPoint32)(e),s(e)),U=s(e),M=(0,i.readColor)(e),A=(0,i.readColor)(e),x=o[(0,i.readUint8)(e)]||"inner bevel",E=c(e),L=c(e),O=(w=!!(0,i.readUint8)(e),b=!!(0,i.readUint8)(e),(0,i.readUint8)(e)?"down":"up");p>=78&&((0,i.readColor)(e),(0,i.readColor)(e)),n.bevel={size:{units:"Pixels",value:d},angle:g,strength:C,highlightBlendMode:P,shadowBlendMode:U,highlightColor:M,shadowColor:A,style:x,highlightOpacity:E,shadowOpacity:L,enabled:w,useGlobalLight:b,direction:O};break;case"sofi":d=(0,i.readUint32)(e);var B=(0,i.readUint32)(e);if(34!==d)throw new Error("Invalid effects solid fill info size: ".concat(d));if(2!==B)throw new Error("Invalid effects solid fill info version: ".concat(B));y=s(e),v=(0,i.readColor)(e),S=c(e),w=!!(0,i.readUint8)(e),(0,i.readColor)(e),n.solidFill=[{blendMode:y,color:v,opacity:S,enabled:w}];break;default:throw new Error("Invalid effect type: '".concat(l,"'"))}}return n},t.writeEffects=function(e,t){var r,n,i,s,c,f,p=null===(r=t.dropShadow)||void 0===r?void 0:r[0],h=null===(n=t.innerShadow)||void 0===n?void 0:n[0],g=t.outerGlow,m=t.innerGlow,v=t.bevel,y=null===(i=t.solidFill)||void 0===i?void 0:i[0],w=1;if(p&&w++,h&&w++,g&&w++,m&&w++,v&&w++,y&&w++,(0,a.writeUint16)(e,0),(0,a.writeUint16)(e,w),(0,a.writeSignature)(e,"8BIM"),(0,a.writeSignature)(e,"cmnS"),(0,a.writeUint32)(e,7),(0,a.writeUint32)(e,0),(0,a.writeUint8)(e,1),(0,a.writeZeros)(e,2),p&&((0,a.writeSignature)(e,"8BIM"),(0,a.writeSignature)(e,"dsdw"),u(e,p)),h&&((0,a.writeSignature)(e,"8BIM"),(0,a.writeSignature)(e,"isdw"),u(e,h)),g&&((0,a.writeSignature)(e,"8BIM"),(0,a.writeSignature)(e,"oglw"),(0,a.writeUint32)(e,42),(0,a.writeUint32)(e,2),(0,a.writeFixedPoint32)(e,(null===(s=g.size)||void 0===s?void 0:s.value)||0),(0,a.writeFixedPoint32)(e,0),(0,a.writeColor)(e,g.color),l(e,g.blendMode),(0,a.writeUint8)(e,g.enabled?1:0),d(e,g.opacity||0),(0,a.writeColor)(e,g.color)),m&&((0,a.writeSignature)(e,"8BIM"),(0,a.writeSignature)(e,"iglw"),(0,a.writeUint32)(e,43),(0,a.writeUint32)(e,2),(0,a.writeFixedPoint32)(e,(null===(c=m.size)||void 0===c?void 0:c.value)||0),(0,a.writeFixedPoint32)(e,0),(0,a.writeColor)(e,m.color),l(e,m.blendMode),(0,a.writeUint8)(e,m.enabled?1:0),d(e,m.opacity||0),(0,a.writeUint8)(e,0),(0,a.writeColor)(e,m.color)),v){(0,a.writeSignature)(e,"8BIM"),(0,a.writeSignature)(e,"bevl"),(0,a.writeUint32)(e,78),(0,a.writeUint32)(e,2),(0,a.writeFixedPoint32)(e,v.angle||0),(0,a.writeFixedPoint32)(e,v.strength||0),(0,a.writeFixedPoint32)(e,(null===(f=v.size)||void 0===f?void 0:f.value)||0),l(e,v.highlightBlendMode),l(e,v.shadowBlendMode),(0,a.writeColor)(e,v.highlightColor),(0,a.writeColor)(e,v.shadowColor);var b=o.indexOf(v.style);(0,a.writeUint8)(e,b<=0?1:b),d(e,v.highlightOpacity||0),d(e,v.shadowOpacity||0),(0,a.writeUint8)(e,v.enabled?1:0),(0,a.writeUint8)(e,v.useGlobalLight?1:0),(0,a.writeUint8)(e,"down"===v.direction?1:0),(0,a.writeColor)(e,v.highlightColor),(0,a.writeColor)(e,v.shadowColor)}y&&((0,a.writeSignature)(e,"8BIM"),(0,a.writeSignature)(e,"sofi"),(0,a.writeUint32)(e,34),(0,a.writeUint32)(e,2),l(e,y.blendMode),(0,a.writeColor)(e,y.color),d(e,y.opacity||0),(0,a.writeUint8)(e,y.enabled?1:0),(0,a.writeColor)(e,y.color))}},515:(e,t)=>{"use strict";function r(e){return 32===e||10===e||13===e||9===e}function n(e){return e>=48&&e<=57||46===e||45===e}Object.defineProperty(t,"__esModule",{value:!0}),t.serializeEngineData=t.parseEngineData=void 0,t.parseEngineData=function(e){var t=0;function i(){for(;t<e.length&&r(e[t]);)t++}function a(){var r=e[t];return t++,92===r&&(r=e[t],t++),r}function o(){var r="";if(41===e[t])return t++,r;if(254!==e[t]||255!==e[t+1])throw new Error("Invalid utf-16 BOM");for(t+=2;t<e.length&&41!==e[t];){var n=a()<<8|a();r+=String.fromCharCode(n)}return t++,r}var s=null,l=[];function c(e){l.length?(d(e),l.push(e)):(l.push(e),s=e)}function d(e){if(!l.length)throw new Error("Invalid data");var t=l[l.length-1];if("string"==typeof t)l[l.length-2][t]=e,f();else{if(!Array.isArray(t))throw new Error("Invalid data");t.push(e)}}function u(e){l.length||c({});var t=l[l.length-1];if(t&&"string"==typeof t)d("nil"===e?null:"/".concat(e));else{if(!t||"object"!=typeof t)throw new Error("Invalid data");l.push(e)}}function f(){if(!l.length)throw new Error("Invalid data");l.pop()}for(i();t<e.length;){var p=t,h=e[p];if(60===h&&60===e[p+1])t+=2,c({});else if(62===h&&62===e[p+1])t+=2,f();else if(47===h){for(var g=t+=1;t<e.length&&!r(e[t]);)t++;for(var m="",v=g;v<t;v++)m+=String.fromCharCode(e[v]);u(m)}else if(40===h)t+=1,d(o());else if(91===h)t+=1,c([]);else if(93===h)t+=1,f();else if(110===h&&117===e[p+1]&&108===e[p+2]&&108===e[p+3])t+=4,d(null);else if(116===h&&114===e[p+1]&&117===e[p+2]&&101===e[p+3])t+=4,d(!0);else if(102===h&&97===e[p+1]&&108===e[p+2]&&115===e[p+3]&&101===e[p+4])t+=5,d(!1);else if(n(h)){for(var y="";t<e.length&&n(e[t]);)y+=String.fromCharCode(e[t]),t++;d(parseFloat(y))}else t+=1,console.log("Invalid token ".concat(String.fromCharCode(h)," at ").concat(t));i()}return s};var i=["Axis","XY","Zone","WordSpacing","FirstLineIndent","GlyphSpacing","StartIndent","EndIndent","SpaceBefore","SpaceAfter","LetterSpacing","Values","GridSize","GridLeading","PointBase","BoxBounds","TransformPoint0","TransformPoint1","TransformPoint2","FontSize","Leading","HorizontalScale","VerticalScale","BaselineShift","Tsume","OutlineWidth","AutoLeading"],a=["RunLengthArray"];t.serializeEngineData=function(e,t){void 0===t&&(t=!1);var r=new Uint8Array(1024),n=0,o=0;function s(e){if(n>=r.length){var t=new Uint8Array(2*r.length);t.set(r),r=t}r[n]=e,n++}function l(e){for(var t=0;t<e.length;t++)s(e.charCodeAt(t))}function c(){if(t)l(" ");else for(var e=0;e<o;e++)l("\t")}function d(e,r){c(),l("/".concat(e)),g(r,e,!0),t||l("\n")}function u(e){return e.toFixed(5).replace(/(\d)0+$/g,"$1").replace(/^0+\.([1-9])/g,".$1").replace(/^-0+\.0(\d)/g,"-.0$1")}function f(e,t){return t&&-1!==i.indexOf(t)||(0|e)!==e?u(e):function(e){return e.toString()}(e)}function p(e){var t=Object.keys(e);return-1!==t.indexOf("98")&&t.unshift.apply(t,t.splice(t.indexOf("99"),1)),-1!==t.indexOf("99")&&t.unshift.apply(t,t.splice(t.indexOf("99"),1)),t}function h(e){40!==e&&41!==e&&92!==e||s(92),s(e)}function g(e,r,n){function i(){n?l(" "):c()}if(void 0===n&&(n=!1),null===e)i(),l(t?"/nil":"null");else if("number"==typeof e)i(),l(f(e,r));else if("boolean"==typeof e)i(),l(e?"true":"false");else if("string"==typeof e)if(i(),"99"!==r&&"98"!==r||"/"!==e.charAt(0)){l("("),s(254),s(255);for(var m=0;m<e.length;m++){var v=e.charCodeAt(m);h(v>>8&255),h(255&v)}l(")")}else l(e);else if(Array.isArray(e))if(i(),e.every((function(e){return"number"==typeof e}))){l("[");for(var y=-1!==a.indexOf(r),w=0,b=e;w<b.length;w++){var S=b[w];l(" "),l(y?f(S):u(S))}l(" ]")}else{l("["),t||l("\n");for(var I=0,k=e;I<k.length;I++)g(S=k[I],r),t||l("\n");c(),l("]")}else if("object"==typeof e){n&&!t&&l("\n"),c(),l("<<"),t||l("\n"),o++;for(var F=0,D=p(e);F<D.length;F++){var C=D[F];d(C,e[C])}o--,c(),l(">>")}}if(t){if("object"==typeof e)for(var m=0,v=p(e);m<v.length;m++){var y=v[m];d(y,e[y])}}else l("\n\n"),g(e);return r.slice(0,n)}},534:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeCanvas=t.createImageData=t.createCanvasFromData=t.createCanvas=t.writeDataZipWithoutPrediction=t.writeDataRLE=t.writeDataRaw=t.decodeBitmap=t.resetImageData=t.hasAlpha=t.clamp=t.offsetForChannel=t.Compression=t.ChannelID=t.MaskParams=t.LayerMaskFlags=t.ColorSpace=t.createEnum=t.revMap=t.largeAdditionalInfoKeys=t.layerColors=t.toBlendMode=t.fromBlendMode=t.RAW_IMAGE_DATA=t.MOCK_HANDLERS=void 0;var n,i,a,o,s,l=r(238),c=r(331);function d(e){var t={};return Object.keys(e).forEach((function(r){return t[e[r]]=r})),t}t.MOCK_HANDLERS=!1,t.RAW_IMAGE_DATA=!1,t.fromBlendMode={},t.toBlendMode={pass:"pass through",norm:"normal",diss:"dissolve",dark:"darken","mul ":"multiply",idiv:"color burn",lbrn:"linear burn",dkCl:"darker color",lite:"lighten",scrn:"screen","div ":"color dodge",lddg:"linear dodge",lgCl:"lighter color",over:"overlay",sLit:"soft light",hLit:"hard light",vLit:"vivid light",lLit:"linear light",pLit:"pin light",hMix:"hard mix",diff:"difference",smud:"exclusion",fsub:"subtract",fdiv:"divide","hue ":"hue","sat ":"saturation",colr:"color","lum ":"luminosity"},Object.keys(t.toBlendMode).forEach((function(e){return t.fromBlendMode[t.toBlendMode[e]]=e})),t.layerColors=["none","red","orange","yellow","green","blue","violet","gray"],t.largeAdditionalInfoKeys=["LMsk","Lr16","Lr32","Layr","Mt16","Mt32","Mtrn","Alph","FMsk","lnk2","FEid","FXid","PxSD","cinf"],t.revMap=d,t.createEnum=function(e,t,r){var n=d(r);return{decode:function(e){var r=e.split(".")[1];if(r&&!n[r])throw new Error("Unrecognized value for enum: '".concat(e,"'"));return n[r]||t},encode:function(n){if(n&&!r[n])throw new Error("Invalid value for enum: '".concat(n,"'"));return"".concat(e,".").concat(r[n]||r[t])}}},(s=t.ColorSpace||(t.ColorSpace={}))[s.RGB=0]="RGB",s[s.HSB=1]="HSB",s[s.CMYK=2]="CMYK",s[s.Lab=7]="Lab",s[s.Grayscale=8]="Grayscale",(o=t.LayerMaskFlags||(t.LayerMaskFlags={}))[o.PositionRelativeToLayer=1]="PositionRelativeToLayer",o[o.LayerMaskDisabled=2]="LayerMaskDisabled",o[o.InvertLayerMaskWhenBlending=4]="InvertLayerMaskWhenBlending",o[o.LayerMaskFromRenderingOtherData=8]="LayerMaskFromRenderingOtherData",o[o.MaskHasParametersAppliedToIt=16]="MaskHasParametersAppliedToIt",(a=t.MaskParams||(t.MaskParams={}))[a.UserMaskDensity=1]="UserMaskDensity",a[a.UserMaskFeather=2]="UserMaskFeather",a[a.VectorMaskDensity=4]="VectorMaskDensity",a[a.VectorMaskFeather=8]="VectorMaskFeather",(i=t.ChannelID||(t.ChannelID={}))[i.Color0=0]="Color0",i[i.Color1=1]="Color1",i[i.Color2=2]="Color2",i[i.Color3=3]="Color3",i[i.Transparency=-1]="Transparency",i[i.UserMask=-2]="UserMask",i[i.RealUserMask=-3]="RealUserMask",(n=t.Compression||(t.Compression={}))[n.RawData=0]="RawData",n[n.RleCompressed=1]="RleCompressed",n[n.ZipWithoutPrediction=2]="ZipWithoutPrediction",n[n.ZipWithPrediction=3]="ZipWithPrediction",t.offsetForChannel=function(e,t){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return t?3:e+1;case-1:return t?4:3;default:return e+1}},t.clamp=function(e,t,r){return e<t?t:e>r?r:e},t.hasAlpha=function(e){for(var t=e.width*e.height*4,r=3;r<t;r+=4)if(255!==e.data[r])return!0;return!1},t.resetImageData=function(e){for(var t=e.data,r=new Uint32Array(t.buffer),n=0|r.length,i=0;i<n;i=i+1|0)r[i]=4278190080},t.decodeBitmap=function(e,t,r,n){for(var i=0,a=0,o=0;i<n;i++)for(var s=0;s<r;)for(var l=e[o++],c=0;c<8&&s<r;c++,s++){var d=128&l?0:255;l<<=1,t[a++]=d,t[a++]=d,t[a++]=d,t[a++]=255}},t.writeDataRaw=function(e,t,r,n){if(r&&n){for(var i=new Uint8Array(r*n),a=0;a<i.length;a++)i[a]=e.data[4*a+t];return i}},t.writeDataRLE=function(e,t,r,n){var i=t.data,a=t.width,o=t.height;if(a&&o){for(var s=4*a|0,l=0,c=r.length*(n?4:2)*o|0,d=0,u=r;d<u.length;d++)for(var f=u[d],p=0,h=0|f;p<o;p++){var g=p*s|0,m=g+s|0,v=m+f-4|0,y=v-4|0,w=c;for(h=g+f|0;h<m;h=h+4|0)if(h<y){var b=i[h],S=i[h=h+4|0],I=i[h=h+4|0];if(b===S&&b===I){for(var k=3;k<128&&h<v&&i[h+4|0]===b;)k=k+1|0,h=h+4|0;e[c++]=1-k,e[c++]=b}else{var F=c,D=!0;for(k=1,e[c++]=0,e[c++]=b;h<v&&k<128;){if(b=S,S=I,I=i[h=h+4|0],b===S&&b===I){h=h-12|0,D=!1;break}k++,e[c++]=b}D&&(k<127?(e[c++]=S,e[c++]=I,k+=2):k<128?(e[c++]=S,k++,h=h-4|0):h=h-8|0),e[F]=k-1}}else h===v?(e[c++]=0,e[c++]=i[h]):(e[c++]=1,e[c++]=i[h],h=h+4|0,e[c++]=i[h]);var C=c-w;n&&(e[l++]=C>>24&255,e[l++]=C>>16&255),e[l++]=C>>8&255,e[l++]=255&C}return e.slice(0,c)}},t.writeDataZipWithoutPrediction=function(e,t){for(var r=e.data,n=e.width*e.height,i=new Uint8Array(n),a=[],o=0,s=0,l=t;s<l.length;s++){for(var d=0,u=p=l[s];d<n;d++,u+=4)i[d]=r[u];var f=(0,c.deflate)(i);a.push(f),o+=f.byteLength}if(a.length>0){f=new Uint8Array(o);for(var p=0,h=0,g=a;h<g.length;h++){var m=g[h];f.set(m,p),p+=m.byteLength}return f}return a[0]},t.createCanvas=function(){throw new Error("Canvas not initialized, use initializeCanvas method to set up createCanvas method")},t.createCanvasFromData=function(){throw new Error("Canvas not initialized, use initializeCanvas method to set up createCanvasFromData method")};var u=void 0;t.createImageData=function(e,r){return u||(u=(0,t.createCanvas)(1,1)),u.getContext("2d").createImageData(e,r)},"undefined"!=typeof document&&(t.createCanvas=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,r},t.createCanvasFromData=function(e){var t=new Image;t.src="data:image/jpeg;base64,"+(0,l.fromByteArray)(e);var r=document.createElement("canvas");return r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(t,0,0),r}),t.initializeCanvas=function(e,r,n){t.createCanvas=e,t.createCanvasFromData=r||t.createCanvasFromData,t.createImageData=n||t.createImageData}},609:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.resourceHandlersMap=t.resourceHandlers=void 0;var i=r(238),a=r(854),o=r(206),s=r(534),l=r(443),c=r(30);function d(e,r,n,i){var a={key:e,has:r,read:n,write:i};t.resourceHandlers.push(a),t.resourceHandlersMap[a.key]=a}t.resourceHandlers=[],t.resourceHandlersMap={};var u=[void 0,"PPI","PPCM"],f=[void 0,"Inches","Centimeters","Points","Picas","Columns"],p="0123456789abcdef";function h(e){return e<=57?e-48:e-87}function g(e,t){var r=(0,a.readBytes)(e,t);return(0,l.decodeString)(r)}function m(e,t){var r=(0,l.encodeString)(t);(0,o.writeBytes)(e,r)}s.MOCK_HANDLERS&&d(1028,(function(e){return void 0!==e._ir1028}),(function(e,t,r){t._ir1028=(0,a.readBytes)(e,r())}),(function(e,t){(0,o.writeBytes)(e,t._ir1028)})),d(1061,(function(e){return void 0!==e.captionDigest}),(function(e,t){for(var r="",n=0;n<16;n++){var i=(0,a.readUint8)(e);r+=p[i>>4],r+=p[15&i]}t.captionDigest=r}),(function(e,t){for(var r=0;r<16;r++)(0,o.writeUint8)(e,(i=2*r,h((n=t.captionDigest).charCodeAt(i))<<4|h(n.charCodeAt(i+1))));var n,i})),d(1060,(function(e){return void 0!==e.xmpMetadata}),(function(e,t,r){return t.xmpMetadata=g(e,r())}),(function(e,t){return m(e,t.xmpMetadata)}));var v=(0,s.createEnum)("Inte","perceptual",{perceptual:"Img ",saturation:"Grp ","relative colorimetric":"Clrm","absolute colorimetric":"AClr"});d(1082,(function(e){return void 0!==e.printInformation}),(function(e,t){var r,n,i=(0,c.readVersionAndDescriptor)(e);t.printInformation={printerName:i.printerName||"",renderingIntent:v.decode(null!==(r=i.Inte)&&void 0!==r?r:"Inte.Img ")};var a=t.printInformation;void 0!==i.PstS&&(a.printerManagesColors=i.PstS),void 0!==i["Nm  "]&&(a.printerProfile=i["Nm  "]),void 0!==i.MpBl&&(a.blackPointCompensation=i.MpBl),void 0!==i.printSixteenBit&&(a.printSixteenBit=i.printSixteenBit),void 0!==i.hardProof&&(a.hardProof=i.hardProof),i.printProofSetup&&("Bltn"in i.printProofSetup?a.proofSetup={builtin:i.printProofSetup.Bltn.split(".")[1]}:a.proofSetup={profile:i.printProofSetup.profile,renderingIntent:v.decode(null!==(n=i.printProofSetup.Inte)&&void 0!==n?n:"Inte.Img "),blackPointCompensation:!!i.printProofSetup.MpBl,paperWhite:!!i.printProofSetup.paperWhite})}),(function(e,t){var r,n,i=t.printInformation,a={};i.printerManagesColors?a.PstS=!0:(void 0!==i.hardProof&&(a.hardProof=!!i.hardProof),a.ClrS="ClrS.RGBC",a["Nm  "]=null!==(r=i.printerProfile)&&void 0!==r?r:"CIE RGB"),a.Inte=v.encode(i.renderingIntent),i.printerManagesColors||(a.MpBl=!!i.blackPointCompensation),a.printSixteenBit=!!i.printSixteenBit,a.printerName=i.printerName||"",i.proofSetup&&"profile"in i.proofSetup?a.printProofSetup={profile:i.proofSetup.profile||"",Inte:v.encode(i.proofSetup.renderingIntent),MpBl:!!i.proofSetup.blackPointCompensation,paperWhite:!!i.proofSetup.paperWhite}:a.printProofSetup={Bltn:(null===(n=i.proofSetup)||void 0===n?void 0:n.builtin)?"builtinProof.".concat(i.proofSetup.builtin):"builtinProof.proofCMYK"},(0,c.writeVersionAndDescriptor)(e,"","printOutput",a)})),s.MOCK_HANDLERS&&d(1083,(function(e){return void 0!==e._ir1083}),(function(e,t,r){t._ir1083=(0,a.readBytes)(e,r())}),(function(e,t){(0,o.writeBytes)(e,t._ir1083)})),d(1005,(function(e){return void 0!==e.resolutionInfo}),(function(e,t){var r=(0,a.readFixedPoint32)(e),n=(0,a.readUint16)(e),i=(0,a.readUint16)(e),o=(0,a.readFixedPoint32)(e),s=(0,a.readUint16)(e),l=(0,a.readUint16)(e);t.resolutionInfo={horizontalResolution:r,horizontalResolutionUnit:u[n]||"PPI",widthUnit:f[i]||"Inches",verticalResolution:o,verticalResolutionUnit:u[s]||"PPI",heightUnit:f[l]||"Inches"}}),(function(e,t){var r=t.resolutionInfo;(0,o.writeFixedPoint32)(e,r.horizontalResolution||0),(0,o.writeUint16)(e,Math.max(1,u.indexOf(r.horizontalResolutionUnit))),(0,o.writeUint16)(e,Math.max(1,f.indexOf(r.widthUnit))),(0,o.writeFixedPoint32)(e,r.verticalResolution||0),(0,o.writeUint16)(e,Math.max(1,u.indexOf(r.verticalResolutionUnit))),(0,o.writeUint16)(e,Math.max(1,f.indexOf(r.heightUnit)))}));var y=["centered","size to fit","user defined"];d(1062,(function(e){return void 0!==e.printScale}),(function(e,t){t.printScale={style:y[(0,a.readInt16)(e)],x:(0,a.readFloat32)(e),y:(0,a.readFloat32)(e),scale:(0,a.readFloat32)(e)}}),(function(e,t){var r=t.printScale,n=r.style,i=r.x,a=r.y,s=r.scale;(0,o.writeInt16)(e,Math.max(0,y.indexOf(n))),(0,o.writeFloat32)(e,i||0),(0,o.writeFloat32)(e,a||0),(0,o.writeFloat32)(e,s||0)})),d(1006,(function(e){return void 0!==e.alphaChannelNames}),(function(e,t,r){for(t.alphaChannelNames=[];r();){var n=(0,a.readPascalString)(e,1);t.alphaChannelNames.push(n)}}),(function(e,t){for(var r=0,n=t.alphaChannelNames;r<n.length;r++){var i=n[r];(0,o.writePascalString)(e,i,1)}})),d(1045,(function(e){return void 0!==e.alphaChannelNames}),(function(e,t,r){for(t.alphaChannelNames=[];r();)t.alphaChannelNames.push((0,a.readUnicodeString)(e))}),(function(e,t){for(var r=0,n=t.alphaChannelNames;r<n.length;r++){var i=n[r];(0,o.writeUnicodeStringWithPadding)(e,i)}})),s.MOCK_HANDLERS&&d(1077,(function(e){return void 0!==e._ir1077}),(function(e,t,r){t._ir1077=(0,a.readBytes)(e,r())}),(function(e,t){(0,o.writeBytes)(e,t._ir1077)})),d(1053,(function(e){return void 0!==e.alphaIdentifiers}),(function(e,t,r){for(t.alphaIdentifiers=[];r()>=4;)t.alphaIdentifiers.push((0,a.readUint32)(e))}),(function(e,t){for(var r=0,n=t.alphaIdentifiers;r<n.length;r++){var i=n[r];(0,o.writeUint32)(e,i)}})),d(1010,(function(e){return void 0!==e.backgroundColor}),(function(e,t){return t.backgroundColor=(0,a.readColor)(e)}),(function(e,t){return(0,o.writeColor)(e,t.backgroundColor)})),d(1037,(function(e){return void 0!==e.globalAngle}),(function(e,t){return t.globalAngle=(0,a.readUint32)(e)}),(function(e,t){return(0,o.writeUint32)(e,t.globalAngle)})),d(1049,(function(e){return void 0!==e.globalAltitude}),(function(e,t){return t.globalAltitude=(0,a.readUint32)(e)}),(function(e,t){return(0,o.writeUint32)(e,t.globalAltitude)})),d(1011,(function(e){return void 0!==e.printFlags}),(function(e,t){t.printFlags={labels:!!(0,a.readUint8)(e),cropMarks:!!(0,a.readUint8)(e),colorBars:!!(0,a.readUint8)(e),registrationMarks:!!(0,a.readUint8)(e),negative:!!(0,a.readUint8)(e),flip:!!(0,a.readUint8)(e),interpolate:!!(0,a.readUint8)(e),caption:!!(0,a.readUint8)(e),printFlags:!!(0,a.readUint8)(e)}}),(function(e,t){var r=t.printFlags;(0,o.writeUint8)(e,r.labels?1:0),(0,o.writeUint8)(e,r.cropMarks?1:0),(0,o.writeUint8)(e,r.colorBars?1:0),(0,o.writeUint8)(e,r.registrationMarks?1:0),(0,o.writeUint8)(e,r.negative?1:0),(0,o.writeUint8)(e,r.flip?1:0),(0,o.writeUint8)(e,r.interpolate?1:0),(0,o.writeUint8)(e,r.caption?1:0),(0,o.writeUint8)(e,r.printFlags?1:0)})),s.MOCK_HANDLERS&&d(1e4,(function(e){return void 0!==e._ir10000}),(function(e,t,r){t._ir10000=(0,a.readBytes)(e,r())}),(function(e,t){(0,o.writeBytes)(e,t._ir10000)})),s.MOCK_HANDLERS&&d(1013,(function(e){return void 0!==e._ir1013}),(function(e,t,r){t._ir1013=(0,a.readBytes)(e,r())}),(function(e,t){(0,o.writeBytes)(e,t._ir1013)})),s.MOCK_HANDLERS&&d(1016,(function(e){return void 0!==e._ir1016}),(function(e,t,r){t._ir1016=(0,a.readBytes)(e,r())}),(function(e,t){(0,o.writeBytes)(e,t._ir1016)})),d(1080,(function(e){return void 0!==e.countInformation}),(function(e,t){var r=(0,c.readVersionAndDescriptor)(e);t.countInformation=r.countGroupList.map((function(e){return{color:{r:e["Rd  "],g:e["Grn "],b:e["Bl  "]},name:e["Nm  "],size:e["Rds "],fontSize:e.fontSize,visible:e.Vsbl,points:e.countObjectList.map((function(e){return{x:e["X   "],y:e["Y   "]}}))}}))}),(function(e,t){var r={Vrsn:1,countGroupList:t.countInformation.map((function(e){return{"Rd  ":e.color.r,"Grn ":e.color.g,"Bl  ":e.color.b,"Nm  ":e.name,"Rds ":e.size,fontSize:e.fontSize,Vsbl:e.visible,countObjectList:e.points.map((function(e){return{"X   ":e.x,"Y   ":e.y}}))}}))};(0,c.writeVersionAndDescriptor)(e,"","Cnt ",r)})),d(1024,(function(e){return void 0!==e.layerState}),(function(e,t){return t.layerState=(0,a.readUint16)(e)}),(function(e,t){return(0,o.writeUint16)(e,t.layerState)})),d(1026,(function(e){return void 0!==e.layersGroup}),(function(e,t,r){for(t.layersGroup=[];r();)t.layersGroup.push((0,a.readUint16)(e))}),(function(e,t){for(var r=0,n=t.layersGroup;r<n.length;r++){var i=n[r];(0,o.writeUint16)(e,i)}})),d(1072,(function(e){return void 0!==e.layerGroupsEnabledId}),(function(e,t,r){for(t.layerGroupsEnabledId=[];r();)t.layerGroupsEnabledId.push((0,a.readUint8)(e))}),(function(e,t){for(var r=0,n=t.layerGroupsEnabledId;r<n.length;r++){var i=n[r];(0,o.writeUint8)(e,i)}})),d(1069,(function(e){return void 0!==e.layerSelectionIds}),(function(e,t){var r=(0,a.readUint16)(e);for(t.layerSelectionIds=[];r--;)t.layerSelectionIds.push((0,a.readUint32)(e))}),(function(e,t){(0,o.writeUint16)(e,t.layerSelectionIds.length);for(var r=0,n=t.layerSelectionIds;r<n.length;r++){var i=n[r];(0,o.writeUint32)(e,i)}})),d(1032,(function(e){return void 0!==e.gridAndGuidesInformation}),(function(e,t){var r=(0,a.readUint32)(e),n=(0,a.readUint32)(e),i=(0,a.readUint32)(e),o=(0,a.readUint32)(e);if(1!==r)throw new Error("Invalid 1032 resource version: ".concat(r));t.gridAndGuidesInformation={grid:{horizontal:n,vertical:i},guides:[]};for(var s=0;s<o;s++)t.gridAndGuidesInformation.guides.push({location:(0,a.readUint32)(e)/32,direction:(0,a.readUint8)(e)?"horizontal":"vertical"})}),(function(e,t){var r=t.gridAndGuidesInformation,n=r.grid||{horizontal:576,vertical:576},i=r.guides||[];(0,o.writeUint32)(e,1),(0,o.writeUint32)(e,n.horizontal),(0,o.writeUint32)(e,n.vertical),(0,o.writeUint32)(e,i.length);for(var a=0,s=i;a<s.length;a++){var l=s[a];(0,o.writeUint32)(e,32*l.location),(0,o.writeUint8)(e,"horizontal"===l.direction?1:0)}})),s.MOCK_HANDLERS&&d(1092,(function(e){return void 0!==e._ir1092}),(function(e,t,r){t._ir1092=(0,a.readBytes)(e,r())}),(function(e,t){(0,o.writeBytes)(e,t._ir1092)}));var w=["normal",void 0,void 0,void 0,void 0,void 0,void 0,"multiply","screen",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"difference"];function b(e){return{"Top ":e.top,Left:e.left,Btom:e.bottom,Rght:e.right}}function S(e){return{top:e["Top "],left:e.Left,bottom:e.Btom,right:e.Rght}}function I(e,t){return e[Math.max(0,Math.min(e.length-1,t))]}d(1078,(function(e){return void 0!==e.onionSkins}),(function(e,t){var r=(0,c.readVersionAndDescriptor)(e);t.onionSkins={enabled:r.enab,framesBefore:r.numBefore,framesAfter:r.numAfter,frameSpacing:r.Spcn,minOpacity:r.minOpacity/100,maxOpacity:r.maxOpacity/100,blendMode:w[r.BlnM]||"normal"}}),(function(e,t){var r=t.onionSkins,n={Vrsn:1,enab:r.enabled,numBefore:r.framesBefore,numAfter:r.framesAfter,Spcn:r.frameSpacing,minOpacity:100*r.minOpacity|0,maxOpacity:100*r.maxOpacity|0,BlnM:Math.max(0,w.indexOf(r.blendMode))};(0,c.writeVersionAndDescriptor)(e,"","null",n)})),d(1075,(function(e){return void 0!==e.timelineInformation}),(function(e,t,r,n){var i,a,o=(0,c.readVersionAndDescriptor)(e);t.timelineInformation={enabled:o.enab,frameStep:(0,c.frac)(o.frameStep),frameRate:o.frameRate,time:(0,c.frac)(o.time),duration:(0,c.frac)(o.duration),workInTime:(0,c.frac)(o.workInTime),workOutTime:(0,c.frac)(o.workOutTime),repeats:o.LCnt,hasMotion:o.hasMotion,globalTracks:(0,c.parseTrackList)(o.globalTrackList,!!n.logMissingFeatures)},(null===(a=null===(i=o.audioClipGroupList)||void 0===i?void 0:i.audioClipGroupList)||void 0===a?void 0:a.length)&&(t.timelineInformation.audioClipGroups=o.audioClipGroupList.audioClipGroupList.map((function(e){return{id:e.groupID,muted:e.muted,audioClips:e.audioClipList.map((function(e){var t=e.clipID,r=e.timeScope,n=e.muted,i=e.audioLevel,a=e.frameReader;return{id:t,start:(0,c.frac)(r.Strt),duration:(0,c.frac)(r.duration),inTime:(0,c.frac)(r.inTime),outTime:(0,c.frac)(r.outTime),muted:n,audioLevel:i,frameReader:{type:a.frameReaderType,mediaDescriptor:a.mediaDescriptor,link:{name:a["Lnk "]["Nm  "],fullPath:a["Lnk "].fullPath,relativePath:a["Lnk "].relPath}}}}))}})))}),(function(e,t){var r,n=t.timelineInformation,i={Vrsn:1,enab:n.enabled,frameStep:n.frameStep,frameRate:n.frameRate,time:n.time,duration:n.duration,workInTime:n.workInTime,workOutTime:n.workOutTime,LCnt:n.repeats,globalTrackList:(0,c.serializeTrackList)(n.globalTracks),audioClipGroupList:{audioClipGroupList:null===(r=n.audioClipGroups)||void 0===r?void 0:r.map((function(e){return{groupID:e.id,muted:e.muted,audioClipList:e.audioClips.map((function(e){return{clipID:e.id,timeScope:{Vrsn:1,Strt:e.start,duration:e.duration,inTime:e.inTime,outTime:e.outTime},frameReader:{frameReaderType:e.frameReader.type,descVersion:1,"Lnk ":{descVersion:1,"Nm  ":e.frameReader.link.name,fullPath:e.frameReader.link.fullPath,relPath:e.frameReader.link.relativePath},mediaDescriptor:e.frameReader.mediaDescriptor},muted:e.muted,audioLevel:e.audioLevel}}))}}))},hasMotion:n.hasMotion};(0,c.writeVersionAndDescriptor)(e,"","null",i,"anim")})),d(1076,(function(e){return void 0!==e.sheetDisclosure}),(function(e,t){var r=(0,c.readVersionAndDescriptor)(e);t.sheetDisclosure={},r.sheetTimelineOptions&&(t.sheetDisclosure.sheetTimelineOptions=r.sheetTimelineOptions.map((function(e){return{sheetID:e.sheetID,sheetDisclosed:e.sheetDisclosed,lightsDisclosed:e.lightsDisclosed,meshesDisclosed:e.meshesDisclosed,materialsDisclosed:e.materialsDisclosed}})))}),(function(e,t){var r=t.sheetDisclosure,n={Vrsn:1};r.sheetTimelineOptions&&(n.sheetTimelineOptions=r.sheetTimelineOptions.map((function(e){return{Vrsn:2,sheetID:e.sheetID,sheetDisclosed:e.sheetDisclosed,lightsDisclosed:e.lightsDisclosed,meshesDisclosed:e.meshesDisclosed,materialsDisclosed:e.materialsDisclosed}}))),(0,c.writeVersionAndDescriptor)(e,"","null",n)})),d(1054,(function(e){return void 0!==e.urlsList}),(function(e,t,r,n){var i=(0,a.readUint32)(e);t.urlsList=[];for(var o=0;o<i;o++){if("slic"!==(0,a.readSignature)(e)&&n.throwForMissingFeatures)throw new Error("Unknown long");var s=(0,a.readUint32)(e),l=(0,a.readUnicodeString)(e);t.urlsList.push({id:s,url:l,ref:"slice"})}}),(function(e,t){var r=t.urlsList;(0,o.writeUint32)(e,r.length);for(var n=0;n<r.length;n++)(0,o.writeSignature)(e,"slic"),(0,o.writeUint32)(e,r[n].id),(0,o.writeUnicodeString)(e,r[n].url)}));var k=["autoGenerated","layer","userGenerated"],F=["noImage","image"],D=["default"];d(1050,(function(e){return e.slices?e.slices.length:0}),(function(e,t){var r=(0,a.readUint32)(e);if(6==r){t.slices||(t.slices=[]);var n=(0,a.readInt32)(e),i=(0,a.readInt32)(e),o=(0,a.readInt32)(e),s=(0,a.readInt32)(e),l=(0,a.readUnicodeString)(e),d=(0,a.readUint32)(e);t.slices.push({bounds:{top:n,left:i,bottom:o,right:s},groupName:l,slices:[]});for(var u=t.slices[t.slices.length-1].slices,f=0;f<d;f++){var p=(0,a.readUint32)(e),h=(0,a.readUint32)(e),g=I(k,(0,a.readUint32)(e)),m="layer"==g?(0,a.readUint32)(e):0,v=(0,a.readUnicodeString)(e),y=I(F,(0,a.readUint32)(e)),w=(0,a.readInt32)(e),b=(0,a.readInt32)(e),C=(0,a.readInt32)(e),P=(0,a.readInt32)(e),U=(0,a.readUnicodeString)(e),M=(0,a.readUnicodeString)(e),A=(0,a.readUnicodeString)(e),x=(0,a.readUnicodeString)(e),E=!!(0,a.readUint8)(e),L=(0,a.readUnicodeString)(e),O=I(D,(0,a.readUint32)(e)),B=I(D,(0,a.readUint32)(e)),T=(0,a.readUint8)(e),R=(0,a.readUint8)(e),V=(0,a.readUint8)(e),_=(0,a.readUint8)(e),z=T+R+V+_===0?"none":0===T?"matte":"color";u.push({id:p,groupId:h,origin:g,associatedLayerId:m,name:v,target:M,message:A,altTag:x,cellTextIsHTML:E,cellText:L,horizontalAlignment:O,verticalAlignment:B,type:y,url:U,bounds:{top:b,left:w,bottom:P,right:C},backgroundColorType:z,backgroundColor:{r:R,g:V,b:_,a:T}})}(G=(0,c.readVersionAndDescriptor)(e)).slices.forEach((function(e){var t=u.find((function(t){return e.sliceID==t.id}));t&&(t.topOutset=e.topOutset,t.leftOutset=e.leftOutset,t.bottomOutset=e.bottomOutset,t.rightOutset=e.rightOutset)}))}else{if(7!=r&&8!=r)throw new Error("Invalid slices version (".concat(r,")"));var G=(0,c.readVersionAndDescriptor)(e);t.slices||(t.slices=[]),t.slices.push({groupName:G.baseName,bounds:S(G.bounds),slices:G.slices.map((function(e){return{name:"",id:e.sliceID,groupId:e.groupID,associatedLayerId:0,origin:c.ESliceOrigin.decode(e.origin),type:c.ESliceType.decode(e.Type),bounds:S(e.bounds),url:e.url,target:e.null,message:e.Msge,altTag:e.altTag,cellTextIsHTML:e.cellTextIsHTML,cellText:e.cellText,horizontalAlignment:c.ESliceHorzAlign.decode(e.horzAlign),verticalAlignment:c.ESliceVertAlign.decode(e.vertAlign),backgroundColorType:c.ESliceBGColorType.decode(e.bgColorType),backgroundColor:e.bgColor?{r:e.bgColor["Rd  "],g:e.bgColor["Grn "],b:e.bgColor["Bl  "],a:e.bgColor.alpha}:{r:0,g:0,b:0,a:0},topOutset:e.topOutset||0,leftOutset:e.leftOutset||0,bottomOutset:e.bottomOutset||0,rightOutset:e.rightOutset||0}}))})}}),(function(e,t,r){var i=t.slices[r],a=i.bounds,s=i.groupName,l=i.slices;(0,o.writeUint32)(e,6),(0,o.writeInt32)(e,a.top),(0,o.writeInt32)(e,a.left),(0,o.writeInt32)(e,a.bottom),(0,o.writeInt32)(e,a.right),(0,o.writeUnicodeString)(e,s),(0,o.writeUint32)(e,l.length);for(var d=0;d<l.length;d++){var u=l[d],f=u.backgroundColor,p=f.a,h=f.r,g=f.g,m=f.b;"none"===u.backgroundColorType?p=h=g=m=0:"matte"===u.backgroundColorType&&(p=0,h=g=m=255),(0,o.writeUint32)(e,u.id),(0,o.writeUint32)(e,u.groupId),(0,o.writeUint32)(e,k.indexOf(u.origin)),"layer"===u.origin&&(0,o.writeUint32)(e,u.associatedLayerId),(0,o.writeUnicodeString)(e,u.name),(0,o.writeUint32)(e,F.indexOf(u.type)),(0,o.writeInt32)(e,u.bounds.left),(0,o.writeInt32)(e,u.bounds.top),(0,o.writeInt32)(e,u.bounds.right),(0,o.writeInt32)(e,u.bounds.bottom),(0,o.writeUnicodeString)(e,u.url),(0,o.writeUnicodeString)(e,u.target),(0,o.writeUnicodeString)(e,u.message),(0,o.writeUnicodeString)(e,u.altTag),(0,o.writeUint8)(e,u.cellTextIsHTML?1:0),(0,o.writeUnicodeString)(e,u.cellText),(0,o.writeUint32)(e,D.indexOf(u.horizontalAlignment)),(0,o.writeUint32)(e,D.indexOf(u.verticalAlignment)),(0,o.writeUint8)(e,p),(0,o.writeUint8)(e,h),(0,o.writeUint8)(e,g),(0,o.writeUint8)(e,m)}var v={bounds:b(a),slices:[]};l.forEach((function(e){var t=n(n({sliceID:e.id,groupID:e.groupId,origin:c.ESliceOrigin.encode(e.origin),Type:c.ESliceType.encode(e.type),bounds:b(e.bounds)},e.name?{"Nm  ":e.name}:{}),{url:e.url,null:e.target,Msge:e.message,altTag:e.altTag,cellTextIsHTML:e.cellTextIsHTML,cellText:e.cellText,horzAlign:c.ESliceHorzAlign.encode(e.horizontalAlignment),vertAlign:c.ESliceVertAlign.encode(e.verticalAlignment),bgColorType:c.ESliceBGColorType.encode(e.backgroundColorType)});if("color"===e.backgroundColorType){var r=e.backgroundColor,i=r.r,a=r.g,o=r.b,s=r.a;t.bgColor={"Rd  ":i,"Grn ":a,"Bl  ":o,alpha:s}}t.topOutset=e.topOutset||0,t.leftOutset=e.leftOutset||0,t.bottomOutset=e.bottomOutset||0,t.rightOutset=e.rightOutset||0,v.slices.push(t)})),(0,c.writeVersionAndDescriptor)(e,"","null",v,"slices")})),d(1064,(function(e){return void 0!==e.pixelAspectRatio}),(function(e,t){if((0,a.readUint32)(e)>2)throw new Error("Invalid pixelAspectRatio version");t.pixelAspectRatio={aspect:(0,a.readFloat64)(e)}}),(function(e,t){(0,o.writeUint32)(e,2),(0,o.writeFloat64)(e,t.pixelAspectRatio.aspect)})),d(1041,(function(e){return void 0!==e.iccUntaggedProfile}),(function(e,t){t.iccUntaggedProfile=!!(0,a.readUint8)(e)}),(function(e,t){(0,o.writeUint8)(e,t.iccUntaggedProfile?1:0)})),s.MOCK_HANDLERS&&d(1039,(function(e){return void 0!==e._ir1039}),(function(e,t,r){t._ir1039=(0,a.readBytes)(e,r())}),(function(e,t){(0,o.writeBytes)(e,t._ir1039)})),d(1044,(function(e){return void 0!==e.idsSeedNumber}),(function(e,t){return t.idsSeedNumber=(0,a.readUint32)(e)}),(function(e,t){return(0,o.writeUint32)(e,t.idsSeedNumber)})),d(1036,(function(e){return void 0!==e.thumbnail||void 0!==e.thumbnailRaw}),(function(e,t,r,n){var i=(0,a.readUint32)(e),o=(0,a.readUint32)(e),l=(0,a.readUint32)(e);(0,a.readUint32)(e),(0,a.readUint32)(e),(0,a.readUint32)(e);var c=(0,a.readUint16)(e),d=(0,a.readUint16)(e);if(1!==i||24!==c||1!==d)return n.logMissingFeatures&&console.log("Invalid thumbnail data (format: ".concat(i,", bitsPerPixel: ").concat(c,", planes: ").concat(d,")")),void(0,a.skipBytes)(e,r());var u=r(),f=(0,a.readBytes)(e,u);n.useRawThumbnail?t.thumbnailRaw={width:o,height:l,data:f}:f.byteLength&&(t.thumbnail=(0,s.createCanvasFromData)(f))}),(function(e,t){var r,n,a=0,s=0;if(t.thumbnailRaw)a=t.thumbnailRaw.width,s=t.thumbnailRaw.height,n=t.thumbnailRaw.data;else{var l=null===(r=t.thumbnail.toDataURL("image/jpeg",1))||void 0===r?void 0:r.substring(23);l?(a=t.thumbnail.width,s=t.thumbnail.height,n=(0,i.toByteArray)(l)):n=new Uint8Array(0)}var c=4*Math.floor((24*a+31)/32),d=c*s*1,u=n.length;(0,o.writeUint32)(e,1),(0,o.writeUint32)(e,a),(0,o.writeUint32)(e,s),(0,o.writeUint32)(e,c),(0,o.writeUint32)(e,d),(0,o.writeUint32)(e,u),(0,o.writeUint16)(e,24),(0,o.writeUint16)(e,1),(0,o.writeBytes)(e,n)})),d(1057,(function(e){return void 0!==e.versionInfo}),(function(e,t,r){if(1!==(0,a.readUint32)(e))throw new Error("Invalid versionInfo version");t.versionInfo={hasRealMergedData:!!(0,a.readUint8)(e),writerName:(0,a.readUnicodeString)(e),readerName:(0,a.readUnicodeString)(e),fileVersion:(0,a.readUint32)(e)},(0,a.skipBytes)(e,r())}),(function(e,t){var r=t.versionInfo;(0,o.writeUint32)(e,1),(0,o.writeUint8)(e,r.hasRealMergedData?1:0),(0,o.writeUnicodeString)(e,r.writerName),(0,o.writeUnicodeString)(e,r.readerName),(0,o.writeUint32)(e,r.fileVersion)})),s.MOCK_HANDLERS&&d(1058,(function(e){return void 0!==e._ir1058}),(function(e,t,r){t._ir1058=(0,a.readBytes)(e,r())}),(function(e,t){(0,o.writeBytes)(e,t._ir1058)})),d(7e3,(function(e){return void 0!==e.imageReadyVariables}),(function(e,t,r){t.imageReadyVariables=g(e,r())}),(function(e,t){m(e,t.imageReadyVariables)})),d(7001,(function(e){return void 0!==e.imageReadyDataSets}),(function(e,t,r){t.imageReadyDataSets=g(e,r())}),(function(e,t){m(e,t.imageReadyDataSets)})),d(1088,(function(e){return void 0!==e.pathSelectionState}),(function(e,t,r){var n=(0,c.readVersionAndDescriptor)(e);t.pathSelectionState=n.null}),(function(e,t){var r={null:t.pathSelectionState};(0,c.writeVersionAndDescriptor)(e,"","null",r)})),s.MOCK_HANDLERS&&d(1025,(function(e){return void 0!==e._ir1025}),(function(e,t,r){t._ir1025=(0,a.readBytes)(e,r())}),(function(e,t){(0,o.writeBytes)(e,t._ir1025)}));var C=(0,s.createEnum)("FrmD","",{auto:"Auto",none:"None",dispose:"Disp"});d(4e3,(function(e){return void 0!==e.animations}),(function(e,t,r,n){var i=n.logMissingFeatures,o=n.logDevFeatures,s=(0,a.readSignature)(e);if("mani"===s)(0,a.checkSignature)(e,"IRFR"),(0,a.readSection)(e,1,(function(r){for(var n=function(){(0,a.checkSignature)(e,"8BIM");var r=(0,a.readSignature)(e);(0,a.readSection)(e,1,(function(n){if("AnDs"===r){var s=(0,c.readVersionAndDescriptor)(e);t.animations={frames:s.FrIn.map((function(e){return{id:e.FrID,delay:(e.FrDl||0)/100,dispose:e.FrDs?C.decode(e.FrDs):"auto"}})),animations:s.FSts.map((function(e){return{id:e.FsID,frames:e.FsFr,repeats:e.LCnt,activeFrame:e.AFrm||0}}))}}else if("Roll"===r){var l=(0,a.readBytes)(e,n());o&&console.log("#4000 Roll",l)}else i&&console.log("Unhandled subsection in #4000",r)}))};r();)n()}));else if("mopt"===s){var l=(0,a.readBytes)(e,r());o&&console.log("#4000 mopt",l)}else i&&console.log("Unhandled key in #4000:",s)}),(function(e,t){t.animations&&((0,o.writeSignature)(e,"mani"),(0,o.writeSignature)(e,"IRFR"),(0,o.writeSection)(e,1,(function(){(0,o.writeSignature)(e,"8BIM"),(0,o.writeSignature)(e,"AnDs"),(0,o.writeSection)(e,1,(function(){for(var r={FrIn:[],FSts:[]},n=0;n<t.animations.frames.length;n++){var i=t.animations.frames[n],a={FrID:i.id};i.delay&&(a.FrDl=100*i.delay|0),a.FrDs=C.encode(i.dispose),r.FrIn.push(a)}for(n=0;n<t.animations.animations.length;n++){var o=t.animations.animations[n],s={FsID:o.id,AFrm:0|o.activeFrame,FsFr:o.frames,LCnt:0|o.repeats};r.FSts.push(s)}(0,c.writeVersionAndDescriptor)(e,"","null",r)}))})))})),s.MOCK_HANDLERS&&d(4001,(function(e){return void 0!==e._ir4001}),(function(e,t,r,n){var i=n.logMissingFeatures,o=n.logDevFeatures;if(s.MOCK_HANDLERS)t._ir4001=(0,a.readBytes)(e,r());else{var l=(0,a.readSignature)(e);if("mfri"===l){if(2!==(0,a.readUint32)(e))throw new Error("Invalid mfri version");var d=(0,a.readUint32)(e),u=(0,a.readBytes)(e,d);o&&console.log("mfri",u)}else if("mset"===l){var f=(0,c.readVersionAndDescriptor)(e);o&&console.log("mset",f)}else i&&console.log("Unhandled key in #4001",l)}}),(function(e,t){(0,o.writeBytes)(e,t._ir4001)})),s.MOCK_HANDLERS&&d(4002,(function(e){return void 0!==e._ir4002}),(function(e,t,r){t._ir4002=(0,a.readBytes)(e,r())}),(function(e,t){(0,o.writeBytes)(e,t._ir4002)}))},89:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.writePsdBuffer=t.writePsdUint8Array=t.writePsd=t.readPsd=t.byteArrayToBase64=t.initializeCanvas=void 0;var a=r(206),o=r(854);i(r(956),t),i(r(212),t);var s=r(534);Object.defineProperty(t,"initializeCanvas",{enumerable:!0,get:function(){return s.initializeCanvas}}),i(r(120),t);var l=r(238);function c(e,t){var r=(0,a.createWriter)();return(0,a.writePsd)(r,e,t),(0,a.getWriterBufferNoCopy)(r)}t.byteArrayToBase64=l.fromByteArray,t.readPsd=function(e,t){var r="buffer"in e?(0,o.createReader)(e.buffer,e.byteOffset,e.byteLength):(0,o.createReader)(e);return(0,o.readPsd)(r,t)},t.writePsd=function(e,t){var r=(0,a.createWriter)();return(0,a.writePsd)(r,e,t),(0,a.getWriterBuffer)(r)},t.writePsdUint8Array=c,t.writePsdBuffer=function(e,t){if("undefined"==typeof Buffer)throw new Error("Buffer not supported on this platform");return Buffer.from(c(e,t))}},279:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialize=void 0;var n=r(119),i=r(89),a=r(552);function o(e){var t=(0,n.createCanvas)(100,100);try{var r=t.getContext("2d"),i=(0,a.decodeJpeg)(e,(function(e,t){return r.createImageData(e,t)}));t.width=i.width,t.height=i.height,r.putImageData(i,0,0)}catch(e){console.error("JPEG decompression error",e.message)}return t}(0,i.initializeCanvas)(n.createCanvas,o),t.initialize=function(){(0,i.initializeCanvas)(n.createCanvas,o)}},552:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeJpeg=void 0;var r=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),n=4017,i=799,a=3406,o=2276,s=1567,l=3784,c=5793,d=2896,u=67108864,f=0;function p(e){var t=f+e;if(t>u){var r=Math.ceil((t-u)/1024/1024);throw new Error("Max memory limit exceeded by at least ".concat(r,"MB"))}f=t}function h(e,t){for(var r=16;r>0&&!e[r-1];)r--;for(var n=[{children:[],index:0}],i=0,a=n[0],o=0;o<r;o++){for(var s=0;s<e[o];s++){for((a=n.pop()).children[a.index]=t[i];a.index>0;){if(0===n.length)throw new Error("Could not recreate Huffman Table");a=n.pop()}for(a.index++,n.push(a);n.length<=o;){var l={children:[],index:0};n.push(l),a.children[a.index]=l.children,a=l}i++}o+1<r&&(l={children:[],index:0},n.push(l),a.children[a.index]=l.children,a=l)}return n[0].children}function g(e,t,n,i,a,o,s,l,c){var d=n.mcusPerLine,u=n.progressive,f=t,p=0,h=0;function g(){if(h>0)return h--,p>>h&1;if(255==(p=e[t++])){var r=e[t++];if(r)throw new Error("unexpected marker: ".concat((p<<8|r).toString(16)))}return h=7,p>>>7}function m(e){for(var t=e;;){if("number"==typeof(t=t[g()]))return t;if(void 0===t)throw new Error("invalid huffman sequence")}}function v(e){for(var t=0;e>0;)t=t<<1|g(),e--;return t}function y(e){var t=v(e);return t>=1<<e-1?t:t+(-1<<e)+1}var w=0,b=0,S=0;function I(e,t,r,n,i){var a=r%d,o=(r/d|0)*e.v+n,s=a*e.h+i;void 0!==e.blocks[o]&&t(e,e.blocks[o][s])}function k(e,t,r){var n=r/e.blocksPerLine|0,i=r%e.blocksPerLine;void 0!==e.blocks[n]&&t(e,e.blocks[n][i])}var F,D,C=i.length;D=u?0===o?0===l?function(e,t){var r=m(e.huffmanTableDC),n=0===r?0:y(r)<<c;t[0]=e.pred+=n}:function(e,t){t[0]|=g()<<c}:0===l?function(e,t){if(w>0)w--;else for(var n=o,i=s;n<=i;){var a=m(e.huffmanTableAC),l=15&a,d=a>>4;if(0!==l)t[r[n+=d]]=y(l)*(1<<c),n++;else{if(d<15){w=v(d)+(1<<d)-1;break}n+=16}}}:function(e,t){for(var n=o,i=s,a=0;n<=i;){var l=r[n],d=t[l]<0?-1:1;switch(b){case 0:var u=m(e.huffmanTableAC),f=15&u;if(a=u>>4,0===f)a<15?(w=v(a)+(1<<a),b=4):(a=16,b=1);else{if(1!==f)throw new Error("invalid ACn encoding");S=y(f),b=a?2:3}continue;case 1:case 2:t[l]?t[l]+=(g()<<c)*d:0==--a&&(b=2==b?3:0);break;case 3:t[l]?t[l]+=(g()<<c)*d:(t[l]=S<<c,b=0);break;case 4:t[l]&&(t[l]+=(g()<<c)*d)}n++}4===b&&0==--w&&(b=0)}:function(e,t){var n=m(e.huffmanTableDC),i=0===n?0:y(n);t[0]=e.pred+=i;for(var a=1;a<64;){var o=m(e.huffmanTableAC),s=15&o,l=o>>4;if(0!==s)t[r[a+=l]]=y(s),a++;else{if(l<15)break;a+=16}}};var P,U,M,A,x=0;for(P=1==C?i[0].blocksPerLine*i[0].blocksPerColumn:d*n.mcusPerColumn,a||(a=P);x<P;){for(var E=0;E<C;E++)i[E].pred=0;if(w=0,1==C){F=i[0];for(var L=0;L<a;L++)k(F,D,x),x++}else for(L=0;L<a;L++){for(E=0;E<C;E++){U=(F=i[E]).h,M=F.v;for(var O=0;O<M;O++)for(var B=0;B<U;B++)I(F,D,x,O,B)}if(++x===P)break}if(x===P)do{if(255===e[t]&&0!==e[t+1])break;t+=1}while(t<e.length-2);if(h=0,(A=e[t]<<8|e[t+1])<65280)throw new Error("marker was not found");if(!(A>=65488&&A<=65495))break;t+=2}return t-f}function m(e){var t=[],r=e.blocksPerLine,u=e.blocksPerColumn,f=r<<3,h=new Int32Array(64),g=new Uint8Array(64);function m(t,r,u){for(var f=e.quantizationTable,p=u,h=0;h<64;h++)p[h]=t[h]*f[h];for(h=0;h<8;++h){var g=8*h;if(0!=p[1+g]||0!=p[2+g]||0!=p[3+g]||0!=p[4+g]||0!=p[5+g]||0!=p[6+g]||0!=p[7+g]){var m=c*p[0+g]+128>>8,v=c*p[4+g]+128>>8,y=p[2+g],w=p[6+g],b=d*(p[1+g]-p[7+g])+128>>8,S=d*(p[1+g]+p[7+g])+128>>8,I=p[3+g]<<4,k=p[5+g]<<4,F=m-v+1>>1;m=m+v+1>>1,v=F,F=y*l+w*s+128>>8,y=y*s-w*l+128>>8,w=F,F=b-k+1>>1,b=b+k+1>>1,k=F,F=S+I+1>>1,I=S-I+1>>1,S=F,F=m-w+1>>1,m=m+w+1>>1,w=F,F=v-y+1>>1,v=v+y+1>>1,y=F,F=b*o+S*a+2048>>12,b=b*a-S*o+2048>>12,S=F,F=I*i+k*n+2048>>12,I=I*n-k*i+2048>>12,k=F,p[0+g]=m+S,p[7+g]=m-S,p[1+g]=v+k,p[6+g]=v-k,p[2+g]=y+I,p[5+g]=y-I,p[3+g]=w+b,p[4+g]=w-b}else{var D=c*p[0+g]+512>>10;p[0+g]=D,p[1+g]=D,p[2+g]=D,p[3+g]=D,p[4+g]=D,p[5+g]=D,p[6+g]=D,p[7+g]=D}}for(h=0;h<8;++h){var C=h;if(0!=p[8+C]||0!=p[16+C]||0!=p[24+C]||0!=p[32+C]||0!=p[40+C]||0!=p[48+C]||0!=p[56+C])m=c*p[0+C]+2048>>12,v=c*p[32+C]+2048>>12,y=p[16+C],w=p[48+C],b=d*(p[8+C]-p[56+C])+2048>>12,S=d*(p[8+C]+p[56+C])+2048>>12,I=p[24+C],k=p[40+C],F=m-v+1>>1,m=m+v+1>>1,v=F,F=y*l+w*s+2048>>12,y=y*s-w*l+2048>>12,w=F,F=b-k+1>>1,b=b+k+1>>1,k=F,F=S+I+1>>1,I=S-I+1>>1,S=F,F=m-w+1>>1,m=m+w+1>>1,w=F,F=v-y+1>>1,v=v+y+1>>1,y=F,F=b*o+S*a+2048>>12,b=b*a-S*o+2048>>12,S=F,F=I*i+k*n+2048>>12,I=I*n-k*i+2048>>12,k=F,p[0+C]=m+S,p[56+C]=m-S,p[8+C]=v+k,p[48+C]=v-k,p[16+C]=y+I,p[40+C]=y-I,p[24+C]=w+b,p[32+C]=w-b;else{var P=c*u[h+0]+8192>>14;p[0+C]=P,p[8+C]=P,p[16+C]=P,p[24+C]=P,p[32+C]=P,p[40+C]=P,p[48+C]=P,p[56+C]=P}}for(h=0;h<64;++h){var U=128+(p[h]+8>>4);r[h]=U<0?0:U>255?255:U}}p(f*u*8);for(var v=0;v<u;v++){for(var y=v<<3,w=0;w<8;w++)t.push(new Uint8Array(f));for(var b=0;b<r;b++){m(e.blocks[v][b],g,h);for(var S=0,I=b<<3,k=0;k<8;k++){var F=t[y+k];for(w=0;w<8;w++)F[I+w]=g[S++]}}}return t}function v(e){return e<0?0:e>255?255:e}t.decodeJpeg=function(e,t){if(f=0,0===e.length)throw new Error("Empty jpeg buffer");var n=function(e){var t={width:0,height:0,comments:[],adobe:void 0,components:[],exifBuffer:void 0,jfif:void 0},n=1e8,i=0;function a(){var t=e[i]<<8|e[i+1];return i+=2,t}function o(e){var t=0,r=0;for(var n in e.components)e.components.hasOwnProperty(n)&&(t<(o=e.components[n]).h&&(t=o.h),r<o.v&&(r=o.v));var i=Math.ceil(e.samplesPerLine/8/t),a=Math.ceil(e.scanLines/8/r);for(var n in e.components)if(e.components.hasOwnProperty(n)){var o=e.components[n],s=Math.ceil(Math.ceil(e.samplesPerLine/8)*o.h/t),l=Math.ceil(Math.ceil(e.scanLines/8)*o.v/r),c=i*o.h,d=a*o.v,u=[];p(d*c*256);for(var f=0;f<d;f++){for(var h=[],g=0;g<c;g++)h.push(new Int32Array(64));u.push(h)}o.blocksPerLine=s,o.blocksPerColumn=l,o.blocks=u}e.maxH=t,e.maxV=r,e.mcusPerLine=i,e.mcusPerColumn=a}var s,l,c=null,d=null,u=void 0,f=0,v=[],y=[],w=[],b=[],S=a(),I=-1;if(65496!=S)throw new Error("SOI not found");for(S=a();65497!=S;){switch(S){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var k=(void 0,void 0,s=a(),l=e.subarray(i,i+s-2),i+=l.length,l);if(65534===S){for(var F="",D=0;D<k.byteLength;D++)F+=String.fromCharCode(k[D]);t.comments.push(F)}65504===S&&74===k[0]&&70===k[1]&&73===k[2]&&70===k[3]&&0===k[4]&&(c={version:{major:k[5],minor:k[6]},densityUnits:k[7],xDensity:k[8]<<8|k[9],yDensity:k[10]<<8|k[11],thumbWidth:k[12],thumbHeight:k[13],thumbData:k.subarray(14,14+3*k[12]*k[13])}),65505===S&&69===k[0]&&120===k[1]&&105===k[2]&&102===k[3]&&0===k[4]&&(t.exifBuffer=k.subarray(5,k.length)),65518===S&&65===k[0]&&100===k[1]&&111===k[2]&&98===k[3]&&101===k[4]&&0===k[5]&&(d={version:k[6],flags0:k[7]<<8|k[8],flags1:k[9]<<8|k[10],transformCode:k[11]});break;case 65499:for(var C=a()+i-2;i<C;){var P=e[i++];p(256);var U=new Int32Array(64);if(P>>4==0)for(var M=0;M<64;M++)U[r[M]]=e[i++];else{if(P>>4!=1)throw new Error("DQT: invalid table spec");for(M=0;M<64;M++)U[r[M]]=a()}v[15&P]=U}break;case 65472:case 65473:case 65474:a();var A=(u={extended:65473===S,progressive:65474===S,precision:e[i++],scanLines:a(),samplesPerLine:a(),components:{},componentsOrder:[],maxH:0,maxV:0,mcusPerLine:0,mcusPerColumn:0}).scanLines*u.samplesPerLine;if(A>n){var x=Math.ceil((A-n)/1e6);throw new Error("maxResolutionInMP limit exceeded by ".concat(x,"MP"))}for(var E=e[i++],L=0;L<E;L++){var O=e[i],B=e[i+1]>>4,T=15&e[i+1],R=e[i+2];u.componentsOrder.push(O),u.components[O]={h:B,v:T,quantizationIdx:R,blocksPerColumn:0,blocksPerLine:0,blocks:[],pred:0},i+=3}o(u),y.push(u);break;case 65476:var V=a();for(L=2;L<V;){var _=e[i++],z=new Uint8Array(16),G=0;for(M=0;M<16;M++,i++)G+=z[M]=e[i];p(16+G);var N=new Uint8Array(G);for(M=0;M<G;M++,i++)N[M]=e[i];L+=17+G,(_>>4==0?b:w)[15&_]=h(z,N)}break;case 65501:a(),f=a();break;case 65500:a(),a();break;case 65498:a();var j=e[i++],W=[];for(L=0;L<j;L++){var H=u.components[e[i++]],X=e[i++];H.huffmanTableDC=b[X>>4],H.huffmanTableAC=w[15&X],W.push(H)}var Y=e[i++],K=e[i++],Z=e[i++],q=g(e,i,u,W,f,Y,K,Z>>4,15&Z);i+=q;break;case 65535:255!==e[i]&&i--;break;default:if(255==e[i-3]&&e[i-2]>=192&&e[i-2]<=254){i-=3;break}if(224===S||225==S){if(-1!==I)throw new Error("first unknown JPEG marker at offset ".concat(I.toString(16),", second unknown JPEG marker ").concat(S.toString(16)," at offset ").concat((i-1).toString(16)));I=i-1;var J=a();if(255===e[i+J-2]){i+=J-2;break}}throw new Error("unknown JPEG marker "+S.toString(16))}S=a()}if(1!=y.length)throw new Error("only single frame JPEGs supported");for(L=0;L<y.length;L++){var Q=y[L].components;for(var M in Q)Q[M].quantizationTable=v[Q[M].quantizationIdx],delete Q[M].quantizationIdx}for(t.width=u.samplesPerLine,t.height=u.scanLines,t.jfif=c,t.adobe=d,t.components=[],L=0;L<u.componentsOrder.length;L++)H=u.components[u.componentsOrder[L]],t.components.push({lines:m(H),scaleX:H.h/u.maxH,scaleY:H.v/u.maxV});return t}(e);p(n.width*n.height*4);var i=function(e){var t=0,r=!1,n=e.width,i=e.height,a=n*i*e.components.length;p(a);var o=new Uint8Array(a);switch(e.components.length){case 1:for(var s=e.components[0],l=0;l<i;l++)for(var c=s.lines[0|l*s.scaleY],d=0;d<n;d++){var u=c[0|d*s.scaleX];o[t++]=u}break;case 2:s=e.components[0];var f=e.components[1];for(l=0;l<i;l++){c=s.lines[0|l*s.scaleY];var h=f.lines[0|l*f.scaleY];for(d=0;d<n;d++){var g=c[0|d*s.scaleX];o[t++]=g;var m=h[0|d*f.scaleX];o[t++]=m}}break;case 3:r=!0,e.adobe&&e.adobe.transformCode&&(r=!0),s=e.components[0],f=e.components[1];var y=e.components[2];for(l=0;l<i;l++){c=s.lines[0|l*s.scaleY],h=f.lines[0|l*f.scaleY];var w=y.lines[0|l*y.scaleY];for(d=0;d<n;d++){u=void 0;var b=void 0,S=void 0,I=void 0,k=void 0,F=void 0;r?(u=c[0|d*s.scaleX],b=h[0|d*f.scaleX],I=v(u+1.402*((S=w[0|d*y.scaleX])-128)),k=v(u-.3441363*(b-128)-.71413636*(S-128)),F=v(u+1.772*(b-128))):(I=c[0|d*s.scaleX],k=h[0|d*f.scaleX],F=w[0|d*y.scaleX]),o[t++]=I,o[t++]=k,o[t++]=F}}break;case 4:if(!e.adobe)throw new Error("Unsupported color mode (4 components)");r=!1,e.adobe&&e.adobe.transformCode&&(r=!0),s=e.components[0],f=e.components[1],y=e.components[2];var D=e.components[3];for(l=0;l<i;l++){c=s.lines[0|l*s.scaleY],h=f.lines[0|l*f.scaleY],w=y.lines[0|l*y.scaleY];var C=D.lines[0|l*D.scaleY];for(d=0;d<n;d++){u=void 0,b=void 0,S=void 0;var P=void 0,U=void 0,M=void 0,A=void 0;r?(u=c[0|d*s.scaleX],b=h[0|d*f.scaleX],S=w[0|d*y.scaleX],P=C[0|d*D.scaleX],U=255-v(u+1.402*(S-128)),M=255-v(u-.3441363*(b-128)-.71413636*(S-128)),A=255-v(u+1.772*(b-128))):(U=c[0|d*s.scaleX],M=h[0|d*f.scaleX],A=w[0|d*y.scaleX],P=C[0|d*D.scaleX]),o[t++]=255-U,o[t++]=255-M,o[t++]=255-A,o[t++]=255-P}}break;default:throw new Error("Unsupported color mode")}return o}(n),a=t(n.width,n.height),o=a.width,s=a.height,l=a.data,c=0,d=0;switch(n.components.length){case 1:for(var u=0;u<s;u++)for(var y=0;y<o;y++){var w=i[c++];l[d++]=w,l[d++]=w,l[d++]=w,l[d++]=255}break;case 3:for(u=0;u<s;u++)for(y=0;y<o;y++){var b=i[c++],S=i[c++],I=i[c++];l[d++]=b,l[d++]=S,l[d++]=I,l[d++]=255}break;case 4:for(u=0;u<s;u++)for(y=0;y<o;y++){var k=i[c++],F=i[c++],D=(w=i[c++],i[c++]);b=255-v(k*(1-D/255)+D),S=255-v(F*(1-D/255)+D),I=255-v(w*(1-D/255)+D),l[d++]=b,l[d++]=S,l[d++]=I,l[d++]=255}break;default:throw new Error("Unsupported color mode")}return a}},120:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.SectionDividerType=t.ColorMode=void 0,(n=t.ColorMode||(t.ColorMode={}))[n.Bitmap=0]="Bitmap",n[n.Grayscale=1]="Grayscale",n[n.Indexed=2]="Indexed",n[n.RGB=3]="RGB",n[n.CMYK=4]="CMYK",n[n.Multichannel=7]="Multichannel",n[n.Duotone=8]="Duotone",n[n.Lab=9]="Lab",(r=t.SectionDividerType||(t.SectionDividerType={}))[r.Other=0]="Other",r[r.OpenFolder=1]="OpenFolder",r[r.ClosedFolder=2]="ClosedFolder",r[r.BoundingSectionDivider=3]="BoundingSectionDivider"},854:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.readPattern=t.readColor=t.readSection=t.readDataRLE=t.readDataZipWithoutPrediction=t.readPsd=t.checkSignature=t.skipBytes=t.readAsciiString=t.readUnicodeStringWithLengthLE=t.readUnicodeStringWithLength=t.readUnicodeString=t.readPascalString=t.readSignature=t.readBytes=t.readFixedPointPath32=t.readFixedPoint32=t.readFloat64=t.readFloat32=t.readUint32=t.readInt32LE=t.readInt32=t.readUint16LE=t.readUint16=t.readInt16=t.peekUint8=t.readUint8=t.warnOrThrow=t.createReader=t.supportedColorModes=void 0;var i=r(331),a=r(534),o=r(692),s=r(609);t.supportedColorModes=[0,1,3];var l=["bitmap","grayscale","indexed","RGB","CMYK","multichannel","duotone","lab"];function c(e){for(var t=e.width*e.height*4,r=0;r<t;r+=4)e.data[r+1]=e.data[r],e.data[r+2]=e.data[r]}function d(e,t){if(e.strict)throw new Error(t);e.debug&&console.warn(t)}function u(e){return e.offset+=1,e.view.getUint8(e.offset-1)}function f(e){return e.view.getUint8(e.offset)}function p(e){return e.offset+=2,e.view.getInt16(e.offset-2,!1)}function h(e){return e.offset+=2,e.view.getUint16(e.offset-2,!1)}function g(e){return e.offset+=2,e.view.getUint16(e.offset-2,!0)}function m(e){return e.offset+=4,e.view.getInt32(e.offset-4,!1)}function v(e){return e.offset+=4,e.view.getUint32(e.offset-4,!1)}function y(e){return e.offset+=8,e.view.getFloat64(e.offset-8,!1)}function w(e,t){var r=e.view.byteOffset+e.offset;if(e.offset+=t,r+t>e.view.buffer.byteLength){if(d(e,"Reading bytes exceeding buffer length"),t>104857600)throw new Error("Reading past end of file");var n=new Uint8Array(t),i=Math.min(t,e.view.byteLength-r);return i>0&&n.set(new Uint8Array(e.view.buffer,r,i)),n}return new Uint8Array(e.view.buffer,r,t)}function b(e){return C(e,4)}function S(e,t){for(var r=u(e),n=r?C(e,r):"";++r%t;)e.offset++;return n}function I(e){return k(e,v(e))}function k(e,t){for(var r="";t--;){var n=h(e);(n||t>0)&&(r+=String.fromCharCode(n))}return r}function F(e,t){e.offset+=t}function D(e,t,r){var n=e.offset,i=b(e);if(i!==t&&i!==r)throw new Error("Invalid signature: '".concat(i,"' at 0x").concat(n.toString(16)))}function C(e,t){for(var r=w(e,t),n="",i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return n}function P(e){return"8BIM"===e||"MeSa"===e||"AgHg"===e||"PHUT"===e||"DCSR"===e}function U(e,t,r){var n={};n.top=m(e),n.left=m(e),n.bottom=m(e),n.right=m(e);for(var i=h(e),o=[],s=0;s<i;s++){var l=p(e),c=v(e);if(r.large){if(0!==c)throw new Error("Sizes larger than 4GB are not supported");c=v(e)}o.push({id:l,length:c})}D(e,"8BIM");var d=b(e);if(!a.toBlendMode[d])throw new Error("Invalid blend mode: '".concat(d,"'"));n.blendMode=a.toBlendMode[d],n.opacity=u(e)/255,n.clipping=1===u(e);var f=u(e);return n.transparencyProtected=0!=(1&f),n.hidden=0!=(2&f),32&f&&(n.effectsOpen=!0),F(e,1),T(e,1,(function(i){var a=function(e,t){return T(e,1,(function(r){if(r()){var n={};n.top=m(e),n.left=m(e),n.bottom=m(e),n.right=m(e),n.defaultColor=u(e);var i=u(e);if(n.positionRelativeToLayer=0!=(1&i),n.disabled=0!=(2&i),n.fromVectorData=0!=(8&i),16&i){var a=u(e);1&a&&(n.userMaskDensity=u(e)/255),2&a&&(n.userMaskFeather=y(e)),4&a&&(n.vectorMaskDensity=u(e)/255),8&a&&(n.vectorMaskFeather=y(e))}return r()>2&&(t.logMissingFeatures&&console.log("Unhandled extra mask params"),u(e),u(e),m(e),m(e),m(e),m(e)),F(e,r()),n}}))}(e,r);for(a&&(n.mask=a),function(e){T(e,1,(function(t){for(var r=v(e),n=v(e),i=[];t();){var a=v(e),o=v(e);i.push({sourceRange:a,destRange:o})}return{compositeGrayBlendSource:r,compositeGraphBlendDestinationRange:n,ranges:i}}))}(e),n.name=S(e,4);i();)x(e,n,t,r)})),{layer:n,channels:o}}function M(e,t,r,n,i){var o,s=(r.right||0)-(r.left||0),l=(r.bottom||0)-(r.top||0),d=4===t.colorMode;if(s&&l)if(d){o={width:s,height:l,data:new Uint8ClampedArray(s*l*5)};for(var u=4;u<o.data.byteLength;u+=5)o.data[u]=255}else o=(0,a.createImageData)(s,l),(0,a.resetImageData)(o);a.RAW_IMAGE_DATA&&(r.imageDataRaw=[]);for(var f=0,p=n;f<p.length;f++){var g=p[f];if(0!==g.length){if(g.length<2)throw new Error("Invalid channel length");var m=e.offset,v=h(e);if(v>3&&(e.offset-=1,v=h(e)),v>3&&(e.offset-=3,v=h(e)),v>3)throw new Error("Invalid compression: ".concat(v));if(-2===g.id){var y=r.mask;if(!y)throw new Error("Missing layer mask data");var w=(y.right||0)-(y.left||0),b=(y.bottom||0)-(y.top||0);if(w&&b){var S=(0,a.createImageData)(w,b);(0,a.resetImageData)(S);var I=e.offset;A(e,g.length,S,v,w,b,0,i.large,4),a.RAW_IMAGE_DATA&&(r.maskDataRaw=new Uint8Array(e.view.buffer,e.view.byteOffset+I,e.offset-I)),c(S),i.useImageData?y.imageData=S:(y.canvas=(0,a.createCanvas)(w,b),y.canvas.getContext("2d").putImageData(S,0,0))}}else{var k=(0,a.offsetForChannel)(g.id,d),F=o;k<0&&(F=void 0,i.throwForMissingFeatures),A(e,g.length,F,v,s,l,k,i.large,d?5:4),a.RAW_IMAGE_DATA&&(r.imageDataRaw[g.id]=new Uint8Array(e.view.buffer,e.view.byteOffset+m+2,g.length-2)),e.offset=m+g.length,F&&1===t.colorMode&&c(F)}}}if(o){if(d){var D=o;E(D,o=(0,a.createImageData)(D.width,D.height),!1)}i.useImageData?r.imageData=o:(r.canvas=(0,a.createCanvas)(s,l),r.canvas.getContext("2d").putImageData(o,0,0))}}function A(e,t,r,n,i,a,o,s,l){if(0===n)L(e,r,i,a,l,o);else if(1===n)B(e,r,0,a,l,[o],s);else{if(2!==n)throw 3===n?new Error("Compression type not supported: ".concat(n)):new Error("Invalid Compression type: ".concat(n));O(e,t,r,i,a,l,o)}}function x(e,t,r,n){var i=b(e);if("8BIM"!==i&&"8B64"!==i)throw new Error("Invalid signature: '".concat(i,"' at 0x").concat((e.offset-4).toString(16)));var s=b(e),l="8B64"===i||n.large&&-1!==a.largeAdditionalInfoKeys.indexOf(s);"PlLd"!=s&&"SoLd"!=s||console.log(s),T(e,2,(function(i){var a=o.infoHandlersMap[s];if(a)try{a.read(e,t,i,r,n)}catch(e){if(n.throwForMissingFeatures)throw e}else n.logMissingFeatures&&console.log("Unhandled additional info: ".concat(s)),F(e,i());i()&&(n.logMissingFeatures&&console.log("Unread ".concat(i()," bytes left for additional info: ").concat(s)),F(e,i()))}),!1,l)}function E(e,t,r){for(var n=t.width*t.height*4,i=e.data,a=t.data,o=0,s=0;s<n;o+=5,s+=4){var l=i[o],c=i[o+1],d=i[o+2],u=i[o+3];a[s]=(l*u|0)/255|0,a[s+1]=(c*u|0)/255|0,a[s+2]=(d*u|0)/255|0,a[s+3]=r?255-i[o+4]:i[o+4]}}function L(e,t,r,n,i,a){var o=r*n,s=w(e,o);if(t&&a<i)for(var l=t.data,c=0,d=0|a;c<o;c++,d=d+i|0)l[d]=s[c]}function O(e,t,r,n,a,o,s){var l=w(e,t),c=(0,i.inflate)(l),d=n*a;if(r&&s<o)for(var u=r.data,f=0,p=0|s;f<d;f++,p=p+o|0)u[p]=c[f]}function B(e,t,r,n,i,a,o){var s,l=t&&t.data;if(o){s=new Uint32Array(a.length*n);for(var c=0,d=0;c<a.length;c++)for(var u=0;u<n;u++,d++)s[d]=v(e)}else for(s=new Uint16Array(a.length*n),c=0,d=0;c<a.length;c++)for(u=0;u<n;u++,d++)s[d]=h(e);var f=i-1|0,p=0;for(d=0;p<a.length;p++){var g=0|a[p];if(!l||p>f||g>f)for(u=0;u<n;u++,d++)F(e,s[d]);else{u=0;for(var m=0|g;u<n;u++,d++)for(var y=s[d],b=w(e,y),S=0;S<y;S++){var I=b[S];if(I>128){var k=b[++S];I=256-I|0;for(var D=0;D<=I;D=D+1|0)l[m]=k,m=m+i|0}else if(I<128)for(D=0;D<=I;D=D+1|0)l[m]=b[++S],m=m+i|0}}}}function T(e,t,r,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1);var a=v(e);if(i){if(0!==a)throw new Error("Sizes larger than 4GB are not supported");a=v(e)}if(!(a<=0&&n)){var o=e.offset+a;if(o>e.view.byteLength)throw new Error("Section exceeds file size");var s=r((function(){return o-e.offset}));for(e.offset!==o&&(e.offset>o?d(e,"Exceeded section limits"):d(e,"Unread section data"));o%t;)o++;return e.offset=o,s}}t.createReader=function(e,t,r){return{view:new DataView(e,t,r),offset:0,strict:!1,debug:!1}},t.warnOrThrow=d,t.readUint8=u,t.peekUint8=f,t.readInt16=p,t.readUint16=h,t.readUint16LE=g,t.readInt32=m,t.readInt32LE=function(e){return e.offset+=4,e.view.getInt32(e.offset-4,!0)},t.readUint32=v,t.readFloat32=function(e){return e.offset+=4,e.view.getFloat32(e.offset-4,!1)},t.readFloat64=y,t.readFixedPoint32=function(e){return m(e)/65536},t.readFixedPointPath32=function(e){return m(e)/(1<<24)},t.readBytes=w,t.readSignature=b,t.readPascalString=S,t.readUnicodeString=I,t.readUnicodeStringWithLength=k,t.readUnicodeStringWithLengthLE=function(e,t){for(var r="";t--;){var n=g(e);(n||t>0)&&(r+=String.fromCharCode(n))}return r},t.readAsciiString=function(e,t){for(var r="";t--;)r+=String.fromCharCode(u(e));return r},t.skipBytes=F,t.checkSignature=D,t.readPsd=function(e,r){var i;void 0===r&&(r={}),D(e,"8BPS");var o=h(e);if(1!==o&&2!==o)throw new Error("Invalid PSD file version: ".concat(o));F(e,6);var d=h(e),g=v(e),m=v(e),y=h(e),I=h(e),k=1===o?3e4:3e5;if(m>k||g>k)throw new Error("Invalid size");if(d>16)throw new Error("Invalid channel count");if(y>32)throw new Error("Invalid bitsPerChannel count");if(-1===t.supportedColorModes.indexOf(I))throw new Error("Color mode not supported: ".concat(null!==(i=l[I])&&void 0!==i?i:I));var C={width:m,height:g,channels:d,bitsPerChannel:y,colorMode:I},A=n(n({},r),{large:2===o}),O=[0,1,-1,2,-2,3,-3,4,-4];T(e,1,(function(t){if(A.throwForMissingFeatures)throw new Error("Color mode data not supported");F(e,t())})),T(e,1,(function(t){for(var r=function(){for(var t=e.offset,r="",n=0,i=O;n<i.length;n++){var a=i[n];try{e.offset=t+a,r=b(e)}catch(e){}if(P(r))break}if(!P(r))throw new Error("Invalid signature: '".concat(r,"' at 0x").concat(t.toString(16)));var o=h(e);S(e,2),T(e,2,(function(t){var r=s.resourceHandlersMap[o],n=1036===o&&!!A.skipThumbnail;if(C.imageResources||(C.imageResources={}),r&&!n)try{r.read(e,C.imageResources,t,A)}catch(r){if(A.throwForMissingFeatures)throw r;F(e,t())}else F(e,t())}))};t();)r()}));var R=!1;T(e,1,(function(t){if(R=function(e,t,r){var n=!1;return T(e,2,(function(i){var a=p(e);a<0&&(n=!0,a=-a);for(var o=[],s=[],l=0;l<a;l++){var c=U(e,t,r),d=c.layer,u=c.channels;o.push(d),s.push(u)}if(!r.skipLayerImageData)for(l=0;l<a;l++)M(e,t,o[l],s[l],r);F(e,i()),t.children||(t.children=[]);var f=[t];for(l=o.length-1;l>=0;l--){var h=o[l],g=h.sectionDivider?h.sectionDivider.type:0;1===g||2===g?(h.opened=1===g,h.children=[],f[f.length-1].children.unshift(h),f.push(h)):3===g?f.pop():f[f.length-1].children.unshift(h)}}),void 0,r.large),n}(e,C,A),t()>0){var r=function(e){return T(e,1,(function(t){if(t()){var r=h(e),n=h(e),i=h(e),a=h(e),o=h(e),s=h(e)/255,l=u(e);return F(e,t()),{overlayColorSpace:r,colorSpace1:n,colorSpace2:i,colorSpace3:a,colorSpace4:o,opacity:s,kind:l}}}))}(e);r&&(C.globalLayerMaskInfo=r)}else F(e,t());for(;t()>0;){for(;t()&&0===f(e);)F(e,1);t()>=12?x(e,C,C,A):F(e,t())}}),void 0,A.large);var V=C.children&&C.children.length;return A.skipCompositeImageData&&(A.skipLayerImageData||V)||function(e,r,n,i){var o=h(e);if(-1===t.supportedColorModes.indexOf(r.colorMode))throw new Error("Color mode not supported: ".concat(r.colorMode));if(0!==o&&1!==o)throw new Error("Compression type not supported: ".concat(o));var s=(0,a.createImageData)(r.width,r.height);switch((0,a.resetImageData)(s),r.colorMode){case 0:var l=void 0;if(0===o)l=w(e,Math.ceil(r.width/8)*r.height);else{if(1!==o)throw new Error("Bitmap compression not supported: ".concat(o));B(e,{data:l=new Uint8Array(r.width*r.height),width:r.width,height:r.height},r.width,r.height,1,[0],i.large)}(0,a.decodeBitmap)(l,s.data,r.width,r.height);break;case 3:case 1:var d=1===r.colorMode?[0]:[0,1,2];if(r.channels&&r.channels>3)for(var u=3;u<r.channels;u++)d.push(u);else n&&d.push(3);if(0===o)for(u=0;u<d.length;u++)L(e,s,r.width,r.height,4,d[u]);else if(1===o){var f=e.offset;B(e,s,r.width,r.height,4,d,i.large),a.RAW_IMAGE_DATA&&(r.imageDataRaw=new Uint8Array(e.view.buffer,e.view.byteOffset+f,e.offset-f))}1===r.colorMode&&c(s);break;case 4:if(4!==r.channels)throw new Error("Invalid channel count");if(d=[0,1,2,3],n&&d.push(4),0===o)throw new Error("Not implemented");if(1===o){var p={width:s.width,height:s.height,data:new Uint8Array(s.width*s.height*5)};f=e.offset,B(e,p,r.width,r.height,5,d,i.large),E(p,s,!0),a.RAW_IMAGE_DATA&&(r.imageDataRaw=new Uint8Array(e.view.buffer,e.view.byteOffset+f,e.offset-f))}break;default:throw new Error("Color mode not supported: ".concat(r.colorMode))}if(n){var g=s.data,m=s.width*s.height*4;for(u=0;u<m;u+=4){var v=g[u+3];if(0!=v&&255!=v){var y=1/(v/255),b=255*(1-y);g[u+0]=g[u+0]*y+b,g[u+1]=g[u+1]*y+b,g[u+2]=g[u+2]*y+b}}}i.useImageData?r.imageData=s:(r.canvas=(0,a.createCanvas)(r.width,r.height),r.canvas.getContext("2d").putImageData(s,0,0))}(e,C,R,A),C},t.readDataZipWithoutPrediction=O,t.readDataRLE=B,t.readSection=T,t.readColor=function(e){switch(h(e)){case 0:var t=h(e)/257,r=h(e)/257,n=h(e)/257;return F(e,2),{r:t,g:r,b:n};case 1:var i=h(e)/65535,a=h(e)/65535;return n=h(e)/65535,F(e,2),{h:i,s:a,b:n};case 2:return{c:h(e)/257,m:h(e)/257,y:h(e)/257,k:d=h(e)/257};case 7:var o=p(e)/1e4,s=p(e),l=p(e),c=s<0?s/12800:s/12700;return n=l<0?l/12800:l/12700,F(e,2),{l:o,a:c,b:n};case 8:var d=255*h(e)/1e4;return F(e,6),{k:d};default:throw new Error("Invalid color space")}},t.readPattern=function(e){v(e);var t=v(e);if(1!==t)throw new Error("Invalid pattern version: ".concat(t));var r=v(e),n=p(e),i=p(e);if(3!==r&&1!==r&&2!==r)throw new Error("Unsupported pattern color mode: ".concat(r));var a=I(e),o=S(e,1),s=[];if(2===r){for(var l=0;l<256;l++)s.push({r:u(e),g:u(e),b:u(e)});F(e,4)}var c=v(e);if(3!==c)throw new Error("Invalid pattern VMAL version: ".concat(c));v(e);var d=v(e),f=v(e),g=v(e),m=v(e),y=v(e),b=m-f,k=g-d,D=new Uint8Array(b*k*4);for(l=3;l<D.byteLength;l+=4)D[l]=255;l=0;for(var C=0;l<y+2;l++)if(v(e)){var P=v(e),U=v(e),M=v(e),A=v(e),x=v(e),E=v(e),L=h(e),O=u(e),B=w(e,P-23);if(8!==U||8!==L)throw new Error("16bit pixel depth not supported for patterns");var T=E-A,R=x-M,V=A-f,_=M-d;if(0===O){if(3===r&&C<3)for(var z=0;z<R;z++)for(var G=0;G<T;G++){var N=G+z*T;D[(H=4*(V+G+(z+_)*b))+C]=B[N]}if(1===r&&C<1)for(var j=0;j<R;j++)for(var W=0;W<T;W++){var H=4*(V+W+(j+_)*b),X=B[N=W+j*T];D[H+0]=X,D[H+1]=X,D[H+2]=X}if(2===r)throw new Error("Indexed pattern color mode not implemented")}else{if(1!==O)throw new Error("Invalid pattern compression mode");console.error("Unsupported pattern compression"),a+=" (failed to decode)"}C++}return{id:o,name:a,x:n,y:i,bounds:{x:f,y:d,w:b,h:k},data:D}}},206:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.writeColor=t.writePsd=t.writeSection=t.writeUnicodeStringWithPadding=t.writeUnicodeString=t.writeUnicodeStringWithoutLengthLE=t.writeUnicodeStringWithoutLength=t.writePascalString=t.writeSignature=t.writeZeros=t.writeBytes=t.writeFixedPointPath32=t.writeFixedPoint32=t.writeFloat64=t.writeFloat32=t.writeUint32=t.writeInt32LE=t.writeInt32=t.writeUint16LE=t.writeUint16=t.writeInt16=t.writeUint8=t.getWriterBufferNoCopy=t.getWriterBuffer=t.createWriter=void 0;var i=r(534),a=r(692),o=r(609);function s(e,t){var r=F(e,1);e.view.setUint8(r,t)}function l(e,t){var r=F(e,2);e.view.setInt16(r,t,!1)}function c(e,t){var r=F(e,2);e.view.setUint16(r,t,!1)}function d(e,t){var r=F(e,2);e.view.setUint16(r,t,!0)}function u(e,t){var r=F(e,4);e.view.setInt32(r,t,!1)}function f(e,t){var r=F(e,4);e.view.setUint32(r,t,!1)}function p(e,t){var r=F(e,8);e.view.setFloat64(r,t,!1)}function h(e,t){t&&(k(e,e.offset+t.length),new Uint8Array(e.buffer).set(t,e.offset),e.offset+=t.length)}function g(e,t){for(var r=0;r<t;r++)s(e,0)}function m(e,t){if(4!==t.length)throw new Error("Invalid signature: '".concat(t,"'"));for(var r=0;r<4;r++)s(e,t.charCodeAt(r))}function v(e,t,r){var n=t.length;if(n>255)throw new Error("String too long");s(e,n);for(var i=0;i<n;i++){var a=t.charCodeAt(i);s(e,a<128?a:"?".charCodeAt(0))}for(;++n%r;)s(e,0)}function y(e,t){for(var r=0;r<t.length;r++)c(e,t.charCodeAt(r))}function w(e){void 0===e&&(e=[]);for(var t=0,r=0,n=e;r<n.length;r++){var i=n[r];if(i.canvas||i.imageData){var a=C(i),o=a.width,s=a.height;t=Math.max(t,2*s+2*o*s)}i.children&&(t=Math.max(t,w(i.children)))}return t}function b(e,t,r,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1),i&&f(e,0);var a=e.offset;f(e,0),r();for(var o=e.offset-a-4,l=o;e.offset%t!=0;)s(e,0),l++;n&&(o=l),e.view.setUint32(a,o,!1)}function S(e,t,r,n){for(var o=function(a){var o=a.key;if("Txt2"===o&&n.invalidateTextLayers)return"continue";if("vmsk"===o&&n.psb&&(o="vsms"),a.has(t)){var s=n.psb&&-1!==i.largeAdditionalInfoKeys.indexOf(o),l="Txt2"!==o&&"cinf"!==o&&"extn"!==o,c="Txt2"===o||"luni"===o||"vmsk"===o||"artb"===o||"artd"===o||"vogk"===o||"SoLd"===o||"lnk2"===o||"vscg"===o||"vsms"===o||"GdFl"===o||"lmfx"===o||"lrFX"===o||"cinf"===o||"PlLd"===o||"Anno"===o;m(e,s?"8B64":"8BIM"),m(e,o),b(e,c?4:2,(function(){a.write(e,t,r,n)}),l,s)}},s=0,l=a.infoHandlers;s<l.length;s++)o(l[s])}function I(e,t){if(t)for(var r=0,a=t;r<a.length;r++){var o=a[r];if(o.children&&o.canvas)throw new Error("Invalid layer, cannot have both 'canvas' and 'children' properties");if(o.children&&o.imageData)throw new Error("Invalid layer, cannot have both 'imageData' and 'children' properties");o.children?(e.push({name:"</Layer group>",sectionDivider:{type:3}}),I(e,o.children),e.push(n({sectionDivider:{type:!1===o.opened?2:1,key:i.fromBlendMode[o.blendMode]||"pass",subType:0}},o))):e.push(n({},o))}}function k(e,t){t>e.buffer.byteLength&&function(e,t){var r=e.buffer.byteLength;do{r*=2}while(t>r);var n=new ArrayBuffer(r),i=new Uint8Array(n),a=new Uint8Array(e.buffer);i.set(a),e.buffer=n,e.view=new DataView(e.buffer)}(e,t)}function F(e,t){var r=e.offset;return k(e,e.offset+=t),r}function D(e){var t=(0,i.createCanvas)(10,10),r=1;e.width>e.height?(t.width=160,t.height=Math.floor(e.height*(t.width/e.width)),r=t.width/e.width):(t.height=160,t.width=Math.floor(e.width*(t.height/e.height)),r=t.height/e.height);var n=t.getContext("2d");if(n.scale(r,r),e.imageData){var a=(0,i.createCanvas)(e.imageData.width,e.imageData.height);a.getContext("2d").putImageData(e.imageData,0,0),n.drawImage(a,0,0)}else e.canvas&&n.drawImage(e.canvas,0,0);return t}function C(e){var t=e.canvas;return e.imageData||t||{width:0,height:0}}function P(e,t,r,n){for(var i=e.data,a=4*(t*e.width+r)+3|0,o=a+4*(n-r)|0,s=a;s<o;s=s+4|0)if(0!==i[s])return!1;return!0}function U(e,t,r,n){for(var i=e.data,a=4*e.width|0,o=r,s=r*a+4*t+3|0;o<n;o++,s=s+a|0)if(0!==i[s])return!1;return!0}t.createWriter=function(e){void 0===e&&(e=4096);var t=new ArrayBuffer(e);return{buffer:t,view:new DataView(t),offset:0}},t.getWriterBuffer=function(e){return e.buffer.slice(0,e.offset)},t.getWriterBufferNoCopy=function(e){return new Uint8Array(e.buffer,0,e.offset)},t.writeUint8=s,t.writeInt16=l,t.writeUint16=c,t.writeUint16LE=d,t.writeInt32=u,t.writeInt32LE=function(e,t){var r=F(e,4);e.view.setInt32(r,t,!0)},t.writeUint32=f,t.writeFloat32=function(e,t){var r=F(e,4);e.view.setFloat32(r,t,!1)},t.writeFloat64=p,t.writeFixedPoint32=function(e,t){u(e,65536*t)},t.writeFixedPointPath32=function(e,t){u(e,t*(1<<24))},t.writeBytes=h,t.writeZeros=g,t.writeSignature=m,t.writePascalString=v,t.writeUnicodeStringWithoutLength=y,t.writeUnicodeStringWithoutLengthLE=function(e,t){for(var r=0;r<t.length;r++)d(e,t.charCodeAt(r))},t.writeUnicodeString=function(e,t){f(e,t.length),y(e,t)},t.writeUnicodeStringWithPadding=function(e,t){f(e,t.length+1);for(var r=0;r<t.length;r++)c(e,t.charCodeAt(r));c(e,0)},t.writeSection=b,t.writePsd=function(e,t,r){if(void 0===r&&(r={}),!(+t.width>0&&+t.height>0))throw new Error("Invalid document size");if((t.width>3e4||t.height>3e4)&&!r.psb)throw new Error("Document size is too large (max is 30000x30000, use PSB format instead)");var a=t.imageResources||{},d=n(n({},r),{layerIds:new Set,layerToId:new Map});d.generateThumbnail&&(a=n(n({},a),{thumbnail:D(t)}));var y=t.imageData;if(!y&&t.canvas&&(y=t.canvas.getContext("2d").getImageData(0,0,t.canvas.width,t.canvas.height)),y&&(t.width!==y.width||t.height!==y.height))throw new Error("Document canvas must have the same size as document");var k=!!y&&(0,i.hasAlpha)(y),F=Math.max(w(t.children),8*t.width*t.height+2*t.height),M=new Uint8Array(F);m(e,"8BPS"),c(e,r.psb?2:1),g(e,6),c(e,k?4:3),f(e,t.height),f(e,t.width),c(e,8),c(e,3),b(e,1,(function(){})),b(e,1,(function(){for(var t=function(t){for(var r=t.has(a),n=!1===r?0:!0===r?1:r,i=function(r){m(e,"8BIM"),c(e,t.key),v(e,"",2),b(e,2,(function(){return t.write(e,a,r)}))},o=0;o<n;o++)i(o)},r=0,n=o.resourceHandlers;r<n.length;r++)t(n[r])})),b(e,2,(function(){!function(e,t,r,n,a){b(t,4,(function(){var o,d=[];I(d,r.children),d.length||d.push({}),l(t,n?-d.length:d.length);for(var y=d.map((function(t,r){return function(e,t,r,n){var a=function(e,t,r,n){var a,o=0|t.top,s=0|t.left,l=0|t.right,c=0|t.bottom,d=[{channelId:-1,compression:0,buffer:void 0,length:2},{channelId:0,compression:0,buffer:void 0,length:2},{channelId:1,compression:0,buffer:void 0,length:2},{channelId:2,compression:0,buffer:void 0,length:2}],u=C(t),f=u.width,p=u.height;if(!t.canvas&&!t.imageData||!f||!p)return{layer:t,top:o,left:s,right:l=s,bottom:c=o,channels:d};l=s+f,c=o+p;var h=t.imageData||t.canvas.getContext("2d").getImageData(0,0,f,p);if(n.trimImageData){var g=function(e){for(var t=0,r=0,n=e.width,i=e.height;t<i&&P(e,t,r,n);)t++;for(;i>t&&P(e,i-1,r,n);)i--;for(;r<n&&U(e,r,t,i);)r++;for(;n>r&&U(e,n-1,t,i);)n--;return{top:t,left:r,right:n,bottom:i}}(h);if(0!==g.left||0!==g.top||g.right!==h.width||g.bottom!==h.height){if(s+=g.left,o+=g.top,l-=h.width-g.right,p=(c-=h.height-g.bottom)-o,!(f=l-s)||!p)return{layer:t,top:o,left:s,right:l,bottom:c,channels:d};h=t.imageData?function(e,t,r,n,a){for(var o=(0,i.createImageData)(n,a),s=e.data,l=o.data,c=0;c<a;c++)for(var d=0;d<n;d++){var u=4*(d+t+(c+r)*n),f=4*(d+c*n);l[f]=s[u],l[f+1]=s[u+1],l[f+2]=s[u+2],l[f+3]=s[u+3]}return o}(h,g.left,g.top,f,p):t.canvas.getContext("2d").getImageData(g.left,g.top,f,p)}}var m=[0,1,2];return(!r||n.noBackground||t.mask||(0,i.hasAlpha)(h)||i.RAW_IMAGE_DATA&&(null===(a=t.imageDataRaw)||void 0===a?void 0:a[-1]))&&m.unshift(-1),d=m.map((function(r){var a,o,s=(0,i.offsetForChannel)(r,!1);return i.RAW_IMAGE_DATA&&t.imageDataRaw?(a=t.imageDataRaw[r],o=1):n.compress?(a=(0,i.writeDataZipWithoutPrediction)(h,[s]),o=2):(a=(0,i.writeDataRLE)(e,h,[s],!!n.psb),o=1),{channelId:r,compression:o,buffer:a,length:2+a.length}})),{layer:t,top:o,left:s,right:l,bottom:c,channels:d}}(e,t,r,n),o=t.mask;if(o){var s=0|o.top,l=0|o.left,c=0|o.right,d=0|o.bottom,u=C(o),f=u.width,p=u.height,h=o.imageData;if(!h&&o.canvas&&f&&p&&(h=o.canvas.getContext("2d").getImageData(0,0,f,p)),f&&p&&h){if(c=l+f,d=s+p,h.width!==f||h.height!==p)throw new Error("Invalid imageData dimentions");var g=void 0,m=void 0;i.RAW_IMAGE_DATA&&t.maskDataRaw?(g=t.maskDataRaw,m=1):n.compress?(g=(0,i.writeDataZipWithoutPrediction)(h,[0]),m=2):(g=(0,i.writeDataRLE)(e,h,[0],!!n.psb),m=1),a.mask={top:s,left:l,right:c,bottom:d},a.channels.push({channelId:-2,compression:m,buffer:g,length:2+g.length})}else a.mask={top:0,left:0,right:0,bottom:0}}return a}(e,t,0===r,a)})),w=function(e){var n=e.layer,d=e.top,h=e.left,y=e.bottom,w=e.right,I=e.channels;u(t,d),u(t,h),u(t,y),u(t,w),c(t,I.length);for(var k=0,F=I;k<F.length;k++){var D=F[k];l(t,D.channelId),a.psb&&f(t,0),f(t,D.length)}m(t,"8BIM"),m(t,i.fromBlendMode[n.blendMode]||"norm"),s(t,Math.round(255*(0,i.clamp)(null!==(o=n.opacity)&&void 0!==o?o:1,0,1))),s(t,n.clipping?1:0);var C=8;n.transparencyProtected&&(C|=1),n.hidden&&(C|=2),(n.vectorMask||n.sectionDivider&&0!==n.sectionDivider.type)&&(C|=16),n.effectsOpen&&(C|=32),s(t,C),s(t,0),b(t,1,(function(){!function(e,t,r){var n=t.mask;b(e,1,(function(){if(n){var t=r.mask||{};u(e,t.top||0),u(e,t.left||0),u(e,t.bottom||0),u(e,t.right||0),s(e,n.defaultColor||0);var i=0;void 0!==n.userMaskDensity&&(i|=1),void 0!==n.userMaskFeather&&(i|=2),void 0!==n.vectorMaskDensity&&(i|=4),void 0!==n.vectorMaskFeather&&(i|=8);var a=0;n.disabled&&(a|=2),n.positionRelativeToLayer&&(a|=1),n.fromVectorData&&(a|=8),i&&(a|=16),s(e,a),i&&(s(e,i),void 0!==n.userMaskDensity&&s(e,Math.round(255*n.userMaskDensity)),void 0!==n.userMaskFeather&&p(e,n.userMaskFeather),void 0!==n.vectorMaskDensity&&s(e,Math.round(255*n.vectorMaskDensity)),void 0!==n.vectorMaskFeather&&p(e,n.vectorMaskFeather)),g(e,2)}}))}(t,n,e),function(e,t){b(e,1,(function(){f(e,65535),f(e,65535);for(var r=t.channels||0,n=0;n<r;n++)f(e,65535),f(e,65535)}))}(t,r),v(t,(n.name||"").substring(0,255),4),S(t,n,r,a)}))},k=0,F=y;k<F.length;k++)w(F[k]);for(var D=0,M=y;D<M.length;D++)for(var A=0,x=M[D].channels;A<x.length;A++){var E=x[A];c(t,E.compression),E.buffer&&h(t,E.buffer)}}),!0,a.psb)}(M,e,t,k,d),function(e,t){b(e,1,(function(){t&&(c(e,t.overlayColorSpace),c(e,t.colorSpace1),c(e,t.colorSpace2),c(e,t.colorSpace3),c(e,t.colorSpace4),c(e,255*t.opacity),s(e,t.kind),g(e,3))}))}(e,t.globalLayerMaskInfo),S(e,t,t,d)}),void 0,!!d.psb);var A=k?[0,1,2,3]:[0,1,2],x=y?y.width:t.width,E=y?y.height:t.height,L={data:new Uint8Array(x*E*4),width:x,height:E};if(c(e,1),i.RAW_IMAGE_DATA&&t.imageDataRaw)console.log("writing raw image data"),h(e,t.imageDataRaw);else{if(y&&L.data.set(new Uint8Array(y.data.buffer,y.data.byteOffset,y.data.byteLength)),k)for(var O=L.width*L.height*4,B=L.data,T=0;T<O;T+=4){var R=B[T+3];if(0!=R&&255!=R){var V=R/255,_=255*(1-V);B[T+0]=B[T+0]*V+_,B[T+1]=B[T+1]*V+_,B[T+2]=B[T+2]*V+_}}h(e,(0,i.writeDataRLE)(M,L,A,!!r.psb))}},t.writeColor=function(e,t){t?"r"in t?(c(e,0),c(e,Math.round(257*t.r)),c(e,Math.round(257*t.g)),c(e,Math.round(257*t.b)),c(e,0)):"fr"in t?(c(e,0),c(e,Math.round(255*t.fr*257)),c(e,Math.round(255*t.fg*257)),c(e,Math.round(255*t.fb*257)),c(e,0)):"l"in t?(c(e,7),l(e,Math.round(1e4*t.l)),l(e,Math.round(t.a<0?12800*t.a:12700*t.a)),l(e,Math.round(t.b<0?12800*t.b:12700*t.b)),c(e,0)):"h"in t?(c(e,1),c(e,Math.round(65535*t.h)),c(e,Math.round(65535*t.s)),c(e,Math.round(65535*t.b)),c(e,0)):"c"in t?(c(e,2),c(e,Math.round(257*t.c)),c(e,Math.round(257*t.m)),c(e,Math.round(257*t.y)),c(e,Math.round(257*t.k))):(c(e,8),c(e,Math.round(1e4*t.k/255)),g(e,6)):(c(e,0),g(e,8))}},791:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expectBuffersEqual=t.compareBuffers=t.compareCanvases=t.compareTwoFiles=t.loadCanvasFromFile=t.saveCanvas=t.extractPSD=t.readPsdFromFile=t.createReaderFromBuffer=t.loadImagesFromDirectory=t.importPSD=t.range=t.repeat=t.toArrayBuffer=t.createCanvas=void 0,r(261).install();var n=r(147),i=r(17),a=r(924);Object.defineProperty(t,"createCanvas",{enumerable:!0,get:function(){return a.createCanvas}}),r(279);var o=r(854);(0,r(30).setLogErrors)(!0);var s=i.join(__dirname,"..","..","results");function l(e){var t=(0,o.createReader)(e.buffer,e.byteOffset,e.byteLength);return t.debug=!0,t}function c(e){var t=new a.Image;t.src=n.readFileSync(e);var r=(0,a.createCanvas)(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),r}t.toArrayBuffer=function(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;++n)r[n]=e[n];return t},t.repeat=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!t.length)throw new Error("missing values");for(var n=[],i=0;i<e;i++)n.push.apply(n,t);return n},t.range=function(e,t){for(var r=[],n=0;n<t;n++)r.push(e+n);return r},t.importPSD=function(e){var t=i.join(e,"data.json");if(n.existsSync(t))return JSON.parse(n.readFileSync(t,"utf8"))},t.loadImagesFromDirectory=function(e){var t={};return n.readdirSync(e).filter((function(e){return/\.png$/.test(e)})).forEach((function(r){return t[r]=c(i.join(e,r))})),t},t.createReaderFromBuffer=l,t.readPsdFromFile=function(e,t){var r=l(n.readFileSync(e));return(0,o.readPsd)(r,t)},t.extractPSD=function(e,t){var r=i.join(s,e);n.existsSync(r)||n.mkdirSync(r),t.canvas&&(n.writeFileSync(i.join(r,"canvas.png"),t.canvas.toBuffer()),t.canvas=void 0),t.children.forEach((function(e,t){e.canvas&&(n.writeFileSync(i.join(r,"layer-".concat(t,".png")),e.canvas.toBuffer()),e.canvas=void 0)})),n.writeFileSync(i.join(r,"data.json"),JSON.stringify(t,null,2))},t.saveCanvas=function(e,t){t&&n.writeFileSync(e,t.toBuffer())},t.loadCanvasFromFile=c,t.compareTwoFiles=function(e,t,r){var i=n.readFileSync(e),a=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);if(a.byteLength!==t.byteLength)throw new Error("File size is different than expected (".concat(r,")"));for(var o=0;o<a.byteLength;o++)if(a[o]!==t[o])throw new Error("Actual file different than expected at index ".concat(o,": actual ").concat(t[o],", expected ").concat(a[o]))},t.compareCanvases=function(e,t,r){var a=function(){var e=i.join(s,"failures");n.existsSync(e)||n.mkdirSync(e),n.writeFileSync(i.join(e,"".concat(r.replace(/[\\/]/,"-"))),t.toBuffer())};if(e!==t){if(!e)throw new Error("Expected canvas is null (".concat(r,")"));if(!t)throw new Error("Actual canvas is null (".concat(r,")"));if(e.width!==t.width||e.height!==t.height)throw a(),new Error("Canvas size is different than expected (".concat(r,")"));for(var o=e.getContext("2d").getImageData(0,0,e.width,e.height),l=t.getContext("2d").getImageData(0,0,t.width,t.height),c=o.width*o.height*4,d=0;d<c;d++)if(o.data[d]!==l.data[d]){a();var u=o.data.length,f=l.data.length;throw new Error("Actual canvas (".concat(f," bytes) different than ")+"expected (".concat(r,") (").concat(u," bytes) ")+"at index ".concat(d,": actual ").concat(l.data[d]," vs. expected ").concat(o.data[d]))}}},t.compareBuffers=function(e,t,r,n,i){var a,o,s;if(void 0===n&&(n=0),void 0===i&&(i=0),!e)throw new Error("Actual buffer is null or undefined (".concat(r,")"));if(!t)throw new Error("Expected buffer is null or undefined (".concat(r,")"));for(var l=n;l<t.length;l++)if(t[l]!==e[l+i])throw new Error("Buffers differ "+"expected: 0x".concat(null===(a=t[l])||void 0===a?void 0:a.toString(16)," at [0x").concat(null==l?void 0:l.toString(16),"] ")+"actual: 0x".concat(null===(o=e[l+i])||void 0===o?void 0:o.toString(16)," at [0x").concat(null===(s=l+i)||void 0===s?void 0:s.toString(16),"] (").concat(r,")"));if(e.length!==t.length)throw new Error("Buffers differ in size actual: ".concat(e.length," expected: ").concat(t.length," (").concat(r,")"))},t.expectBuffersEqual=function(e,t,r){for(var a=Math.max(e.length,t.length),o=0;o<a;o++)if(e[o]!==t[o])throw n.writeFileSync(i.join(__dirname,"..","..","results",r),Buffer.from(e)),new Error("Different byte at 0x".concat(o.toString(16)," in (").concat(r,")"))}},319:function(e,t,r){"use strict";var n,i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});for(var a=r(147),o=r(791),s=r(17),l={throwForMissingFeatures:!0,logMissingFeatures:!0,useImageData:!0},c=function e(t,r){void 0===r&&(r=[]);for(var n=0,i=a.readdirSync(t);n<i.length;n++){var o=i[n],s="".concat(t,"/").concat(o);a.statSync(s).isDirectory()?e(s,r):r.push(s)}return r}("C:\\Users\\Jackson\\OneDrive\\shhz\\ps\\ps\\ps"),d=0;d<c.length;d++){var u=c[d],f=".psd"==s.extname(u).toLowerCase();if("true"==process.env.TS_NODE_DEV&&(f=f&&u.includes("")),f){console.log(u);var p=(0,o.readPsdFromFile)(u,i({},l)),h=u+".data.json";delete p.canvas,null===(n=p.children)||void 0===n||n.forEach((function(e){var t;delete e.canvas,null===(t=e.mask)||void 0===t||delete t.canvas,delete e.engineData})),delete p.imageResources,delete p.engineData;var g=JSON.stringify(p,null,2);a.writeFileSync(h,g)}}console.log("finished")},302:function(e,t){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.encodeEngineData=t.decodeEngineData=void 0;var n={name:"MyriadPro-Regular",script:0,type:0,synthetic:0},i={justification:"left",firstLineIndent:0,startIndent:0,endIndent:0,spaceBefore:0,spaceAfter:0,autoHyphenate:!0,hyphenatedWordSize:6,preHyphen:2,postHyphen:2,consecutiveHyphens:8,zone:36,wordSpacing:[.8,1,1.33],letterSpacing:[0,0,0],glyphSpacing:[1,1,1],autoLeading:1.2,leadingType:0,hanging:!1,burasagari:!1,kinsokuOrder:0,everyLineComposer:!1},a={font:n,fontSize:12,fauxBold:!1,fauxItalic:!1,autoLeading:!0,leading:0,horizontalScale:1,verticalScale:1,tracking:0,autoKerning:!0,kerning:0,baselineShift:0,fontCaps:0,fontBaseline:0,underline:!1,strikethrough:!1,ligatures:!0,dLigatures:!1,baselineDirection:2,tsume:0,styleRunAlignment:2,language:0,noBreak:!1,fillColor:{r:0,g:0,b:0},strokeColor:{r:0,g:0,b:0},fillFlag:!0,strokeFlag:!1,fillFirst:!0,yUnderline:1,outlineWidth:1,characterDirection:0,hindiNumbers:!1,kashida:1,diacriticPos:2},o={isOn:!1,show:!1,size:18,leading:22,color:{r:0,g:0,b:255},leadingFillColor:{r:0,g:0,b:255},alignLineHeightToGridFlags:!1},s=["justification","firstLineIndent","startIndent","endIndent","spaceBefore","spaceAfter","autoHyphenate","hyphenatedWordSize","preHyphen","postHyphen","consecutiveHyphens","zone","wordSpacing","letterSpacing","glyphSpacing","autoLeading","leadingType","hanging","burasagari","kinsokuOrder","everyLineComposer"],l=["font","fontSize","fauxBold","fauxItalic","autoLeading","leading","horizontalScale","verticalScale","tracking","autoKerning","kerning","baselineShift","fontCaps","fontBaseline","underline","strikethrough","ligatures","dLigatures","baselineDirection","tsume","styleRunAlignment","language","noBreak","fillColor","strokeColor","fillFlag","strokeFlag","fillFirst","yUnderline","outlineWidth","characterDirection","hindiNumbers","kashida","diacriticPos"],c=["none","crisp","strong","smooth","sharp"],d=["left","right","center"];function u(e){return e.substring(0,1).toUpperCase()+e.substring(1)}function f(e){var t=e.Values;switch(e.Type){case 0:return{k:255*t[1]};case 1:return 1===t[0]?{r:255*t[1],g:255*t[2],b:255*t[3]}:{r:255*t[1],g:255*t[2],b:255*t[3],a:255*t[0]};case 2:return{c:255*t[1],m:255*t[2],y:255*t[3],k:255*t[4]};default:throw new Error("Unknown color type in text layer")}}function p(e){if(e){if("r"in e)return{Type:1,Values:["a"in e?e.a/255:1,e.r/255,e.g/255,e.b/255]};if("c"in e)return{Type:2,Values:[1,e.c/255,e.m/255,e.y/255,e.k/255]};if("k"in e)return{Type:0,Values:[1,e.k/255]};throw new Error("Invalid color type in text layer")}return{Type:1,Values:[0,0,0,0]}}function h(e,t){if(!e||!t)return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function g(e,t){if(!e||!t)return!1;for(var r=0,n=Object.keys(e);r<n.length;r++)if(e[o=n[r]]!==t[o])return!1;for(var i=0,a=Object.keys(t);i<a.length;i++){var o;if(e[o=a[i]]!==t[o])return!1}return!0}function m(e,t){for(var r=0;r<e.length;r++)if(e[r].name===t.name)return r;return e.push(t),e.length-1}function v(e,t,r){for(var n={},i=0,a=t;i<a.length;i++){var o=a[i],s=u(o);void 0!==e[s]&&(n[o]="justification"===o?d[e[s]]:"font"===o?r[e[s]]:"fillColor"===o||"strokeColor"===o?f(e[s]):e[s])}return n}function y(e,t,r){for(var n,i={},a=0,o=t;a<o.length;a++){var s=o[a],l=u(s);void 0!==e[s]&&(i[l]="justification"===s?d.indexOf(null!==(n=e[s])&&void 0!==n?n:"left"):"font"===s?m(r,e[s]):"fillColor"===s||"strokeColor"===s?p(e[s]):e[s])}return i}function w(e,t){return v(e,s,t)}function b(e,t){return v(e,l,t)}function S(e,t){return y(e,s,t)}function I(e,t){return y(e,l,t)}function k(e,t,r){if(t.length){for(var n=function(r){var n=t[0].style[r];if(void 0!==n){var i;i=Array.isArray(n)?t.every((function(e){return h(e.style[r],n)})):"object"==typeof n?t.every((function(e){return g(e.style[r],n)})):t.every((function(e){return e.style[r]===n})),i&&(e[r]=n)}if(void 0!==e[r])for(var a=0,o=t;a<o.length;a++){var s=o[a];(Array.isArray(n)?h(s.style[r],n):"object"==typeof n?g(s.style[r],n):s.style[r]===n)&&delete s.style[r]}},i=0,a=r;i<a.length;i++)n(a[i]);t.every((function(e){return 0===Object.keys(e.style).length}))&&(t.length=0)}}t.decodeEngineData=function(e){for(var t,r,n,i,a,o,d=e.EngineDict,u=e.ResourceDict,f=u.FontSet.map((function(e){return{name:e.Name,script:e.Script,type:e.FontType,synthetic:e.Synthetic}})),p=d.Editor.Text.replace(/\r/g,"\n"),h=0;/\n$/.test(p);)p=p.substr(0,p.length-1),h++;var g={text:p,antiAlias:null!==(t=c[d.AntiAlias])&&void 0!==t?t:"smooth",useFractionalGlyphWidths:!!d.UseFractionalGlyphWidths,superscriptSize:u.SuperscriptSize,superscriptPosition:u.SuperscriptPosition,subscriptSize:u.SubscriptSize,subscriptPosition:u.SubscriptPosition,smallCapSize:u.SmallCapSize},m=null===(o=null===(a=null===(i=null===(n=null===(r=d.Rendered)||void 0===r?void 0:r.Shapes)||void 0===n?void 0:n.Children)||void 0===i?void 0:i[0])||void 0===a?void 0:a.Cookie)||void 0===o?void 0:o.Photoshop;m&&(g.shapeType=1===m.ShapeType?"box":"point",m.PointBase&&(g.pointBase=m.PointBase),m.BoxBounds&&(g.boxBounds=m.BoxBounds));var v=e.EngineDict.ParagraphRun;g.paragraphStyle={},g.paragraphStyleRuns=[];for(var y=0;y<v.RunArray.length;y++){var S=v.RunArray[y],I=v.RunLengthArray[y],F=w(S.ParagraphSheet.Properties,f);g.paragraphStyleRuns.push({length:I,style:F})}for(var D=h;g.paragraphStyleRuns.length&&D>0;D--)0==--g.paragraphStyleRuns[g.paragraphStyleRuns.length-1].length&&g.paragraphStyleRuns.pop();k(g.paragraphStyle,g.paragraphStyleRuns,s),g.paragraphStyleRuns.length||delete g.paragraphStyleRuns;var C=e.EngineDict.StyleRun;for(g.style={},g.styleRuns=[],y=0;y<C.RunArray.length;y++){var P=C.RunLengthArray[y];(F=b(C.RunArray[y].StyleSheet.StyleSheetData,f)).font||(F.font=f[0]),g.styleRuns.push({length:P,style:F})}for(D=h;g.styleRuns.length&&D>0;D--)0==--g.styleRuns[g.styleRuns.length-1].length&&g.styleRuns.pop();return k(g.style,g.styleRuns,l),g.styleRuns.length||delete g.styleRuns,g},t.encodeEngineData=function(e){var t,s,l,d,u,f,h,g,m,v,y,w,b="".concat((e.text||"").replace(/\r?\n/g,"\r"),"\r"),k=[{name:"AdobeInvisFont",script:0,type:0,synthetic:0}],F=(null===(t=e.style)||void 0===t?void 0:t.font)||(null===(l=null===(s=e.styleRuns)||void 0===s?void 0:s.find((function(e){return e.style.font})))||void 0===l?void 0:l.style.font)||n,D=[],C=[],P=e.paragraphStyleRuns;if(P&&P.length){for(var U=b.length,M=0,A=P;M<A.length;M++){var x=A[M];U-=G=Math.min(x.length,U),G&&(1===U&&x===P[P.length-1]&&(G++,U--),C.push(G),D.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:S(r(r(r({},i),e.paragraphStyle),x.style),k)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}U&&(C.push(U),D.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:S(r(r({},i),e.paragraphStyle),k)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}else for(var E=0,L=0;E<b.length;E++)13===b.charCodeAt(E)&&(C.push(E-L+1),D.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:S(r(r({},i),e.paragraphStyle),k)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}),L=E+1);for(var O=I(r(r({},a),{font:F}),k),B=e.styleRuns||[{length:b.length,style:e.style||{}}],T=[],R=[],V=b.length,_=0,z=B;_<z.length;_++){var G,N=z[_];V-=G=Math.min(N.length,V),G&&(1===V&&N===B[B.length-1]&&(G++,V--),R.push(G),T.push({StyleSheet:{StyleSheetData:I(r(r({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},e.style),N.style),k)}}))}V&&B.length&&(R.push(V),T.push({StyleSheet:{StyleSheetData:I(r({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},e.style),k)}}));var j=r(r({},o),e.gridInfo),W="vertical"===e.orientation?2:0,H="vertical"===e.orientation?1:0,X="box"===e.shapeType?1:0,Y={ShapeType:X};0===X?Y.PointBase=e.pointBase||[0,0]:Y.BoxBounds=e.boxBounds||[0,0,0,0],Y.Base={ShapeType:X,TransformPoint0:[1,0],TransformPoint1:[0,1],TransformPoint2:[0,0]};var K={KinsokuSet:[{Name:"PhotoshopKinsokuHard",NoStart:"?!)]},.:;",NoEnd:"([{",Keep:"",Hanging:".,"},{Name:"PhotoshopKinsokuSoft",NoStart:"",NoEnd:"",Keep:"",Hanging:".,"}],MojiKumiSet:[{InternalName:"Photoshop6MojiKumiSet1"},{InternalName:"Photoshop6MojiKumiSet2"},{InternalName:"Photoshop6MojiKumiSet3"},{InternalName:"Photoshop6MojiKumiSet4"}],TheNormalStyleSheet:0,TheNormalParagraphSheet:0,ParagraphSheetSet:[{Name:"Normal RGB",DefaultStyleSheet:0,Properties:S(r(r({},i),e.paragraphStyle),k)}],StyleSheetSet:[{Name:"Normal RGB",StyleSheetData:O}],FontSet:k.map((function(e){return{Name:e.name,Script:e.script||0,FontType:e.type||0,Synthetic:e.synthetic||0}})),SuperscriptSize:null!==(d=e.superscriptSize)&&void 0!==d?d:.583,SuperscriptPosition:null!==(u=e.superscriptPosition)&&void 0!==u?u:.333,SubscriptSize:null!==(f=e.subscriptSize)&&void 0!==f?f:.583,SubscriptPosition:null!==(h=e.subscriptPosition)&&void 0!==h?h:.333,SmallCapSize:null!==(g=e.smallCapSize)&&void 0!==g?g:.7};return{EngineDict:{Editor:{Text:b},ParagraphRun:{DefaultRunData:{ParagraphSheet:{DefaultStyleSheet:0,Properties:{}},Adjustments:{Axis:[1,0,1],XY:[0,0]}},RunArray:D,RunLengthArray:C,IsJoinable:1},StyleRun:{DefaultRunData:{StyleSheet:{StyleSheetData:{}}},RunArray:T,RunLengthArray:R,IsJoinable:2},GridInfo:{GridIsOn:!!j.isOn,ShowGrid:!!j.show,GridSize:null!==(m=j.size)&&void 0!==m?m:18,GridLeading:null!==(v=j.leading)&&void 0!==v?v:22,GridColor:p(j.color),GridLeadingFillColor:p(j.color),AlignLineHeightToGridFlags:!!j.alignLineHeightToGridFlags},AntiAlias:c.indexOf(null!==(y=e.antiAlias)&&void 0!==y?y:"sharp"),UseFractionalGlyphWidths:null===(w=e.useFractionalGlyphWidths)||void 0===w||w,Rendered:{Version:1,Shapes:{WritingDirection:W,Children:[{ShapeType:X,Procession:H,Lines:{WritingDirection:W,Children:[]},Cookie:{Photoshop:Y}}]}}},ResourceDict:r({},K),DocumentResources:r({},K)}}},443:(e,t)=>{"use strict";function r(e){return 0==(4294967168&e)?1:0==(4294965248&e)?2:0==(4294901760&e)?3:4}function n(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i>=55296&&i<=56319){if(n+1<e.length){var a=e.charCodeAt(n+1);56320==(64512&a)&&(n++,t+=r(((1023&i)<<10)+(1023&a)+65536))}}else t+=r(i)}return t}function i(e,t,n){var i=r(n);switch(i){case 1:e[t]=n;break;case 2:e[t]=n>>6&31|192,e[t+1]=63&n|128;break;case 3:e[t]=n>>12&15|224,e[t+1]=n>>6&63|128,e[t+2]=63&n|128;break;default:e[t]=n>>18&7|240,e[t+1]=n>>12&63|128,e[t+2]=n>>6&63|128,e[t+3]=63&n|128}return i}function a(e,t,r){for(var n=0;n<r.length;n++){var a=r.charCodeAt(n);if(a>=55296&&a<=56319){if(n+1<r.length){var o=r.charCodeAt(n+1);56320==(64512&o)&&(n++,t+=i(e,t,((1023&a)<<10)+(1023&o)+65536))}}else t+=i(e,t,a)}return t}function o(e,t){if(t>=e.length)throw Error("Invalid byte index");var r=e[t];if(128==(192&r))return 63&r;throw Error("Invalid continuation byte")}Object.defineProperty(t,"__esModule",{value:!0}),t.decodeString=t.encodeString=t.encodeStringTo=t.stringLengthInBytes=void 0,t.stringLengthInBytes=n,t.encodeStringTo=a,t.encodeString=function(e){var t=new Uint8Array(n(e));return a(t,0,e),t},t.decodeString=function(e){for(var t="",r=0;r<e.length;){var n=e[r++],i=void 0;if(0==(128&n))i=n;else if(192==(224&n)){if((i=(31&n)<<6|o(e,r++))<128)throw Error("Invalid continuation byte")}else if(224==(240&n)){if((i=(15&n)<<12|o(e,r++)<<6|o(e,r++))<2048)throw Error("Invalid continuation byte");if(i>=55296&&i<=57343)throw Error("Lone surrogate U+".concat(i.toString(16).toUpperCase()," is not a scalar value"))}else{if(240!=(248&n))throw Error("Invalid UTF-8 detected");if((i=(15&n)<<18|o(e,r++)<<12|o(e,r++)<<6|o(e,r++))<65536||i>1114111)throw Error("Invalid continuation byte")}i>65535&&(i-=65536,t+=String.fromCharCode(i>>>10&1023|55296),i=56320|1023&i),t+=String.fromCharCode(i)}return t}},238:e=>{"use strict";e.exports=require("base64-js")},331:e=>{"use strict";e.exports=require("pako")},261:e=>{"use strict";e.exports=require("source-map-support")},147:e=>{"use strict";e.exports=require("fs")},17:e=>{"use strict";e.exports=require("path")},924:()=>{},119:()=>{}},t={};!function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}(319)})();